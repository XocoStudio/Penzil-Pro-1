{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/Share.vue?fc48","webpack:///./src/assets/viewport/front.png","webpack:///./src/assets/icons/hideCanvas.svg","webpack:///./src/components/ObjectManager.vue?f8ec","webpack:///./src/components/MenuButtons/ExportUSDZ.vue?616a","webpack:///./src/assets/icons/Canvas-Head.svg","webpack:///./src/assets/viewport/top.png","webpack:///./src/components/DraggableWindow.vue?86ec","webpack:///./src/assets/icons/Canvas-Plane.svg","webpack:///./src/assets/icons/undo.svg","webpack:///./src/assets/icons/Canvas-Sphere.svg","webpack:///./src/components/Layers.vue?90bb","webpack:///./src/components/Modal.vue?1067","webpack:///./src/components/ModalContent/ExportForBlender.vue?01a3","webpack:///./src/App.vue","webpack:///./src/components/InfiniteGridHelper.js","webpack:///./src/components/Input.vue","webpack:///./src/components/Canvas.vue","webpack:///./src/components/transformControls.js","webpack:///./src/components/DraggableWindow.vue","webpack:///./src/components/DraggableWindow.vue?4329","webpack:///./src/components/Canvas.vue?9ef0","webpack:///./src/components/mirror.js","webpack:///./src/components/UndoRedo.vue","webpack:///./src/components/UndoRedo.vue?48dc","webpack:///./src/components/erase.js","webpack:///./src/components/draw.js","webpack:///./src/components/animate.js","webpack:///./src/components/select.js","webpack:///./src/components/Input.vue?2cde","webpack:///./src/components/ToolSelector.vue","webpack:///./src/components/ToolSelector.vue?91e2","webpack:///./src/components/ViewportCube.vue","webpack:///./src/components/ViewportCube.vue?d82a","webpack:///./src/components/LineSettings.vue","webpack:///./src/components/LineSliders.vue","webpack:///./src/components/LineSliders.vue?d738","webpack:///./src/components/LineSettings.vue?c1ce","webpack:///./src/components/Share.vue","webpack:///./src/components/MenuButtons/ToggleWindow.vue","webpack:///./src/components/MenuButtons/ToggleWindow.vue?4f5b","webpack:///./src/components/MenuButtons/Save.vue","webpack:///./src/components/MenuButtons/Save.vue?0f12","webpack:///./src/components/MenuButtons/Load.vue","webpack:///./src/components/MenuButtons/Load.vue?94e6","webpack:///./src/components/MenuButtons/ExportForBlender.vue","webpack:///./src/components/MenuButtons/ExportForBlender.vue?6ab3","webpack:///./src/components/MenuButtons/ExportForProcreate.vue","webpack:///./src/components/MenuButtons/ExportForProcreate.vue?7c76","webpack:///./src/components/MenuButtons/StartPreview.vue","webpack:///./src/components/MenuButtons/StartPreview.vue?2b3f","webpack:///./src/components/MenuButtons/ExportUSDZ.vue","webpack:///./src/components/TubeGeometryWithVariableWidth.js","webpack:///./src/components/convertMeshlineToGeometry.js","webpack:///./src/components/MenuButtons/ExportUSDZ.vue?2105","webpack:///./src/components/MenuButtons/ExportGLB.vue","webpack:///./src/components/MenuButtons/ExportGLB.vue?5942","webpack:///./src/components/MenuButtons/ExportHTML.vue","webpack:///./src/components/MenuButtons/ExportHTML.vue?9587","webpack:///./src/components/Share.vue?9ddb","webpack:///./src/components/ShapeSelector.vue","webpack:///./src/components/ShapeSelector.vue?c024","webpack:///./src/components/Modal.vue","webpack:///./src/components/ModalContent/Welcome.vue","webpack:///./src/components/ModalContent/Welcome.vue?077f","webpack:///./src/components/ModalContent/Feedback.vue","webpack:///./src/components/ModalContent/Feedback.vue?7c04","webpack:///./src/components/ModalContent/ExportForBlender.vue","webpack:///./src/components/ModalContent/ExportForBlender.vue?0856","webpack:///./src/components/ModalContent/ExportForProcreate.vue","webpack:///./src/components/ModalContent/ExportForProcreate.vue?3a30","webpack:///./src/components/ModalContent/Tutorial.vue","webpack:///./src/components/ModalContent/Tutorial.vue?6d16","webpack:///./src/components/ModalContent/Survey.vue","webpack:///./src/components/ModalContent/Survey.vue?bb90","webpack:///./src/components/ModalContent/BrushLibrary.vue","webpack:///./src/components/ModalContent/BrushLibrary.vue?31a0","webpack:///./src/components/Modal.vue?9db4","webpack:///./src/components/VideoExportPreview.vue","webpack:///./src/components/VideoExportPreview.vue?4d41","webpack:///./src/components/SceneSettings.vue","webpack:///./src/components/SceneSettings.vue?2763","webpack:///./src/components/ColorPalette.vue","webpack:///./src/components/ColorPalette.vue?b8e2","webpack:///./src/components/SymmetrySettings.vue","webpack:///./src/components/SymmetrySettings.vue?1141","webpack:///./src/components/Layers.vue","webpack:///./src/components/Layers.vue?639e","webpack:///./src/components/ObjectManager.vue","webpack:///./src/components/ObjectManager.vue?dfbb","webpack:///./src/components/TransformToolbar.vue","webpack:///./src/components/TransformToolbar.vue?ff3f","webpack:///./src/components/TwoDShapes.vue","webpack:///./src/components/TwoDShapes.vue?3024","webpack:///./src/App.vue?dfb6","webpack:///./src/assets/icons/Canvas-Cube.svg","webpack:///./src/assets/viewport/bottom.png","webpack:///./src/assets/icons/snapOn.svg","webpack:///./src/main.js","webpack:///./src/components/SceneSettings.vue?c298","webpack:///./src/components/MenuButtons/ExportHTML.vue?ace0","webpack:///./src/assets/icons/draw.svg","webpack:///./src/assets/icons/checkbox.svg","webpack:///./src/assets/viewport/right.png","webpack:///./src/assets/viewport/back.png","webpack:///./src/components/UndoRedo.vue?720c","webpack:///./src/assets/icons/redo.svg","webpack:///./src/components/ModalContent/Feedback.vue?f18e","webpack:///./src/components/ModalContent/Survey.vue?ca7d","webpack:///./src/App.vue?9d79","webpack:///./src/components/ModalContent/Welcome.vue?ba6f","webpack:///./src/assets/icons/checkbox-checked.svg","webpack:///./src/components/ModalContent/Tutorial.vue?c1be","webpack:///./src/components/LineSliders.vue?4ed3","webpack:///./src/components/MenuButtons/ToggleWindow.vue?adf7","webpack:///./src/components/ModalContent/BrushLibrary.vue?ef02","webpack:///./src/assets/icons/unlockControls.svg","webpack:///./src/components/ColorPalette.vue?21e9","webpack:///./src/components/Canvas.vue?0177","webpack:///./src/assets/icons/Canvas-Custom.svg","webpack:///./src/components/LineSettings.vue?7a37","webpack:///./src/assets/icons/scale.svg","webpack:///./src/assets/icons/share.svg","webpack:///./src/components/ModalContent/ExportForProcreate.vue?ffac","webpack:///./src/assets/icons/reset.svg","webpack:///./src/components/MenuButtons/ExportGLB.vue?30fd","webpack:///./src/assets/viewport/left.png","webpack:///./src/assets/icons/lockControls.svg","webpack:///./src/assets/icons/snapOff.svg","webpack:///./src/components/ToolSelector.vue?481e","webpack:///./src/components/VideoExportPreview.vue?ff48","webpack:///./src/components/SymmetrySettings.vue?aebe","webpack:///./src/assets/icons/Canvas-Cylinder.svg","webpack:///./src/components/ShapeSelector.vue?462c","webpack:///./src/components/Input.vue?34ec","webpack:///./src/assets/icons/showCanvas.svg","webpack:///./src/components/TransformToolbar.vue?1235","webpack:///./src/assets/icons/erase.svg","webpack:///./src/assets/icons/View_in_AR.svg","webpack:///./src/components/TwoDShapes.vue?781f","webpack:///./src/assets/icons/translate.svg","webpack:///./src/components/ViewportCube.vue?007c"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","show","previewing","setPreview","modalProp","setModal","applyPreset","quaternion","cameraResetDisabled","reopenTrigger","windowTriggers","view","is-open","windowStates","onWindowClose","uiVisible","ref","setSelectedTool","toggleProperties","toggleScene","selectedTool","tool","tools","initialX","windowPositions","x","undefined","initialY","y","toggleWindow","visible","twoDShapes","onAddCanvasShape","setStroke","setFill","forceVisible","propertiesVisible","properties","history","setMouseCoordinates","mirror","stroke","fill","radial","sectors","radial-axis","radialAxis","toolEnabled","localSymmetry","setSelectedCanvasShape","setToolEnabled","selectedShape","canvasShape","mouse","canvas","loadCustomModelInCanvas","setCanvasMaterial","shapes","scene","colors","applyColor","symmetry","$event","local-symmetry","layers","onLayerAdd","onLayerDelete","onLayerSelect","onLayerChange","onLayerDuplicate","objectManager","top","transformToolbar","left","location","display","InfiniteGridHelper","size1","size2","color","distance","axes","color2","distanceNear","THREE","planeAxes","substr","geometry","material","side","uniforms","uSize1","uSize2","uColor","uColor2","uDistance","uDistanceNear","transparent","vertexShader","fragmentShader","extensions","derivatives","grid","frustumCulled","handleInput","id","displayTouches","touches","item","clientX","class","style","width","height","viewBox","xmlns","src","alt","title","isOpen","$emit","toggleTransformMode","disabled","transformationEnabled","toggleControls","toggleVisibility","snap","toggleSnap","resetTransformation","transformationResetDisabled","_raycaster","Raycaster","_tempVector","Vector3","_tempVector2","_tempQuaternion","Quaternion","_unit","X","Y","Z","_changeEvent","type","_mouseDownEvent","_mouseUpEvent","_objectChangeEvent","TransformControls","camera","domElement","console","warn","document","touchAction","_gizmo","TransformControlsGizmo","add","_plane","TransformControlsPlane","scope","propName","defaultValue","propValue","set","dispatchEvent","worldPosition","worldPositionStart","worldQuaternion","worldQuaternionStart","cameraPosition","cameraQuaternion","pointStart","pointEnd","rotationAxis","rotationAngle","eye","_offset","_startNorm","_endNorm","_cameraScale","_parentPosition","_parentQuaternion","_parentQuaternionInv","_parentScale","_worldScaleStart","_worldQuaternionInv","_worldScale","_positionStart","_quaternionStart","_scaleStart","_getPointer","getPointer","_onPointerDown","onPointerDown","_onPointerHover","onPointerHover","_onPointerMove","onPointerMove","_onPointerUp","onPointerUp","addEventListener","ownerDocument","this","updateMatrixWorld","parent","error","matrixWorld","decompose","copy","invert","sub","normalize","pointer","dragging","setFromCamera","intersect","intersectObjectWithRay","picker","axis","button","planeIntersect","space","rotationSnap","rotation","Math","round","z","position","scale","point","applyQuaternion","indexOf","divide","translationSnap","search","setFromMatrixPosition","dot","multiply","scaleSnap","ROTATION_SPEED","distanceTo","angleTo","cross","setFromAxisAngle","removeEventListener","traverse","child","dispose","size","Object3D","event","pointerLockElement","rect","getBoundingClientRect","clientY","enabled","pointerType","pointerHover","pointerDown","pointerMove","pointerUp","raycaster","includeInvisible","allIntersections","intersectObject","isTransformControls","_tempEuler","Euler","_alignVector","_zeroVector","_lookAtMatrix","Matrix4","_tempQuaternion2","_identityQuaternion","_dirVector","_tempMatrix","_unitX","_unitY","_unitZ","_v1","_v2","_v3","gizmoMaterial","MeshBasicMaterial","depthTest","depthWrite","fog","toneMapped","gizmoLineMaterial","LineBasicMaterial","matInvisible","clone","opacity","matHelper","setHex","matRed","DoubleSide","matRedArrow","matGreen","matGreenArrow","matBlue","matBlueArrow","matRedTransparent","matGreenTransparent","matBlueTransparent","matWhiteTransparent","matYellowTransparent","matYellow","matGray","arrowGeometry","CylinderGeometry","translate","arrowPickerGeometry","scaleHandleGeometry","BoxGeometry","lineGeometry","BufferGeometry","setAttribute","Float32BufferAttribute","lineGeometry2","CircleGeometry","radius","RingGeometry","PI","rotateY","rotateX","TranslateHelperGeometry","gizmoTranslate","Mesh","pickerTranslate","helperTranslate","START","OctahedronGeometry","END","DELTA","Line","gizmoRotate","helperRotate","AXIS","pickerRotate","TorusGeometry","gizmoScale","XY","YZ","XZ","XYZ","pickerScale","helperScale","gizmoCombined","XT","XR","YT","YR","ZT","ZR","pickerCombined","helperCombined","setupGizmo","gizmoMap","gizmo","tag","updateMatrix","tempGeometry","applyMatrix4","matrix","helper","force","handles","concat","children","handle","renderOrder","factor","isOrthographicCamera","bottom","zoom","min","tan","fov","multiplyScalar","AXIS_FLIP_TRESHOLD","PLANE_HIDE_TRESHOLD","abs","setFromRotationMatrix","lookAt","atan2","multiplyQuaternions","showX","showY","showZ","_color","_opacity","setFromEuler","isTransformControlsGizmo","PlaneGeometry","wireframe","isTransformControlsPlane","minimized","currentY","currentX","startDrag","startDragTouch","toggleMinimize","close","$attrs","userClosed","inheritAttrs","props","String","default","Number","Boolean","startOpen","isDragging","dragOffsetX","dragOffsetY","methods","target","closest","onDrag","stopDrag","touch","onDragTouch","stopDragTouch","preventDefault","watch","val","__exports__","currentShape","canvasMirror","headGeometry","components","DraggableWindow","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","emissive","emissiveIntensity","startPosition","startQuaternion","startScale","emits","getPosition","$refs","win","loadCustomModel","payload","url","loader","GLTFLoader","load","gltf","model","userData","customId","box","setFromObject","center","getCenter","selectObject","renderer","render","addPrimitive","geo","mat","mesh","charAt","toUpperCase","addShape","Date","now","detach","attach","setUp","vm","raycastCanvas","getWorldPosition","getWorldQuaternion","getWorldScale","w","matrixWorldNeedsUpdate","intersects","intersectObjects","hitObject","rootShape","curr","includes","setUpMirror","makeScale","removeMirror","remove","setMaterial","newMat","texture","startsWith","matcap","forEach","shape","isMesh","isGroup","found","find","oldPos","oldQuat","oldScale","idx","needsUpdate","updateMirrorOf","obj","activeScene","localCanvas","mirrors","Array","isArray","mirrorData","mirroredObject","getObjectByProperty","uuid","mInv","sx","sy","sz","mFlip","transform","raycast","MeshLineRaycast","mirrorParent","mirrorAxisFromParent","eraseMirrorOf","innerHeight","start-open","undo","undoDisabled","redo","redoDisabled","undoRedoComponent","undoManager","updateUi","setTool","hasUndo","hasRedo","mounted","erase","e","GPUPickHelper","pickingTexture","pixelBuffer","Uint8Array","pickedObject","pickedObjectSavedColor","x1","y1","x2","y2","coordinatesArray","dx","dy","err","e2","cssPosition","pixelRatio","getPixelRatio","setViewOffset","getContext","drawingBufferWidth","drawingBufferHeight","setRenderTarget","clearViewOffset","readRenderTargetPixels","intersectedObject","idToObject","setSize","calcPointsInBetween","eraser","pscene","background","mask","lw","lineWidth","cloneMaterial","MeshLineMaterial","sizeAttenuation","cx","cy","pickedObjects","pickArea","deleteObject","vertices","points","mirrorOn","map","show_fill","draw","fromVertices","$","ctx","onStart","resetPicking","setupPicking","start","onMove","move","onEnd","end","onCancel","generateBrushTexture","materialType","createElement","fillStyle","fillRect","globalCompositeOperation","gradient","createLinearGradient","addColorStop","imgData","createImageData","random","tempC","putImageData","drawImage","wrapS","wrapT","getActiveLayerGroup","show_stroke","line","MeshLine","Float32Array","alphaTest","blending","repeat","textureScale","resolution","innerWidth","dashArray","dashOffset","dashRatio","brushType","bufferPoints","smoothing","taper","wiggle","animationSpeed","fillGeometry","fillVertices","uvsX","uvsY","uvs","triangles","Uint16Array","Earcut","triangulate","attributes","array","face","setIndex","fillMaterial","fillMesh","drawingScene","split","currentObjects","nextObjects","unproject","addVertex","layerGroup","clear","verticesNeedsUpdate","boundingSphere","setGeometry","angleStep","createRadialCopies","targetMesh","angle","rotMatrix","makeRotationX","makeRotationZ","makeRotationY","rotateZ","vert","planeVector","cameraVector","reverse","computeBoundingSphere","autoClear","end_internal","v3","v4","nt","sign","normal","is","wiggleVal","wx","wy","wz","start1","stop1","start2","stop2","appendToBuffer","pt","getAveragePoint","Float32Concat","count","uvLowestX","uvHighestX","max","uvLowestY","uvHighestY","u","uv","index","clearDepth","first","second","firstLength","offset","len","totalX","totalY","totalZ","totalW","setPoints","minWidth","baseWidth","tailLength","onEnd_internal","cancel","verticesArray","isVector3","from","float32Vertices","fromArray","setUvs","floor","_x","_y","_z","_w","lg","updateStroke","assign","setStyle","brushTexture","alphaMap","useMap","updateFill","animateLines","delta","animated","updateMesh","loop","animate","requestAnimationFrame","startAnimating","stopAnimating","select","dragged","transformMode","vertexSelection","cssStart","cssEnd","z1","z2","z3","z4","bb","boundingBox","project","selectedObjects","boundingBoxPoints","getObjectBoundingBoxPoints","pointInRect","k","selection","selected","undoRedoSelection","undoRedoMatrix","selector","controls","group","params","threshold","tx","ty","log","objectsInRect","select_internal","previouslySelected","deselect","toggleSelectionColor","getElementById","startingTransform","setTransformToolbarDisplay","update","endPosition","endQuaternion","endScale","equals","transfromToolbarPosition","calculateTransfromToolbarPosition","setTransformToolbarPosition","computeBoundingBox","divideScalar","element","selectedObj","bool","deselect_internal","previousMatrix","duplicateArray","previousSelectedArray","transformMatrix","duplicate","duplicateMaterial","mirrorAxis","originalObject","buffArray","vectors","vectorsY","v","minY","maxY","transforming","down","touchLengthHistory","multiTouched","eventCancelled","movingCanvas","updateMouseCoordinates","changedTouches","pageX","pageY","clickStartTime","startCx","startCy","hitCanvas","shiftKey","currentCx","currentCy","currentAngle","snapInterval","snappedAngle","sqrt","constrainedDx","cos","constrainedDy","sin","constrainedCx","constrainedCy","clickDuration","dist","pow","toggleTopFrontView","then","undoRedo","getTarget","pos","isTop","rotateTo","hash","substring","brushes","brush","selectPreset","icon","settings","strokeWidth","strokeColor","g","b","fillColor","emit","viewPortRenderer","viewPortScene","viewPortCamera","resetCamera","dragStartPosition","lastDragPosition","init","antialias","alpha","setPixelRatio","devicePixelRatio","addViewPortCube","right","front","back","materials","cube","rotate","deltaX","deltaY","PI_2","speed","theta","phi","evalFaceIndexAndRepositionCamera","adj","dampingFactor","setLookAt","setTimeout","onTapStart","onTapMove","onTapEnd","faceIndex","zoomTo","setRotationFromQuaternion","active","setStrokeColor","setStrokeActive","setStrokeWidth","step","brushMaterial","setFillColor","setFillActive","fillOpacity","cssProps","setActive","toLowerCase","hue","saturation","brightness","computed","calcRadius","updateColor","h","f","q","arguments","LineSliders","emitStroke","emitFill","updateSettings","label","checked","showModal","isSafari","startPreview","required","exportToJson","json","dataStr","encodeURIComponent","JSON","stringify","filename","prompt","el","click","importFromJson","text","file","input","body","appendChild","onchange","onReaderLoad","parse","drawLine","files","reader","FileReader","onload","readAsText","showExportModal","exportForAr","rel","download","sceneUSDZ","TubeBufferGeometry","path","tubularSegments","radialSegments","closed","parameters","frames","computeFrenetFrames","tangents","normals","binormals","vertex","Vector2","P","indices","generateBufferData","generateSegment","generateUVs","generateIndices","getPointAt","N","B","a","convertMeshlineToGeometry","tubeMaterial","pathBase","tubeGeometry","flatShading","roughness","shininess","metalness","convertMeshlineFillToGeometry","edges","fillMeshFlipped","fillFlippedGeometry","fillMeshMaterial","arr","lightbox","viewInAr","exporter","USDZExporter","arraybuffer","blob","Blob","URL","createObjectURL","exportToGltf","sceneGLTF","save","saveString","saveArrayBuffer","buffer","link","href","GLTFExporter","ArrayBuffer","output","binary","ToggleWindow","Save","Load","ExportForBlender","ExportForProcreate","StartPreview","ExportUSDZ","ExportGLB","ExportHTML","hide","windowName","navigator","vendor","userAgent","shapeOption","selectShape","accept","onFileChange","customModels","selectCustomModel","fileInput","modelId","toString","hideModal","handleSetPreset","exportToGp","applyMatrix","for","mergeLines","checkFills","exportToUSDZ","install","clock","cameraControls","sceneExport","rendererUSDZ","cameraUSDZ","previewUSDZ","updateProjectionMatrix","draggingDampingFactor","mouseButtons","ACTION","ROTATE","wheel","code","TRUCK","middle","DOLLY","ZOOM","one","TOUCH_ROTATE","two","TOUCH_ZOOM_ROTATE","three","TOUCH_DOLLY_TRUCK","maxZoom","minZoom","flipFace","onWindowResize","aspect","clientWidth","clientHeight","canvasBounds","context","lineRenderOrder","animtateSceneUSDZ","getDelta","hasCameraControlsUpdated","geometries","newObj","mergedGeometry","cells","ceil","uvs_length","mergedUvs","keys","prop","unmounted","frameborder","allow","countDown","localStorage","getItem","parseInt","tut02","marginheight","marginwidth","Welcome","Feedback","Tutorial","Survey","BrushLibrary","recording","startRecording","currentLength","startAzimuthAngle","polarAngle","easeInOutQuad","easeInOutQuadYoyo","pop","easing","DEG2RAD","encoder","buf","readPixels","RGBA","UNSIGNED_BYTE","halfHeight","bytesPerRow","temp","topOffset","bottomOffset","subarray","copyWithin","addFrameRgba","finalize","uint8Array","FS","readFile","outputFilename","delete","normalizeRotations","initialize","azimuthAngle","anchor","Event","enable","backgroundColor","updateBackground","toggleFog","fogVisible","handleFileChange","toggleHdriActive","hdriActive","toggleHdriBackground","hdriBackgroundVisible","toggleGrid","gridVisible","gridColor","updateGrid","gridSize","gridDivisions","divisionsColor","fadeDistance","fadeDistanceNear","toggleInfiniteGrid","infiniteGrid","sceneEnvironment","created","gridHelper","infiniteGridHelper","updateFog","isHDR","endsWith","RGBELoader","setDataType","pmremGenerator","compileEquirectangularShader","envMap","fromEquirectangular","updateEnvironment","mapping","environment","beforeUnmount","colorGroups","hex","selectColor","rgb","hexToRgb","exec","isAxisActive","toggleAxis","toggleLocal","toggleRadial","setRadialAxis","updateSectors","current","replace","addLayer","deleteLayer","duplicateLayer","layer","activeLayerId","selectLayer","editingLayerId","stopEditing","startEditing","updateLayerOpacity","locked","nextLayerId","lockLayers","mergeOnExport","newLayer","unshift","findIndex","deletedLayer","newIndex","originalLayerId","layerId","newOpacity","$nextTick","nameInput","focus","toggleLockLayers","lockAll","isSelected","getObjectName","getObjectType","getObjectColor","getObjectOpacity","updateOpacity","deleteSelectedObject","handleImageUpload","saveState","getHistory","state","sIndex","restoreState","deleteState","currentSelection","timer","setInterval","clearInterval","getObjectMaterial","getHexString","parseFloat","updateMatOpacity","selectedTransformation","placeholder","duplicateOffset","posTop","posLeft","getObjectByName","createShape","getCenterPoint","vec","thickness","moveTo","lineTo","closePath","absarc","ellipse","finalCenter","drawingprop","main","preserveDrawingBuffer","Input","LineSettings","ToolSelector","ViewportCube","UndoRedo","Share","Canvas","ShapeSelector","Modal","VideoExportPreview","SceneSettings","ColorPalette","SymmetrySettings","Layers","ObjectManager","TransformToolbar","TwoDShapes","multitouch","toolHistory","canvasTransformEnabled","layerGroups","actions","setClearColor","bgCol","NONE","TOUCH_ZOOM_TRUCK","targetSphere","light","refs","setViewport","linesAnimated","previous","setSelectedTool_internal","setSelectedMultitouch","setSelectedObject","lineSettings","handleKeyDown","objectsToDelete","realArg","strokeOpacity","originalGroup","newGroup","generateUUID","createApp","App","mount"],"mappings":"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","file":"js/app.6ec4baf0.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Share.vue?vue&type=style&index=0&id=24c8d122&scoped=true&lang=css\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAD6CAYAAACI7Fo9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAefSURBVHgB7dzpcdNqG8dh5Z3zHaiApQGgAggFsDXA0gBLASwNsDTA0gEUQIAG2AoIUAHQQPzq9hyfCbbkWCYE4/91zWjOnGBHCuQnPXoka2PUaoB1NvpfA6w9oUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUOAfxp6ffnypdnc3Gz2082bN5sbN240cJCEvoeKfT99//69gYNm6A4BhA4BDN1ZaaPRqDl37tzMKdSlS5eaBw8eNCxG6Eu4cuVKc/Xq1WYZx44daximIp8O3VzHMEJfwvHjx5uzZ8828Ldwjg4BhA4BDN3/MpNz1WXO9Xef5x7UXMFknYcPHx4v/BlCXwH379+fmWyqOYCa9Ctv3rwZv+bDhw//TUJVNN++fZv7feu1jx8/Hr9/93snTp06NV7qTr3676KePXvWvH379qevXbhwobl48WLv9pbaudTPdffu3d4dTb2ntnn655j2+vXr5tq1azNf370d7DKi1+fPn0f1VzS93Lt3b7Sf2l/+mXW0s/rjP6t1dW3DvH+62u52J9H7vq5lc3Nz/L697OzsjLet7+9k3vZOlo2NjdGjR486v//W1tag7f7d/zZrYsc5+gqro2L7izvkLeOj6enTp5vnz58Pel8dIetqQq1zWYtub/uL19y6dWvmyM3vY+i+hBpe1vB1qMnQdRE1lB+6jhcvXoxvJPkVk1BreD1EOxoYtHOp2GvHUKcnzt0PwIhefUP3ZZfJcHxa19B9kWV6W9sdydzXt+fh43XV0sY1d2jdHuE7t7Vv6D691LZM1tUMGGobuv8WO0KfY1VCr/dVeO3k2/j19d/pEPvOySvo9uj833t3e/r0ae/OoR3Gd27rXqG3pw2j9+/f//Se7e3t3vXU3MA8tb6u97YTcSMWJvR5ViH0inEvFX3fUXU6uq6fsSukOqq3pw4zr58Xeu0cunYopWLves+RI0fmbp/Q94XJuFVW58mL3FPfdy5f59t7XTareYOaiJvW/nIMOududwzNkydPes+3++Yn6tLZfn/mn1km45ZQv7TL3HAy5Fp1BVNPo1nEx48fZ762+zr8Xo4ePTpeV3vJ66ev1wx+hbjoZNm8icbaEdQ17vqeHDyhL6GOskNnpYeqncIigVWIdRVg2pCbRirC8+fPz4Re6mi7yA5qkdccOnSo4c8wdF9Ri44Y+j6uefLkyWY/1tc1WuiyyE6pPR9v+DOEzthBXMt2RP9zhL6mvn79Ouj1fRNidf7O30/of7kacncdjbvO2+eZ/pDKhLvW1oPQ10DXRFhdcqvbUhdRl9K67juvnciQKwWsLqGvga4Z9pqku379+jjieUb/3nPeNXRf5cdl7fVz8TOhr4G6Xt41o13XrOsJqnVknw6j/r8+z3779u3OT6zVJbc7d+40q6DrisDLly/FPoDr6GugzqPr0cddD2Ko2E+cODG+9l+X3CYz33XZrO5867o8V5HPezjEQevajtpJXb58ebwzqtOLyZNif/z44cETHYS+JirkT58+NQ8fPuz88yEfea3Ps//uG4IWVTudvh1OfSy3lt3qtl+hzzJ0XyN1VK8HOlQcy6j3VeSvXr1qVkndtcevEfqaqdhrGXoXWkVez47b2tpauUtqNTRf9L5/ugl9DxXA9HIQ6/iV9VQU7969Gw/n6/FQXd9v8rXaIdTrt7e3x8P+RSNfZluX/TnrNbVtdTrR9fPs/l5us+22MTJ1ufbq5pmaqNp933rd8Tbk0VarpCYY62fZ/UTcWs6cObMyE4grZiR0WH8jQ3cIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQI8E+7jBpgnY3+D4mMAGzm69l9AAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"img/hideCanvas.b8094833.svg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ObjectManager.vue?vue&type=style&index=0&id=9d553bfc&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ExportUSDZ.vue?vue&type=style&index=0&id=206058b5&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/Canvas-Head.8a592147.svg\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAD6CAYAAACI7Fo9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAd/SURBVHgB7d3pcRPpGobhNjX/wRGAE2BLAEwAQBEAWwIsCbAkACSAgQBYEjCQAEsCLAlgSMB99LqOpjx2y1LLI2uk57qqeqoQbrWmZu5evv5aXmkHGmCZtccaYOkJHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQL81TAza2trzay9efOmOXv2bAMHEfoM/fjxo5m1379/NzCOU3cIIHQIIHQI4Bp9ht6/fz/2Z758+dLcu3dv3+t37txprl69OnZ9A3FMQugzdPHixWZa586dO9T6sJtTdwggdAjg1H2J1T324X32EydO7CxHvd1Tp041zJ/Ql8yHDx+at2/fNu/evds3YadCr8G7mzdvNhcuXJg4wrZtm9u3b+97/cmTJ3/vPGq7L1++3Nn23kk8tc0aWLxx44bw56VlrgYj8239Z9i7vHjxovf7DAbvOt9r1HL37t12a2tr7Htvb2/vW3dlZaX9/v17++3bt17bffjwYcuR23aNvgQePXrUrK+v7xxV+3j69Glz/vz5qafqDkJvLl261Gu7g9APtU2mI/QFV/fgK55pDWPtG97gKNE8fvx4qmA/f/7cXLt2zTz9IyT0BVZH8joqj1LXz3UvvpaDJtZU7HVG0De8riN5bWe4zYMG/yr2Z8+eNRyRlrma9hq9ro8HIXWuOxjw2nnfrnUGA2K9r5+7rtF3L/U5Hjx40Hm9v7GxsfN5utar6/xJxgg4tG2hz9m0oY8KdnBEHRtPxde17urqaue6B4W+trbWDo7OB26vBuxGxW5w7kgYjFtUHz9+3Pda3bqqL6IYd7+8bq91XdfXqXvdIpvU4IjcDI7kY+fb1xdwbG5udn6uPttjekJfQHVt3DUIVvFOep+6HprZG95gz9+5AxmlrsPr3vgk6nPVDmav+vcwKDd7Ql9AX79+7Xy9JsFMqiLvejqunqabRB3Nr1y50kyqfv7y5cudfzfpNpme0BdQ1xGwwu0766zrlLvP7bIzZ840fYz6fD9//myYLaEviaOax34Yi/AZl5XQF1BXMNNMXOlap0+MfY/Eoz7jyZMnG2ZL6Ato1Clw3ymw9QDKXpN+Y00N3PW9th410OdIP3tCX0CjBt1qptyk6jZc1xG2z1dT1a2xSc8kasfQNRNu+EQdsyX0BTSc2rpXHdEPmhI7VFNe79+/v+/1Ghm/fv16M6mtra3m1q1bOxEfpP6+dkJdO4VJvhePf0HLXE07M27Ues3/Z5vVbLZadqs/b25ujpyltr6+3rmtcVNgazZezX7r2t6vX7/awT37kVNgu6bq8q/bXql/NsxNHYXrgZK9BqGPnYxST52N+qbZuo6v+9zDW2B//vzZ+TKKUdfxdTQfxNp5/V//ixw7Nv7krybE1PaOHz++8+e6hn/16lXn7cDaXv388+fPG2audUSfs8N88UQ9pFJzzZsJv/Rh1FJH1oPmnI87ok+z1Oeuz8+RMNd9kdXRt+aQH+aXOQ7nq9fSV11f1/p9ra6uNq9fv/a1UkdI6AtuGHudBveNroKr0fdpIq9tVegV7KQ7mlpn+ICLkfajJfT/gApg79JHxb6xsfGP4LveZ/ha/XKIegCmrsn7zFfvUrHXdms84aBt1k6ldiifPn0S+RwYjFtCNfhVA2H18MvugbCagVa35fqeMrcdg3EVb+1cdg8YDre7e2JMBX769Gm/dWa+WqEz1qSh85/VOnWHAEKHAEKHAEKHAEKHAEKHAEKHAH5tMhPpmq03zTx35kPojFVB1zTXvUxlXRxmxsHyMzMOEggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAvw1WNoGWGbt/wCMo+OPrYBQagAAAABJRU5ErkJggg==\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DraggableWindow.vue?vue&type=style&index=0&id=0ddda394&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/Canvas-Plane.3b032ddd.svg\";","module.exports = __webpack_public_path__ + \"img/undo.77205cb3.svg\";","module.exports = __webpack_public_path__ + \"img/Canvas-Sphere.bbd345df.svg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Layers.vue?vue&type=style&index=0&id=b061a208&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Modal.vue?vue&type=style&index=0&id=320b9c99&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ExportForBlender.vue?vue&type=style&index=0&id=96b7a698&scoped=true&lang=css\"","<template>\n  <video-export-preview :show=\"previewing\" @stop-previewing=\"setPreview\" />\n  <modal :modalProp=\"modalProp\" @modal-set=\"setModal\" @set-preset=\"applyPreset\" />\n  <viewport-cube\n    v-show=\"uiVisible && windowStates.view\"\n    :quaternion=\"quaternion\"\n    :cameraResetDisabled=\"cameraResetDisabled\"\n    :reopenTrigger=\"windowTriggers.view\"\n    :is-open=\"windowStates.view\"\n    @close=\"onWindowClose('view')\"\n  />\n  <tool-selector \n    v-show=\"uiVisible && windowStates.tools\" \n    ref=\"toolSelector\"\n    @selected-tool=\"setSelectedTool\" \n    @set-preset=\"applyPreset\" \n    @toggle-properties=\"toggleProperties\" \n    @toggle-scene=\"toggleScene\" \n    :selectedTool=\"tool\" \n    :reopenTrigger=\"windowTriggers.tools\" \n    :is-open=\"windowStates.tools\" \n    @close=\"onWindowClose('tools')\"\n    :initialX=\"windowPositions.tools ? windowPositions.tools.x : undefined\"\n    :initialY=\"windowPositions.tools ? windowPositions.tools.y : undefined\" \n    @toggle-2d-shapes=\"toggleWindow('twoDShapes')\"\n  />\n  <two-d-shapes \n    v-show=\"uiVisible && windowStates.twoDShapes\" \n    :visible=\"true\"\n    :reopenTrigger=\"windowTriggers.twoDShapes\" \n    :is-open=\"windowStates.twoDShapes\" \n    @close=\"onWindowClose('twoDShapes')\" \n    @add-shape=\"onAddCanvasShape\"\n  />\n  <line-settings v-show=\"uiVisible && windowStates.properties\" ref=\"lineSettings\" @stroke=\"setStroke\" @fill=\"setFill\" :selectedTool=\"tool\" :forceVisible=\"propertiesVisible\" :reopenTrigger=\"windowTriggers.properties\" :is-open=\"windowStates.properties\" @close=\"onWindowClose('properties')\" />\n\n  <undo-redo v-show=\"uiVisible && windowStates.history\" @selected-tool=\"setSelectedTool\" ref=\"undoRedo\" :reopenTrigger=\"windowTriggers.history\" :is-open=\"windowStates.history\" @close=\"onWindowClose('history')\" />\n  <Input\n    @mouse-coordinates=\"setMouseCoordinates\"\n    :selectedTool=\"tool\"\n    :mirror=\"mirror\"\n    :stroke=\"stroke\"\n    :fill=\"fill\"\n    :radial=\"radial\"\n    :sectors=\"sectors\"\n    :radial-axis=\"radialAxis\"\n    :toolEnabled=\"toolEnabled\"\n    :localSymmetry=\"localSymmetry\"\n  />\n  <Canvas\n    ref=\"raycastCanvas\"\n    @selected-canvas-shape=\"setSelectedCanvasShape\"\n    @set-tool-enabled=\"setToolEnabled\"\n    :selectedShape=\"canvasShape\"\n    :selectedTool=\"tool\"\n    :mouse=\"mouse\"\n    :reopenTrigger=\"windowTriggers.canvas\"\n    :is-open=\"windowStates.canvas\"\n    @close=\"onWindowClose('canvas')\"\n    :initialX=\"windowPositions.canvas ? windowPositions.canvas.x : undefined\"\n    :initialY=\"windowPositions.canvas ? windowPositions.canvas.y : undefined\"\n  />\n  <ShapeSelector\n    v-show=\"uiVisible && windowStates.shapes\"\n    @selected-canvas-shape=\"setSelectedCanvasShape\"\n    @load-custom-model=\"loadCustomModelInCanvas\"\n    @set-material=\"setCanvasMaterial\"\n    :selectedShape=\"canvasShape\"\n    :selectedTool=\"tool\"\n    :reopenTrigger=\"windowTriggers.shapes\"\n    :is-open=\"windowStates.shapes\"\n    @close=\"onWindowClose('shapes')\"\n  />\n  \n  <Share v-show=\"uiVisible\" @modal-set=\"setModal\" @preview=\"setPreview\" @toggle-window=\"toggleWindow\" ref=\"share\" :windowStates=\"windowStates\" />\n  <scene-settings v-show=\"uiVisible && windowStates.scene\" :visible=\"true\" :reopenTrigger=\"windowTriggers.scene\" :is-open=\"windowStates.scene\" @close=\"onWindowClose('scene')\" />\n  <color-palette v-show=\"uiVisible && windowStates.colors\" :visible=\"true\" :reopenTrigger=\"windowTriggers.colors\" @set-color=\"applyColor\" :is-open=\"windowStates.colors\" @close=\"onWindowClose('colors')\" />\n  <symmetry-settings v-show=\"uiVisible && windowStates.symmetry\" :visible=\"true\" :reopenTrigger=\"windowTriggers.symmetry\" :is-open=\"windowStates.symmetry\" @close=\"onWindowClose('symmetry')\" :mirror=\"mirror\" @set-mirror=\"mirror = $event\" :radial=\"radial\" @set-radial=\"radial = $event\" :sectors=\"sectors\" @set-sectors=\"sectors = $event\" :radial-axis=\"radialAxis\" @set-radial-axis=\"radialAxis = $event\" :local-symmetry=\"localSymmetry\" @set-local-symmetry=\"localSymmetry = $event\" />\n    <layers v-show=\"uiVisible && windowStates.layers\" :visible=\"true\" :reopenTrigger=\"windowTriggers.layers\" :is-open=\"windowStates.layers\" @close=\"onWindowClose('layers')\" @layer-add=\"onLayerAdd\" @layer-delete=\"onLayerDelete\" @layer-select=\"onLayerSelect\" @layer-change=\"onLayerChange\" @layer-duplicate=\"onLayerDuplicate\" />\n    <object-manager v-show=\"uiVisible && windowStates.objectManager\" :visible=\"true\" :reopenTrigger=\"windowTriggers.objectManager\" :is-open=\"windowStates.objectManager\" @close=\"onWindowClose('objectManager')\" />\n    \n    <transform-toolbar\n      v-show=\"uiVisible\"\n      :top=\"transformToolbar.top\"\n      :left=\"transformToolbar.left\"\n      :location=\"transformToolbar.location\"\n      :display=\"transformToolbar.display\"\n      :selectedTool=\"tool\"\n    />\n  \n  <!-- <div>\n    <a id=\"ar\" rel=\"ar\"><img src=\"@/assets/icons/AR.png\" /></a>\n  </div> -->\n</template>\n\n<script>\nimport * as THREE from \"three\";\n//import { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader.js\";\nimport CameraControls from \"camera-controls\";\nCameraControls.install({ THREE: THREE });\nimport InfiniteGridHelper from \"./components/InfiniteGridHelper.js\";\n\nimport Input from \"./components/Input.vue\";\nimport ToolSelector from \"./components/ToolSelector.vue\";\nimport ViewportCube from \"./components/ViewportCube.vue\";\nimport UndoRedo, { undoManager } from \"./components/UndoRedo.vue\";\nimport { select } from \"./components/select.js\";\nimport { draw } from \"./components/draw.js\";\nimport { erase } from \"./components/erase.js\";\nimport LineSettings from \"./components/LineSettings.vue\";\n\nimport Share from \"./components/Share.vue\";\nimport Canvas from \"./components/Canvas.vue\";\nimport { controls, canvas } from \"./components/Canvas.vue\";\nimport ShapeSelector from \"./components/ShapeSelector.vue\";\nimport Modal from \"./components/Modal.vue\";\nimport VideoExportPreview from \"./components/VideoExportPreview.vue\";\nimport SceneSettings from \"./components/SceneSettings.vue\";\nimport ColorPalette from \"./components/ColorPalette.vue\";\nimport SymmetrySettings from \"./components/SymmetrySettings.vue\";\n\nimport Layers from \"./components/Layers.vue\";\nimport ObjectManager from \"./components/ObjectManager.vue\";\nimport TransformToolbar from \"./components/TransformToolbar.vue\";\nimport TwoDShapes from \"./components/TwoDShapes.vue\";\n\n\nexport let renderer = new THREE.WebGLRenderer({\n  antialias: true,\n  alpha: true,\n  preserveDrawingBuffer: true,\n});\nexport let camera = new THREE.PerspectiveCamera(\n  100,\n  window.innerWidth / window.innerHeight,\n  1,\n  1000\n);\n\nexport let scene, drawingScene, cameraControls, vm, drawingprop;\n\nvar main, clock;\n\nexport default {\n  name: \"App\",\n  components: {\n    Input,\n    LineSettings,\n    ToolSelector,\n    ViewportCube,\n    UndoRedo,\n    Share,\n    Canvas,\n    ShapeSelector,\n    Modal,\n    VideoExportPreview,\n    SceneSettings,\n    ColorPalette,\n    SymmetrySettings,\n\n    Layers,\n    ObjectManager,\n    TransformToolbar,\n    TwoDShapes,\n  },\n  data() {\n    return {\n      tool: \"draw\",\n      toolEnabled: true,\n      canvasShape: \"plane\",\n      multitouch: \"canvas\",\n      toolHistory: [\"draw\"],\n      stroke: {}, \n      fill: {}, \n      mirror: \"\", \n      radial: false,\n      sectors: 6,\n      radialAxis: 'y',\n      localSymmetry: false,\n      quaternion: undefined,\n      cameraResetDisabled: false,\n      selected: undefined,\n      transformToolbar: { top: 0, left: 0, location: \"above\", display: false },\n      canvasTransformEnabled: true,\n      modalProp: { show: false, mode: \"about\" },\n      previewing: false,\n      mouse: {},\n      propertiesVisible: false,\n      layerGroups: {},\n      activeLayerId: 1,\n      windowTriggers: {\n        tools: 0,\n        properties: 0,\n        canvas: 0,\n        shapes: 0,\n        history: 0,\n        view: 0,\n        actions: 0,\n        scene: 0,\n        colors: 0,\n        symmetry: 0,\n        layers: 0,\n        objectManager: 0,\n        twoDShapes: 0,\n      },\n      windowPositions: {},\n      windowStates: {\n        tools: true,\n        properties: false,\n        canvas: true,\n        shapes: false,\n        history: false,\n        view: true,\n        scene: false,\n        colors: false,\n        symmetry: false,\n        layers: false,\n        objectManager: false,\n        twoDShapes: false,\n      },\n      uiVisible: true,\n    };\n  },\n  emits: [\"modal-set\", \"selected-canvas-shape\"],\n  methods: {\n    toggleProperties: function() {\n      this.toggleWindow('properties');\n    },\n    toggleScene: function() {\n      this.toggleWindow('scene');\n    },\n    toggleWindow: function(windowName) {\n      if (this.windowStates[windowName] !== undefined) {\n          this.windowStates[windowName] = !this.windowStates[windowName];\n          if (this.windowStates[windowName] && this.windowTriggers[windowName] !== undefined) {\n            this.windowTriggers[windowName]++;\n          }\n      } else {\n          if (this.windowTriggers[windowName] !== undefined) {\n            this.windowTriggers[windowName]++;\n          }\n      }\n    },\n    onWindowClose: function(windowName) {\n       if (this.windowStates[windowName] !== undefined) {\n           this.windowStates[windowName] = false;\n       }\n    },\n    init: function () {\n      CameraControls.install({ THREE: THREE });\n      main = document.getElementById(\"threed\");\n\n      renderer.setPixelRatio(window.devicePixelRatio);\n      renderer.setClearColor(0x000000, 0); \n      renderer.setSize(window.innerWidth, window.innerHeight);\n      main.appendChild(renderer.domElement);\n      renderer.domElement.id = \"threeJsCanvas\";\n\n      scene = new THREE.Scene();\n      var bgCol = 0xdddddd;\n      scene.background = new THREE.Color(bgCol);\n      scene.fog = new THREE.Fog(bgCol, 10, 25);\n\n      drawingScene = new THREE.Scene();\n\n      const grid = new InfiniteGridHelper(1, 10, new THREE.Color(0x0000ff), 40);\n      scene.add(grid);\n\n      camera.layers.enable(0); \n      camera.layers.enable(1);\n      camera.zoom = 3;\n      camera.position.set(5, 5, 10);\n\n      clock = new THREE.Clock();\n\n      cameraControls = new CameraControls(camera, renderer.domElement);\n      cameraControls.dampingFactor = 20;\n      cameraControls.draggingDampingFactor = 200;\n      cameraControls.mouseButtons.left = CameraControls.ACTION.ROTATE;\n      cameraControls.mouseButtons.wheel = CameraControls.ACTION.DOLLY;\n      document.addEventListener(\"keydown\", (event) => {\n        if (event.code === \"Space\") {\n          cameraControls.mouseButtons.left = CameraControls.ACTION.TRUCK;\n          this.toolEnabled = false;\n        }\n      });\n      document.addEventListener(\"keyup\", (event) => {\n        if (event.code === \"Space\") {\n          cameraControls.mouseButtons.left = CameraControls.ACTION.ROTATE;\n          this.toolEnabled = true;\n        }\n      });\n      document.addEventListener(\"keydown\", (event) => {\n        if (event.code === \"AltLeft\") {\n          cameraControls.mouseButtons.left = CameraControls.ACTION.ROTATE;\n          this.toolEnabled = false;\n        }\n      });\n      document.addEventListener(\"keyup\", (event) => {\n        if (event.code === \"AltLeft\") {\n          cameraControls.mouseButtons.left = CameraControls.ACTION.ROTATE;\n          this.toolEnabled = true;\n        }\n      });\n      cameraControls.mouseButtons.middle = CameraControls.ACTION.TRUCK;\n      cameraControls.mouseButtons.right = CameraControls.ACTION.NONE;\n      cameraControls.touches.one = CameraControls.ACTION.TOUCH_ROTATE;\n      cameraControls.touches.two = CameraControls.ACTION.TOUCH_DOLLY_TRUCK;\n      cameraControls.touches.three = CameraControls.ACTION.TOUCH_ZOOM_TRUCK;\n      cameraControls.maxZoom = 4000;\n      cameraControls.minZoom = 0.5;\n      cameraControls.enabled = true;\n\n      this.quaternion = [\n        camera.quaternion.x,\n        camera.quaternion.y,\n        camera.quaternion.z,\n        camera.quaternion.w,\n      ];\n\n      cameraControls.addEventListener(\"update\", () => {\n        this.quaternion = [\n          camera.quaternion.x,\n          camera.quaternion.y,\n          camera.quaternion.z,\n          camera.quaternion.w,\n        ];\n\n        let target = new THREE.Vector3();\n        target = cameraControls.getTarget(target);\n        targetSphere.position.set(target.x, target.y, target.z);\n\n        if (select.s && select.s.controls != undefined) {\n          if (this.tool == \"select\") {\n            select.s.helper.update();\n          }\n        }\n      });\n\n      cameraControls.addEventListener(\"sleep\", () => {\n        if (select.s && select.s.controls != undefined) {\n          if (this.tool == \"select\") {\n            select.s.helper.update();\n            let position = select.s.calculateTransfromToolbarPosition();\n            this.transformToolbar.left = position.x;\n            this.transformToolbar.top = position.y;\n            this.transformToolbar.location = position.location;\n            this.transformToolbar.display = true;\n          }\n        }\n\n        let target = new THREE.Vector3();\n        target = cameraControls.getTarget(target);\n        var x = target.x;\n        var y = target.y;\n        var z = target.z;\n\n        if (\n          camera.position.z != 10 ||\n          x != 0 ||\n          y != 0 ||\n          z != 0 ||\n          camera.zoom != 3\n        ) {\n          this.cameraResetDisabled = false;\n        } else {\n          this.cameraResetDisabled = true;\n        }\n      });\n\n      var geometry = new THREE.SphereBufferGeometry(0.025, 32, 32);\n      var material = new THREE.MeshBasicMaterial({ color: 0xffc75f });\n      var targetSphere = new THREE.Mesh(geometry, material);\n      scene.add(targetSphere);\n\n      const light = new THREE.HemisphereLight(0xffffff, 0x222222, 0.8);\n      light.position.set(0, 50, 150);\n      scene.add(light);\n\n      this.$.refs.raycastCanvas.setUp();\n      this.$.refs.raycastCanvas.resetTransformation();\n\n      window.addEventListener(\"resize\", this.onWindowResize);\n      window.addEventListener(\"orientationchange\", this.onWindowResize);\n      this.onWindowResize();\n\n      renderer.render(scene, camera);\n    },\n    onWindowResize: function () {\n      camera.aspect = window.innerWidth / window.innerHeight;\n      camera.left = (900 * camera.aspect) / -2;\n      camera.right = (900 * camera.aspect) / 2;\n      camera.top = 900 / 2;\n      camera.bottom = -900 / 2;\n\n      camera.updateProjectionMatrix();\n\n      renderer.setSize(window.innerWidth, window.innerHeight);\n\n      renderer.setViewport(0, 0, window.innerWidth, window.innerHeight);\n      renderer.render(scene, camera);\n    },\n    animate: function () {\n      const delta = clock.getDelta();\n      let hasCameraControlsUpdated = cameraControls.update(delta);\n      let linesAnimated = false;\n      if (draw && draw.animateLines) {\n           linesAnimated = draw.animateLines(delta);\n      }\n\n      requestAnimationFrame(this.animate);\n\n      if (hasCameraControlsUpdated || linesAnimated) {\n        renderer.setViewport(0, 0, window.innerWidth, window.innerHeight);\n        renderer.render(scene, camera);\n      }\n    },\n    setSelectedTool: function (val) {\n      this.tool = val;\n\n      if (this.tool === \"erase\") {\n        canvas.visible = false;\n        controls.visible = false;\n        renderer.render(scene, camera);\n      } else if (this.tool === \"draw\") {\n        if (this.$.refs.raycastCanvas.visible === true) {\n          canvas.visible = true;\n        } else {\n          canvas.visible = false;\n        }\n        if (\n          this.$.refs.raycastCanvas.transformationEnabled === true &&\n          this.$.refs.raycastCanvas.visible === true\n        ) {\n          controls.visible = true;\n        } else {\n          controls.visible = false;\n        }\n        renderer.render(scene, camera);\n      }\n\n      this.toolHistory.push(val);\n      if (this.toolHistory.length > 2) {\n        this.toolHistory.shift();\n      }\n\n      let current = val;\n      let previous = this.toolHistory[0];\n\n      undoManager.add({\n        undo: function () {\n          vm.setSelectedTool(previous);\n        },\n        redo: function () {\n          vm.setSelectedTool(current);\n        },\n      });\n\n      this.$.refs.undoRedo.updateUi();\n    },\n    setToolEnabled: function (val) {\n      this.toolEnabled = val;\n    },\n    setMouseCoordinates: function (val) {\n      this.mouse = val;\n    },\n    setSelectedCanvasShape: function (val) {\n      this.canvasShape = val;\n    },\n    loadCustomModelInCanvas: function (url) {\n      if (this.$refs.raycastCanvas) {\n        this.$refs.raycastCanvas.loadCustomModel(url);\n      }\n    },\n    setCanvasMaterial: function (val) {\n      if (this.$refs.raycastCanvas) {\n        this.$refs.raycastCanvas.setMaterial(val);\n      }\n    },\n    onAddCanvasShape: function(mesh) {\n        // Switch to Canvas mode\n        this.setSelectedTool('draw');\n        // Forward to Canvas component\n        if (this.$refs.raycastCanvas) {\n            this.$refs.raycastCanvas.addShape(mesh);\n        }\n    },\n    setSelectedTool_internal: function (val) {\n      this.tool = val;\n    },\n    setSelectedMultitouch: function (val) {\n      this.multitouch = val;\n\n      if (val === \"camera\") {\n        cameraControls.enabled = true;\n      } else {\n        cameraControls.enabled = false;\n      }\n    },\n    setSelectedObject: function (val) {\n      this.selected = val;\n    },\n    setTransformToolbarPosition: function (val) {\n      this.transformToolbar.top = val.top;\n      this.transformToolbar.left = val.left;\n      this.transformToolbar.location = val.location;\n    },\n    setTransformToolbarDisplay: function (val) {\n      this.transformToolbar.display = val;\n    },\n    setStroke: function (val) {\n      this.stroke = val;\n      if (select && select.s && select.s.controls && select.s.controls.object && select.s.controls.object.type === 'Mesh') {\n           draw.updateStroke(select.s.controls.object, val);\n           renderer.render(scene, camera);\n      }\n    },\n    setFill: function (val) {\n      this.fill = val;\n      if (select && select.s && select.s.controls && select.s.controls.object && select.s.controls.object.type === 'Mesh') {\n           draw.updateFill(select.s.controls.object, val);\n           renderer.render(scene, camera);\n      }\n    },\n    setModal: function (val) {\n      this.modalProp = val;\n    },\n    setPreview: function (val) {\n      this.previewing = val;\n    },\n    applyPreset: function (settings) {\n      this.$refs.lineSettings.updateSettings(settings);\n    },\n    applyColor: function(color) {\n      if (this.tool !== 'draw') {\n        this.tool = 'draw';\n      }\n      this.$refs.lineSettings.updateSettings({\n        strokeColor: color,\n        stroke: true \n      });\n    },\n    handleKeyDown(event) {\n        if (event.key === \"AltGraph\") {\n            this.uiVisible = !this.uiVisible;\n        }\n        if (event.code === \"Space\") {\n            if (this.$refs.raycastCanvas) {\n                this.$refs.raycastCanvas.toggleVisibility();\n            }\n        }\n        if (event.code === \"Delete\" || event.code === \"Backspace\") {\n            if (select && select.s && select.s.controls && select.s.controls.object) {\n                 const obj = select.s.controls.object;\n                 let objectsToDelete = [];\n\n                 if (obj.type === \"Group\") {\n                     // Multiple selection\n                     obj.children.forEach(child => {\n                         // The group children are clones/helpers, the real UUID is in userData\n                         const uuid = child.userData.uuid;\n                         if (uuid) {\n                             // Find the real object in the LayerGroups or Scene\n                             // We can search the whole scene or use getObjectByProperty on scene\n                             // Note: erase.deleteObject expects the object itself\n                             const realArg = scene.getObjectByProperty(\"uuid\", uuid);\n                             if (realArg) objectsToDelete.push(realArg);\n                         }\n                     });\n                 } else {\n                     // Single selection (Mesh)\n                     objectsToDelete.push(obj);\n                 }\n\n                 // Deselect first to remove gizmos\n                 if (objectsToDelete.length > 0) {\n                     select.s.deselect();\n                     \n                     // Now delete\n                     objectsToDelete.forEach(o => {\n                         erase.deleteObject(o);\n                     });\n                     \n                     renderer.render(scene, camera);\n                 }\n            }\n        }\n    },\n    onLayerAdd(layer) {\n      const layerGroup = new THREE.Group();\n      layerGroup.name = `Layer_${layer.id}`;\n      layerGroup.userData.layerId = layer.id;\n      scene.add(layerGroup);\n      this.layerGroups[layer.id] = layerGroup;\n    },\n    onLayerDelete(layer) {\n      const layerGroup = this.layerGroups[layer.id];\n      if (layerGroup) {\n        while(layerGroup.children.length > 0) {\n          layerGroup.remove(layerGroup.children[0]);\n        }\n        scene.remove(layerGroup);\n        delete this.layerGroups[layer.id];\n        renderer.render(scene, camera);\n      }\n    },\n    onLayerSelect(layer) {\n      this.activeLayerId = layer.id;\n    },\n    onLayerChange(layer) {\n      const layerGroup = this.layerGroups[layer.id];\n      if (layerGroup) {\n        layerGroup.visible = layer.visible;\n        layerGroup.traverse((child) => {\n          if (child.isMesh && child.userData && child.userData.stroke) {\n               // Update stroke opacity\n               let opacity = layer.opacity / 100;\n               // If item has its own alpha, multiply? For now, override or multiply with base stroke opacity\n               let strokeOpacity = child.userData.stroke.opacity !== undefined ? child.userData.stroke.opacity : 1;\n               child.material.opacity = strokeOpacity * opacity;\n               child.material.transparent = true;\n               if(child.material.uniforms && child.material.uniforms.opacity) {\n                   child.material.uniforms.opacity.value = child.material.opacity;\n               }\n          } else if (child.material) {\n            // General objects\n            let opacity = layer.opacity / 100;\n            if (Array.isArray(child.material)) {\n              child.material.forEach(mat => {\n                mat.opacity = opacity;\n                mat.transparent = opacity < 1;\n              });\n            } else {\n              child.material.opacity = opacity;\n              child.material.transparent = opacity < 1;\n            }\n          }\n        });\n        renderer.render(scene, camera);\n      }\n    },\n    onLayerDuplicate(payload) {\n        // payload: { newLayer, originalLayerId }\n        const originalGroup = this.layerGroups[payload.originalLayerId];\n        if (!originalGroup) return;\n\n        const newGroup = new THREE.Group();\n        newGroup.name = `Layer_${payload.newLayer.id}`;\n        newGroup.userData.layerId = payload.newLayer.id;\n\n        // Deep clone children\n        originalGroup.children.forEach(child => {\n            const clone = child.clone(true); // Recursive clone\n            \n            // We must update UUIDs for the system to treat them as new unique objects\n            // Also need to update userData logic if it references UUIDs\n            clone.uuid = THREE.MathUtils.generateUUID();\n            \n            // If it's a stroke, we might want to ensure the material is unique if we plan to change it independently later?\n            // Usually cloning mesh shares material. \n            // For independent layer opacity, sharing material is tricky if we modify material opacity directly.\n            // But we do modify directly in onLayerChange. So we should clone materials too.\n            if (clone.material) {\n                clone.material = clone.material.clone();\n            }\n            \n            newGroup.add(clone);\n        });\n\n        scene.add(newGroup);\n        this.layerGroups[payload.newLayer.id] = newGroup;\n        renderer.render(scene, camera);\n    },\n    getActiveLayerGroup() {\n      return this.layerGroups[this.activeLayerId];\n    },\n  },\n  watch: {\n    'windowStates.properties': function(val) {\n        this.propertiesVisible = val;\n    }\n  },\n  mounted() {\n    this.init();\n    window.addEventListener(\"keydown\", this.handleKeyDown);\n    this.animate();\n\n    this.onLayerAdd({ id: 1, name: \"Layer 1\", visible: true, opacity: 100, locked: false });\n\n    vm = this;\n    this.cameraResetDisabled = false; \n  },\n  beforeUnmount() {\n      window.removeEventListener(\"keydown\", this.handleKeyDown);\n  }\n};\n</script>\n\n<style>\n@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap');\n\n:root {\n  --bg-color: rgb(60, 57, 60);\n  --accent-color: rgb(255, 176, 0);\n  --accent-color-selected: rgb(228, 156, 0);\n  --ui-bg-color: rgb(30, 30, 30);\n  --line-color-lightest: rgb(255, 242, 213);\n  --line-color-light: rgb(255, 231, 178);\n  --line-color-medium: rgb(255, 220, 142);\n  --line-color-dark: rgb(255, 209, 107);\n}\n\nbody,\nhtml,\n#app {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  touch-action: manipulation;\n  font-weight: 900;\n  color: #1c1c1e;\n}\n\nbutton {\n  font-weight: 900;\n  color: #1c1c1e;\n}\n\n#app {\n  font-family: 'Inter', Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  height: 100%;\n  width: 100%;\n}\n\ninput[type=\"radio\"] {\n  opacity: 0;\n  position: fixed;\n  width: 0;\n}\n\ninput[type=\"radio\"]:checked + label {\n  background-color: #ffe8b3;\n}\n\ninput[type=\"radio\"]:not(:checked) + label {\n  background-color: #ffffff;\n}\n\n.disabled {\n  pointer-events: none;\n  touch-action: none;\n  opacity: 0.6;\n}\n\n.hidden {\n  display: none;\n}\n\na {\n  color: #ffb000;\n  text-decoration: none;\n}\n\na:hover {\n  color: #ff8400;\n}\n\n@media (min-width: 320px) and (max-width: 480px) {\n  #viewport {\n    display: none;\n  }\n\n  .lineSettings {\n    display: none;\n  }\n\n  .soapbar {\n    display: none;\n  }\n\n  .canvasSettings {\n    top: auto;\n    bottom: 12px;\n  }\n}\n</style>\n","import * as THREE from 'three'\n\n// Author: Fyrestar https://mevedia.com (https://github.com/Fyrestar/THREE.InfiniteGridHelper)\n// Author: Fyrestar https://mevedia.com (https://github.com/Fyrestar/THREE.InfiniteGridHelper)\nexport default function InfiniteGridHelper(size1, size2, color, distance, axes = 'xzy', color2, distanceNear = 0) {\n\n    color = color || new THREE.Color('white');\n    color2 = color2 || new THREE.Color('white'); // Default second color\n    size1 = size1 || 10;\n    size2 = size2 || 100;\n\n    distance = distance || 8000;\n    distanceNear = distanceNear || 0;\n\n\n\n    const planeAxes = axes.substr(0, 2);\n\n    const geometry = new THREE.PlaneBufferGeometry(2, 2, 1, 1);\n\n    const material = new THREE.ShaderMaterial({\n\n        side: THREE.DoubleSide,\n\n        uniforms: {\n            uSize1: {\n                value: size1\n            },\n            uSize2: {\n                value: size2\n            },\n            uColor: {\n                value: color\n            },\n            uColor2: {\n                value: color2\n            },\n            uDistance: {\n                value: distance\n            },\n            uDistanceNear: {\n                value: distanceNear\n            }\n        },\n        transparent: true,\n        vertexShader: `\n           \n           varying vec3 worldPosition;\n\t\t   \n           uniform float uDistance;\n           \n           void main() {\n           \n                vec3 pos = position.${axes} * uDistance;\n                pos.${planeAxes} += cameraPosition.${planeAxes};\n                \n                worldPosition = pos;\n                \n                gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n           \n           }\n           `,\n\n\n        fragmentShader: `\n           \n           varying vec3 worldPosition;\n           \n           uniform float uSize1;\n           uniform float uSize2;\n           uniform vec3 uColor;\n           uniform vec3 uColor2;\n           uniform float uDistance;\n           uniform float uDistanceNear;\n            \n            \n            \n            float getGrid(float size) {\n            \n                vec2 r = worldPosition.${planeAxes} / size;\n                \n                \n                vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);\n                float line = min(grid.x, grid.y);\n                \n            \n                return 1.0 - min(line, 1.0);\n            }\n            \n           void main() {\n           \n                \n                  float dist = distance(cameraPosition.${planeAxes}, worldPosition.${planeAxes});\n                  float d = clamp((uDistance - dist) / (uDistance - uDistanceNear), 0.0, 1.0);\n                \n                  float g1 = getGrid(uSize1);\n                  float g2 = getGrid(uSize2);\n                  \n                  // Mix colors: if g2 (large grid) is present, use uColor2, else use uColor\n                  vec3 color = mix(uColor, uColor2, g2); \n                  \n                  gl_FragColor = vec4(color.rgb, mix(g2, g1, g1) * pow(d, 3.0));\n                  gl_FragColor.a = mix(0.5 * gl_FragColor.a, gl_FragColor.a, g2);\n                \n                  if ( gl_FragColor.a <= 0.0 ) discard;\n                \n           \n           }\n           \n           `,\n\n        extensions: {\n            derivatives: true\n        }\n\n    });\n\n\n    // THREE.Mesh.call( this, geometry, material );\n\n    // this.frustumCulled = false;\n\n    let grid = new THREE.Mesh(geometry, material);\n\n    grid.frustumCulled = false;\n\n    return grid\n\n}\n\nInfiniteGridHelper.prototype = {\n    ...THREE.Mesh.prototype,\n    ...THREE.Object3D.prototype,\n    ...THREE.EventDispatcher.prototype\n};","<template>\n  <div\n    @touchstart=\"handleInput\"\n    @touchmove=\"handleInput\"\n    @touchend=\"handleInput\"\n    @mousedown=\"handleInput\"\n    @mousemove=\"handleInput\"\n    @mouseup=\"handleInput\"\n    @contextmenu=\"handleInput\"\n    id=\"threed\"\n  >\n    <span v-if=\"displayTouches\">\n      <svg\n        v-for=\"item in touches\"\n        :key=\"item.clientX\"\n        class=\"cursor\"\n        :style=\"{\n          top: item.clientY - 52 / 2 + 'px',\n          left: item.clientX - 52 / 2 + 'px',\n        }\"\n        width=\"52\"\n        height=\"52\"\n        viewBox=\"0 0 52 52\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <circle cx=\"26\" cy=\"24\" r=\"22\" fill=\"url(#paint0_radial)\" />\n        <g filter=\"url(#filter0_d)\">\n          <circle\n            cx=\"26\"\n            cy=\"24\"\n            r=\"22\"\n            stroke=\"white\"\n            stroke-opacity=\"0.38\"\n            stroke-width=\"0.5\"\n          />\n        </g>\n        <defs>\n          <filter\n            id=\"filter0_d\"\n            x=\"0.75\"\n            y=\"0.75\"\n            width=\"50.5\"\n            height=\"50.5\"\n            filterUnits=\"userSpaceOnUse\"\n            color-interpolation-filters=\"sRGB\"\n          >\n            <feFlood flood-opacity=\"0\" result=\"BackgroundImageFix\" />\n            <feColorMatrix\n              in=\"SourceAlpha\"\n              type=\"matrix\"\n              values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\"\n            />\n            <feOffset dy=\"2\" />\n            <feGaussianBlur stdDeviation=\"1.5\" />\n            <feColorMatrix\n              type=\"matrix\"\n              values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.7 0\"\n            />\n            <feBlend\n              mode=\"normal\"\n              in2=\"BackgroundImageFix\"\n              result=\"effect1_dropShadow\"\n            />\n            <feBlend\n              mode=\"normal\"\n              in=\"SourceGraphic\"\n              in2=\"effect1_dropShadow\"\n              result=\"shape\"\n            />\n          </filter>\n          <radialGradient\n            id=\"paint0_radial\"\n            cx=\"0\"\n            cy=\"0\"\n            r=\"1\"\n            gradientUnits=\"userSpaceOnUse\"\n            gradientTransform=\"translate(26 24) rotate(90) scale(22)\"\n          >\n            <stop stop-color=\"white\" stop-opacity=\"0\" />\n            <stop offset=\"1\" stop-color=\"white\" stop-opacity=\"0.42\" />\n          </radialGradient>\n        </defs></svg\n    ></span>\n  </div>\n</template>\n\n<script>\nimport { draw } from \"./draw.js\";\nimport { erase } from \"./erase.js\";\nimport { select } from \"./select.js\";\nimport { undoManager } from \"./UndoRedo.vue\";\n\nimport * as THREE from \"three\";\nimport { canvas, controls } from \"./Canvas.vue\";\nimport { renderer, scene, camera, cameraControls } from \"../App.vue\";\n\nexport default {\n  name: \"Input\",\n  data() {\n    return {\n      mouse: {\n        down: false,\n        tx: undefined, //x coord for threejs\n        ty: undefined, //y coord for threejs\n        cx: undefined, //x coord for canvas\n        cy: undefined, //y coord for canvas\n        force: 0,\n        touchLengthHistory: [0, 0],\n        multiTouched: false,\n        eventCancelled: false,\n      },\n      displayTouches: false,\n      touches: [],\n      movingCanvas: false,\n    };\n  },\n  props: {\n    selectedTool: String,\n    toolEnabled: Boolean,\n    mirror: [Boolean, String],\n    stroke: [Object],\n    fill: [Object],\n    radial: Boolean,\n    sectors: Number,\n    radialAxis: String,\n    localSymmetry: Boolean\n  },\n  emits: [\"mouse-coordinates\"],\n  methods: {\n    updateMouseCoordinates: function (event) {\n      if (event.touches) {\n        this.mouse.tx =\n          (event.changedTouches[0].pageX / window.innerWidth) * 2 - 1;\n        this.mouse.ty =\n          -(event.changedTouches[0].pageY / window.innerHeight) * 2 + 1;\n        this.mouse.cx = event.changedTouches[0].pageX;\n        this.mouse.cy = event.changedTouches[0].pageY;\n\n        this.mouse.touchLengthHistory.push(event.touches.length);\n        this.mouse.touchLengthHistory.shift();\n\n        if (event.touches[0] && event.touches[0][\"force\"] !== undefined) {\n          this.mouse.force = event.touches[0][\"force\"];\n        } else {\n          this.mouse.force = 0;\n        }\n      } else {\n        if (event.button == 0) {\n          this.mouse.tx = (event.clientX / window.innerWidth) * 2 - 1;\n          this.mouse.ty = -(event.clientY / window.innerHeight) * 2 + 1;\n          this.mouse.cx = event.clientX;\n          this.mouse.cy = event.clientY;\n        }\n      }\n    },\n    onStart: function (event) {\n      if ((event.button && event.button != 0) || this.toolEnabled === false) {\n        return;\n      }\n\n      this.touches = [];\n      //this is just to display the touches event\n      if (event.touches?.length > 0 && this.displayTouches == true) {\n        for (let i = 0; i < event.touches.length; i++) {\n          this.touches.push(event.touches[i]);\n        }\n      }\n\n      if (\n        event.button == 0 ||\n        event.touches.length == 1 ||\n        event.touches.force > 0\n      ) {\n        this.mouse.down = true;\n        this.mouse.eventCancelled = false;\n        this.mouse.multiTouched = false;\n        this.mouse.clickStartTime = Date.now(); // Track click duration\n        this.mouse.startCx = this.mouse.cx; // Track click position\n        this.mouse.startCy = this.mouse.cy;\n\n        let raycaster;\n        switch (this.selectedTool) {\n          case \"draw\": {\n            raycaster = new THREE.Raycaster();\n            raycaster.setFromCamera(\n              new THREE.Vector2(this.mouse.tx, this.mouse.ty),\n              camera\n            );\n            \n            // Transform Controls Logic\n            if (\n              (controls.mode === \"combined\" &&\n                controls.children.length > 0 &&\n                raycaster.intersectObjects(\n                  controls.children[0].children[10].children\n                )[0] !== undefined &&\n                controls.enabled === true) ||\n              (controls.mode === \"scale\" &&\n                controls.children.length > 0 &&\n                raycaster.intersectObjects(\n                  controls.children[0].children[5].children\n                )[0] !== undefined &&\n                controls.enabled === true)\n            ) {\n              this.movingCanvas = true;\n              cameraControls.enabled = false;\n              return;\n            } \n            \n            // Check if we hit the drawing canvas\n            const hitCanvas = raycaster.intersectObjects([canvas])[0] !== undefined;\n\n            if (hitCanvas) {\n               // Drawing Mode\n               if (controls.enabled === true) {\n                 controls.visible = false;\n                 renderer.render(scene, camera);\n               }\n               cameraControls.enabled = false; // Disable Orbit/Pan/Zoom while drawing\n               draw.onStart(\n                 this.mouse.tx,\n                 this.mouse.ty,\n                 0,\n                 this.mouse.force,\n                 true,\n                 this.mirror,\n                 this.stroke,\n                 this.fill,\n                 this.radial,\n                 this.sectors,\n                 this.radialAxis,\n                 this.localSymmetry\n               );\n            } else {\n               // Background Mode (Orbit)\n               // We do NOT call draw.onStart\n               // We ensure cameraControls is enabled\n               cameraControls.enabled = true;\n            }\n            break;\n          }\n          case \"erase\":\n            cameraControls.enabled = false;\n            erase.onStart(this.mouse.cx, this.mouse.cy);\n            break;\n          case \"select\":\n            cameraControls.enabled = false;\n            select.onStart(\n              this.mouse.tx,\n              this.mouse.ty,\n              this.mouse.cx,\n              this.mouse.cy\n            );\n            break;\n          default:\n            break;\n        }\n      } else {\n        //this means that we are escalating from a single touch to a multitouch and then we should cancel whatever input we started\n        this.mouse.multiTouched = true;\n        if (\n          this.mouse.touchLengthHistory[0] === 1 &&\n          this.mouse.touchLengthHistory[1] === 2\n        ) {\n          this.mouse.eventCancelled = true;\n          switch (this.selectedTool) {\n            case \"draw\":\n              draw.onCancel();\n              break;\n            case \"erase\":\n              erase.onCancel();\n              break;\n            case \"select\":\n              select.onCancel();\n              break;\n            default:\n              break;\n          }\n        }\n      }\n    },\n    onMove: function (event) {\n      if ((event.button && event.button != 0) || this.toolEnabled === false)\n        return;\n\n      this.touches = [];\n      if (event.touches?.length > 0 && this.displayTouches == true) {\n        for (let i = 0; i < event.touches.length; i++) {\n          this.touches.push(event.touches[i]);\n        }\n      }\n\n      if (this.mouse.down) {\n        if (event.button == 0 || event.touches.length == 1) {\n          switch (this.selectedTool) {\n            case \"draw\":\n              // Only draw if we actually started drawing (which means cameraControls is disabled)\n              if (cameraControls.enabled === false && this.movingCanvas === false) {\n                 // Ortho/Polar Constraint Logic (Shift Key)\n                 let tx = this.mouse.tx;\n                 let ty = this.mouse.ty;\n\n                 if (event.shiftKey) {\n                     const startCx = this.mouse.startCx;\n                     const startCy = this.mouse.startCy;\n                     const currentCx = this.mouse.cx;\n                     const currentCy = this.mouse.cy;\n\n                     const dx = currentCx - startCx;\n                     const dy = currentCy - startCy;\n                     \n                     // 1. Calculate current angle\n                     const currentAngle = Math.atan2(dy, dx);\n                     \n                     // 2. Snap to nearest 45 degrees (PI/4)\n                     const snapInterval = Math.PI / 4;\n                     const snappedAngle = Math.round(currentAngle / snapInterval) * snapInterval;\n                     \n                     // 3. Project current distance onto new angle\n                     const distance = Math.sqrt(dx*dx + dy*dy);\n                     const constrainedDx = distance * Math.cos(snappedAngle);\n                     const constrainedDy = distance * Math.sin(snappedAngle);\n                     \n                     // 4. Calculate new screen coordinates\n                     const constrainedCx = startCx + constrainedDx;\n                     const constrainedCy = startCy + constrainedDy;\n\n                     // 5. Convert back to normalized device coordinates (three.js needs these)\n                     tx = (constrainedCx / window.innerWidth) * 2 - 1;\n                     ty = -(constrainedCy / window.innerHeight) * 2 + 1;\n                 }\n\n                 draw.onMove(\n                  tx,\n                  ty,\n                  0,\n                  this.mouse.force,\n                  true\n                );\n              } else if (this.movingCanvas === true) {\n                // Moving transform controls, do nothing here\n                return;\n              }\n              break;\n            case \"erase\":\n              erase.onMove(this.mouse.cx, this.mouse.cy);\n              break;\n            case \"select\":\n              select.onMove(this.mouse.cx, this.mouse.cy);\n              break;\n            default:\n              break;\n          }\n        } else {\n          //cameraControls handle the multitouch\n        }\n      }\n    },\n    onEnd: function (event) {\n      if (this.toolEnabled === false) return;\n      this.touches = [];\n\n      // Right Click (Undo)\n      if (event.button === 2) {\n          if (undoManager.hasUndo()) {\n              undoManager.undo();\n              // Try a reactive update if needed, though undoManager handles logic\n              // Access vm to update UI if possible or just rely on undoManager callback\n              import(\"../App.vue\").then(module => {\n                  if (module.vm && module.vm.$refs.undoRedo) {\n                      module.vm.$refs.undoRedo.updateUi();\n                  }\n              })\n          }\n          return;\n      }\n\n      if (event.button && event.button != 0) return;\n\n      if (this.mouse.multiTouched || this.mouse.eventCancelled) {\n        if (controls.enabled === true && canvas.visible === true) {\n          controls.visible = true;\n          renderer.render(scene, camera);\n        }\n        cameraControls.enabled = true;\n        return;\n      } else {\n        switch (this.selectedTool) {\n          case \"draw\":\n            if (this.movingCanvas === true) {\n              this.movingCanvas = false;\n            } else {\n              if (cameraControls.enabled === false) {\n                 // We were drawing\n                 draw.onEnd(this.mirror);\n                 if (controls.enabled === true && canvas.visible === true) {\n                   controls.visible = true;\n                   renderer.render(scene, camera);\n                 }\n              } else {\n                 // We were Orbiting (cameraControls was enabled)\n                 // Check for \"Click\" (Toggle View) logic\n                 const clickDuration = Date.now() - this.mouse.clickStartTime;\n                 const dist = Math.sqrt(\n                   Math.pow(this.mouse.cx - this.mouse.startCx, 2) + \n                   Math.pow(this.mouse.cy - this.mouse.startCy, 2)\n                 );\n                 \n                 if (clickDuration < 300 && dist < 5) {\n                    this.toggleTopFrontView();\n                 }\n              }\n            }\n            break;\n          case \"erase\":\n            erase.onEnd();\n            break;\n          case \"select\":\n            select.onEnd(this.mouse.tx, this.mouse.ty);\n            break;\n          default:\n            break;\n        }\n      }\n      this.mouse.down = false;\n      this.mouse.distance = 0;\n      cameraControls.enabled = true; // Always restore camera controls\n    },\n    toggleTopFrontView: function() {\n        // Simple logic to toggle between Top and Front views\n        // This takes the current position and decides where to go\n        // Top: (0, Y, 0), Front: (0, 0, Z)\n        \n        let target = new THREE.Vector3();\n        cameraControls.getTarget(target);\n        \n        // Approximate current position\n        const pos = camera.position;\n        const isTop = Math.abs(pos.y) > Math.abs(pos.z) && Math.abs(pos.y) > Math.abs(pos.x);\n        \n        if (isTop) {\n            // Go to Front\n             cameraControls.rotateTo(0, Math.PI / 2, true);\n        } else {\n            // Go to Top\n             cameraControls.rotateTo(0, 0, true);\n        }\n    },\n    handleInput: function (event) {\n      if (event.type === 'contextmenu') {\n          event.preventDefault();\n          return;\n      }\n      this.updateMouseCoordinates(event);\n\n      switch (event.type) {\n        case \"touchstart\":\n          this.onStart(event);\n          break;\n        case \"touchmove\":\n          this.onMove(event);\n          break;\n        case \"touchend\":\n          if (this.toolEnabled === false) {\n            this.$emit(\"mouse-coordinates\", {\n              x: this.mouse.tx,\n              y: this.mouse.ty,\n            });\n          }\n          this.onEnd(event);\n          break;\n        case \"mousedown\":\n          this.onStart(event);\n          break;\n        case \"mousemove\":\n          this.onMove(event);\n          break;\n        case \"mouseup\":\n          if (this.toolEnabled === false) {\n            this.$emit(\"mouse-coordinates\", {\n              x: this.mouse.tx,\n              y: this.mouse.ty,\n            });\n          }\n          this.onEnd(event);\n          break;\n        default:\n        //nothing;\n      }\n    },\n  },\n  watch: {},\n  mounted() {\n    if (window.location.hash) {\n      var hash = window.location.hash.substring(1); //Puts hash in variable, and removes the # character\n      if (hash === \"displayTouches\") {\n        this.displayTouches = true;\n      }\n    }\n  },\n};\n</script>\n\n<style>\n#container {\n  height: 100%;\n  width: 100%;\n}\n\n.cursor {\n  position: absolute;\n  z-index: 6;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  touch-action: none;\n}\n\n#twod {\n  position: absolute;\n  z-index: 1;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n#threed {\n  width: 100%;\n  height: 100%;\n}\n</style>","<template>\n  <draggable-window \n    ref=\"win\"\n    title=\"Canvas\" \n    :initialX=\"initialX || 12\" \n    :initialY=\"initialY || 12\"\n    :visible=\"selectedTool == 'draw'\"\n    :reopenTrigger=\"reopenTrigger\"\n    :is-open=\"isOpen\"\n    @close=\"$emit('close')\"\n  >\n    <div class=\"canvas-controls\">\n      <!-- Transform Mode -->\n      <button \n        class=\"control-btn\"\n        @click=\"toggleTransformMode()\"\n        :disabled=\"!visible\"\n        :title=\"mode === 'combined' ? 'Move Mode' : 'Scale Mode'\"\n      >\n        <img v-if=\"mode === 'combined' ? 'Move Mode' : 'Scale Mode'\" src=\"@/assets/icons/translate.svg\" alt=\"Move\" />\n        <img v-if=\"mode === 'scale'\" src=\"@/assets/icons/scale.svg\" alt=\"Scale\" />\n        <span class=\"tooltip\">{{ mode === 'combined' ? 'Move Mode' : 'Scale Mode' }}</span>\n      </button>\n\n      <!-- Lock/Unlock -->\n      <button \n        class=\"control-btn\"\n        :class=\"{ active: !transformationEnabled }\"\n        @click=\"toggleControls()\"\n        :disabled=\"!visible\"\n        :title=\"transformationEnabled ? 'Unlocked' : 'Locked'\"\n      >\n        <img \n          :src=\"transformationEnabled ? require('@/assets/icons/lockControls.svg') : require('@/assets/icons/unlockControls.svg')\" \n          alt=\"Lock\"\n        />\n        <span class=\"tooltip\">{{ transformationEnabled ? 'Unlocked' : 'Locked' }}</span>\n      </button>\n\n      <!-- Visible/Hidden -->\n      <button \n        class=\"control-btn\"\n        :class=\"{ active: !visible }\"\n        @click=\"toggleVisibility()\"\n        :title=\"visible ? 'Visible' : 'Hidden'\"\n      >\n        <img \n          :src=\"visible ? require('@/assets/icons/hideCanvas.svg') : require('@/assets/icons/showCanvas.svg')\" \n          alt=\"Visibility\"\n        />\n        <span class=\"tooltip\">{{ visible ? 'Visible' : 'Hidden' }}</span>\n      </button>\n\n      <!-- Snap -->\n      <button \n        class=\"control-btn\"\n        :class=\"{ active: snap }\"\n        @click=\"toggleSnap()\"\n        :disabled=\"!visible\"\n        :title=\"snap ? 'Snap On' : 'Snap Off'\"\n      >\n        <img \n          :src=\"snap ? require('@/assets/icons/snapOn.svg') : require('@/assets/icons/snapOff.svg')\" \n          alt=\"Snap\"\n        />\n        <span class=\"tooltip\">{{ snap ? 'Snap On' : 'Snap Off' }}</span>\n      </button>\n\n      <!-- Reset -->\n      <button \n        class=\"control-btn\"\n        @click=\"resetTransformation()\"\n        :disabled=\"transformationResetDisabled || !visible\"\n        title=\"Reset Canvas\"\n      >\n        <img src=\"@/assets/icons/reset.svg\" alt=\"Reset\" />\n        <span class=\"tooltip\">Reset Canvas</span>\n      </button>\n    </div>\n  </draggable-window>\n</template>\n\n<script>\nimport { reactive } from \"vue\";\nimport * as THREE from \"three\";\nimport { TransformControls } from \"./transformControls.js\";\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader.js\";\nimport { scene, renderer, camera, vm } from \"../App.vue\";\nimport DraggableWindow from \"./DraggableWindow.vue\";\n// import { generateMatcap } from \"./matcaps.js\";\n\n    export let canvas, controls, currentShape;\n    export let shapes = reactive([]); // List of all shapes managed by this component\n\n    let canvasMirror;\n    let geometry = new THREE.PlaneGeometry(5, 5);\n    let headGeometry;\n\n    export default {\n    name: \"Canvas\",\n    components: { DraggableWindow },\n    data() {\n        return {\n        window: window,\n        material: new THREE.MeshToonMaterial({\n            color: 0xe6edf5,\n            transparent: true,\n            opacity: 0.8,\n            side: THREE.DoubleSide,\n            polygonOffset: true,\n            polygonOffsetFactor: 2.5,\n            polygonOffsetUnits: -1,\n            emissive: new THREE.Color(\"rgb(255,255,255)\"),\n            emissiveIntensity: 0.3,\n        }),\n        startPosition: new THREE.Vector3(0.001, 0.001, 0.001),\n        startQuaternion: new THREE.Quaternion(0.001, 0.001, 0.001, 1),\n        startScale: new THREE.Vector3(1, 1, 1),\n        transformationResetDisabled: true,\n        transformationEnabled: true,\n        visible: true,\n        mode: \"combined\",\n        snap: false,\n        };\n    },\n    props: {\n        selectedShape: [String, Object], // Allow object for custom model selection\n        selectedTool: String,\n        mirror: [Boolean, String],\n        mouse: Object,\n        reopenTrigger: Number,\n        isOpen: Boolean,\n        initialX: Number,\n        initialY: Number,\n    },\n    emits: [\"selected-canvas-shape\", \"set-tool-enabled\", \"visibility-change\", \"close\"],\n    methods: {\n        getPosition() {\n        return { \n            x: this.$refs.win.currentX, \n            y: this.$refs.win.currentY \n        };\n        },\n        loadCustomModel(payload) {\n        let url, id;\n        if (typeof payload === 'object' && payload.url) {\n             url = payload.url;\n             id = payload.id;\n        } else {\n             url = payload;\n        }\n\n        if (!url) return;\n        const loader = new GLTFLoader();\n        loader.load(url, (gltf) => {\n            const model = gltf.scene;\n            \n            if (id) {\n                model.userData.customId = id;\n                model.name = \"Custom Model \" + id.substr(-4);\n            } else {\n                model.name = \"Custom Model\";\n            }\n\n            const box = new THREE.Box3().setFromObject(model);\n            const center = box.getCenter(new THREE.Vector3());\n            model.position.sub(center); \n            \n            scene.add(model);\n            shapes.push(model);\n            \n            this.selectObject(model);\n            renderer.render(scene, camera);\n        });\n        },\n        addPrimitive(type) {\n            let geo;\n            const mat = this.material.clone(); // Independent material\n            mat.visible = true;\n            mat.opacity = 0.8; \n\n            switch (type) {\n                case \"plane\":\n                    geo = new THREE.PlaneGeometry(5, 5);\n                    break;\n                case \"cube\":\n                    geo = new THREE.BoxGeometry(5, 5, 5);\n                    break;\n                case \"cylinder\":\n                    geo = new THREE.CylinderGeometry(2.5, 2.5, 5, 15);\n                    break;\n                case \"sphere\":\n                    geo = new THREE.SphereGeometry(2.5, 15, 15);\n                    break;\n                default:\n                    return;\n            }\n\n            const mesh = new THREE.Mesh(geo, mat);\n            mesh.name = type.charAt(0).toUpperCase() + type.slice(1);\n            \n            scene.add(mesh);\n            shapes.push(mesh);\n            this.selectObject(mesh);\n        },\n        addShape(mesh) {\n            // Apply Canvas Material\n            const mat = this.material.clone();\n            mat.visible = true;\n            mat.opacity = 0.8;\n            mesh.material = mat;\n            \n            // Ensure unique name\n            if (!mesh.name) mesh.name = \"Shape \" + Date.now();\n            \n            scene.add(mesh);\n            shapes.push(mesh);\n            this.selectObject(mesh);\n            renderer.render(scene, camera);\n        },\n        selectObject(object) {\n            if (!object) return;\n            \n            // Update the exported 'canvas' reference\n            // Note: Since 'canvas' is a 'let', we can reassign it.\n            // Check if controls are already attached to this object\n            if (controls.object === object) return;\n\n            controls.detach();\n            canvas = object;\n            controls.attach(canvas);\n            \n            // Update UI state if needed (e.g., reset button)\n            this.transformationResetDisabled = false; // Assume loaded models might be transformed eventually\n            \n            renderer.render(scene, camera);\n        },\n        setUp() {\n        const material = this.material;\n        canvas = new THREE.Mesh(geometry, material);\n        scene.add(canvas);\n        shapes.push(canvas);\n\n        controls = new TransformControls(camera, renderer.domElement);\n        controls.mode = \"combined\";\n        controls.addEventListener(\"change\", () => {\n            if (vm != undefined) {\n            vm.$refs.raycastCanvas.transformationResetDisabled = false;\n            }\n\n            if (canvasMirror !== undefined) {\n            var position = new THREE.Vector3();\n            canvas.getWorldPosition(position);\n            var quaternion = new THREE.Quaternion();\n            canvas.getWorldQuaternion(quaternion);\n            var scale = new THREE.Vector3();\n            canvas.getWorldScale(scale);\n            switch (vm.$refs.raycastCanvas.mirror) {\n                case \"x\":\n                canvasMirror.position.set(-position.x, position.y, position.z);\n                canvasMirror.quaternion.set(\n                    -quaternion.x,\n                    quaternion.y,\n                    quaternion.z,\n                    -quaternion.w\n                );\n                canvasMirror.scale.set(-scale.x, scale.y, scale.z);\n                canvasMirror.matrixWorldNeedsUpdate = true;\n                break;\n                case \"y\":\n                canvasMirror.position.set(position.x, -position.y, position.z);\n                canvasMirror.quaternion.set(\n                    quaternion.x,\n                    -quaternion.y,\n                    quaternion.z,\n                    -quaternion.w\n                );\n                canvasMirror.scale.set(scale.x, -scale.y, scale.z);\n                canvasMirror.matrixWorldNeedsUpdate = true;\n                break;\n                case \"z\":\n                canvasMirror.position.set(position.x, position.y, -position.z);\n                canvasMirror.quaternion.set(\n                    quaternion.x,\n                    quaternion.y,\n                    -quaternion.z,\n                    -quaternion.w\n                );\n                canvasMirror.scale.set(scale.x, scale.y, -scale.z);\n                canvasMirror.matrixWorldNeedsUpdate = true;\n                break;\n                default:\n                return;\n            }\n            }\n            renderer.render(scene, camera);\n        });\n        controls.enabled = true;\n        scene.add(controls);\n        controls.attach(canvas);\n        \n        // Add click listener for selection\n        // We'll attach to the renderer domElement or window.\n        // vm (App.vue) handles generic input, but let's add specific logic here.\n        renderer.domElement.addEventListener('pointerdown', this.onPointerDown);\n        \n        renderer.render(scene, camera);\n        },\n        onPointerDown(event) {\n            if (!this.visible || !this.transformationEnabled) return;\n            // Only select if tool is 'draw' or maybe always allowed if Gizmo is visible?\n            // User request implies selection for \"shapes\".\n            // If tool is 'draw', 'canvas' window is visible.\n            // We should check if we clicked on a shape.\n            \n            const rect = renderer.domElement.getBoundingClientRect();\n            const mouse = new THREE.Vector2();\n            mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;\n            mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;\n\n            const raycaster = new THREE.Raycaster();\n            raycaster.setFromCamera(mouse, camera);\n\n            // Raycast against all shapes\n            // Note: GLB models are Groups. Raycaster intersects meshes (recursive: true).\n            // We need to find which 'shape' (root object in shapes array) was hit.\n            const intersects = raycaster.intersectObjects(shapes, true);\n\n            if (intersects.length > 0) {\n                // Find the root shape that contains the intersected object\n                const hitObject = intersects[0].object;\n                let rootShape = null;\n                \n                // Climb up parents until we find an object in 'shapes'\n                let curr = hitObject;\n                while (curr) {\n                    if (shapes.includes(curr)) {\n                        rootShape = curr;\n                        break;\n                    }\n                    curr = curr.parent;\n                }\n\n                if (rootShape) {\n                    this.selectObject(rootShape);\n                }\n            }\n        },\n    resetTransformation() {\n      canvas.position.set(\n        this.startPosition.x,\n        this.startPosition.y,\n        this.startPosition.z\n      );\n      canvas.quaternion.set(\n        this.startQuaternion.x,\n        this.startQuaternion.y,\n        this.startQuaternion.z,\n        this.startQuaternion.w\n      );\n      canvas.scale.set(this.startScale.x, this.startScale.y, this.startScale.z);\n      renderer.render(scene, camera);\n      this.transformationResetDisabled = true;\n    },\n    toggleTransformMode() {\n      if (this.mode === \"combined\") {\n        this.mode = \"scale\";\n        controls.mode = \"scale\";\n        renderer.render(scene, camera);\n      } else {\n        this.mode = \"combined\";\n        controls.mode = \"combined\";\n        renderer.render(scene, camera);\n      }\n    },\n    toggleControls() {\n      if (controls.visible === true) {\n        this.transformationEnabled = false;\n        controls.enabled = false;\n        controls.visible = false;\n        renderer.render(scene, camera);\n      } else {\n        this.transformationEnabled = true;\n        controls.enabled = true;\n        controls.visible = true;\n        renderer.render(scene, camera);\n      }\n    },\n    toggleVisibility() {\n      if (canvas.visible === true) {\n        this.visible = false;\n        this.$emit('visibility-change', false);\n\n        if (this.transformationEnabled === true) {\n          controls.visible = false;\n        }\n\n        if (controls.enabled === true) {\n          controls.enabled = false;\n        }\n\n        canvas.visible = false;\n        renderer.render(scene, camera);\n      } else {\n        this.visible = true;\n        this.$emit('visibility-change', true);\n\n        if (this.transformationEnabled === true) {\n          controls.visible = true;\n        }\n\n        if (controls.enabled === false && this.transformationEnabled === true) {\n          controls.enabled = true;\n        }\n\n        canvas.visible = true;\n\n        renderer.render(scene, camera);\n      }\n    },\n    toggleSnap() {\n      if (this.snap === true) {\n        this.snap = !this.snap;\n        controls.translationSnap = null;\n        controls.rotationSnap = null;\n      } else {\n        this.snap = !this.snap;\n        controls.translationSnap = 1 / 3;\n        controls.rotationSnap = Math.PI / 6;\n      }\n    },\n    setUpMirror(val) {\n      switch (val) {\n        case \"x\":\n          canvasMirror = canvas.clone();\n          canvasMirror.applyMatrix4(canvas.matrixWorld.makeScale(-1, 1, 1));\n          scene.add(canvasMirror);\n          renderer.render(scene, camera);\n          break;\n        case \"y\":\n          break;\n        case \"z\":\n          break;\n        default:\n          break;\n      }\n    },\n    removeMirror() {\n      scene.remove(canvasMirror);\n    },\n    setMaterial(type) {\n         let newMat;\n         if (type === 'standard') {\n             newMat = new THREE.MeshToonMaterial({\n                color: 0xe6edf5,\n                transparent: true,\n                opacity: 0.8,\n                side: THREE.DoubleSide,\n                polygonOffset: true,\n                polygonOffsetFactor: 2.5,\n                polygonOffsetUnits: -1,\n                emissive: new THREE.Color(\"rgb(255,255,255)\"),\n                emissiveIntensity: 0.3,\n            });\n         } else {\n             let texture;\n             if (type.startsWith('blob:') || type.startsWith('http')) {\n                 texture = new THREE.TextureLoader().load(type);\n                 \n                 newMat = new THREE.MeshMatcapMaterial({\n                     matcap: texture,\n                     transparent: true,\n                     opacity: 0.9,\n                     side: THREE.DoubleSide\n                 });\n             } else {\n                 return;\n             }\n         }\n         \n         this.material = newMat;\n         \n         // Update existing shapes\n         shapes.forEach(shape => {\n             if (shape.isMesh) {\n                 shape.material = newMat; \n             } else if (shape.isGroup) {\n                 shape.traverse(child => {\n                     if (child.isMesh) child.material = newMat;\n                 });\n             }\n         });\n         \n         if (canvas && canvas.isMesh) canvas.material = newMat;\n         renderer.render(scene, camera);\n    },\n  },\n  watch: {\n    opacity: function (val) {\n      this.material.opacity = val;\n      if (val == 0) {\n        this.material.visible = false;\n      } else {\n        this.material.visible = true;\n      }\n      renderer.render(scene, camera);\n    },\n\n    selectedShape: function (val) {\n      if (!val) return;\n      if (val === 'custom') return; // Custom models are handled via loadCustomModel\n\n      // Handle custom model selection by ID\n      if (typeof val === 'object' && val.customId) {\n          const found = shapes.find(s => s.userData && s.userData.customId === val.customId);\n          if (found) {\n              this.selectObject(found);\n          }\n          return;\n      }\n\n      // If the current canvas is a Group (from GLB), we must replace it with a Mesh\n      // to allow applying primitive geometries.\n      if (!canvas.isMesh) {\n          // Keep reference to position/rotation/scale if we want to preserve them?\n          // For now, let's keep them.\n          const oldPos = canvas.position.clone();\n          const oldQuat = canvas.quaternion.clone();\n          const oldScale = canvas.scale.clone();\n          \n          // Remove from scene and shapes list\n          scene.remove(canvas);\n          const idx = shapes.indexOf(canvas);\n          if (idx !== -1) shapes.splice(idx, 1);\n          controls.detach();\n          \n          // Create new Mesh\n          canvas = new THREE.Mesh(new THREE.PlaneGeometry(1, 1), this.material);\n          canvas.position.copy(oldPos);\n          canvas.quaternion.copy(oldQuat);\n          canvas.scale.copy(oldScale);\n          \n          scene.add(canvas);\n          shapes.push(canvas);\n          controls.attach(canvas);\n      }\n\n      switch (val) {\n        case \"plane\":\n          if (canvas.geometry) canvas.geometry.dispose();\n          canvas.geometry = new THREE.PlaneGeometry(5, 5);\n          break;\n        case \"cube\":\n          if (canvas.geometry) canvas.geometry.dispose();\n          canvas.geometry = new THREE.BoxGeometry(5, 5, 5);\n          break;\n        case \"cylinder\":\n           if (canvas.geometry) canvas.geometry.dispose();\n          canvas.geometry = new THREE.CylinderGeometry(2.5, 2.5, 5, 15);\n          break;\n        case \"sphere\":\n           if (canvas.geometry) canvas.geometry.dispose();\n          canvas.geometry = new THREE.SphereGeometry(2.5, 15, 15);\n          break;\n        case \"head\":\n          if (canvas.geometry) canvas.geometry.dispose();\n          if (headGeometry === undefined) {\n            const loader = new GLTFLoader();\n            loader.load(\"/asaro.glb\", function (gltf) {\n              headGeometry = gltf.scene.children[0].geometry;\n              // Check if canvas is still valid/same\n              if (canvas.geometry) canvas.geometry.dispose();\n              canvas.geometry = headGeometry;\n              canvas.geometry.needsUpdate = true;\n              renderer.render(scene, camera);\n            });\n          } else {\n            canvas.geometry = headGeometry;\n            canvas.geometry.needsUpdate = true;\n            renderer.render(scene, camera);\n          }\n          break;\n        default:\n          break;\n      }\n      \n      if (canvas.geometry) canvas.geometry.needsUpdate = true;\n      renderer.render(scene, camera);\n    },\n\n    mirror: function (val) {\n      if (val === false) {\n        this.removeMirror();\n      } else {\n        this.setUpMirror(val);\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.canvas-controls {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  position: relative;\n}\n\n.separator {\n  width: 1px;\n  height: 32px;\n  background-color: rgba(255, 255, 255, 0.1);\n  margin: 0 4px;\n}\n\n.control-btn {\n  position: relative;\n  width: 40px;\n  height: 40px;\n  background: transparent;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 8px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s;\n  padding: 0;\n}\n\n.control-btn:hover:not(:disabled) {\n  background: rgba(255, 255, 255, 0.1);\n  border-color: rgba(255, 255, 255, 0.2);\n}\n\n.control-btn:disabled {\n  opacity: 0.3;\n  cursor: not-allowed;\n}\n\n.control-btn.active {\n  background: rgba(255, 255, 255, 0.2);\n  border-color: rgba(255, 255, 255, 0.3);\n  box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.1);\n}\n\n.control-btn img {\n  width: 24px;\n  height: 24px;\n  filter: brightness(0) invert(1);\n}\n\n/* Tooltip */\n.tooltip {\n  position: absolute;\n  bottom: -32px;\n  left: 50%;\n  transform: translateX(-50%);\n  background: rgba(0, 0, 0, 0.9);\n  color: white;\n  padding: 4px 8px;\n  border-radius: 4px;\n  font-size: 11px;\n  white-space: nowrap;\n  pointer-events: none;\n  opacity: 0;\n  transition: opacity 0.2s;\n  z-index: 1000;\n}\n\n.control-btn:hover .tooltip {\n  opacity: 1;\n}\n\n/* Arrow for tooltip */\n.tooltip::before {\n  content: '';\n  position: absolute;\n  top: -4px;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 0;\n  height: 0;\n  border-left: 4px solid transparent;\n  border-right: 4px solid transparent;\n  border-bottom: 4px solid rgba(0, 0, 0, 0.9);\n}\n\n/* Shape Dropdown */\n.shape-dropdown {\n  position: absolute;\n  top: 48px;\n  left: 0;\n  display: flex;\n  gap: 4px;\n  background: rgba(30, 30, 30, 0.95);\n  backdrop-filter: blur(16px);\n  padding: 8px;\n  border-radius: 8px;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  z-index: 100;\n}\n\n.shape-option {\n  position: relative;\n  width: 40px;\n  height: 40px;\n  background: rgba(255, 255, 255, 0.05);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 6px;\n  padding: 0;\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  transition: all 0.2s;\n}\n\n.shape-option:hover {\n  background: rgba(255, 255, 255, 0.15);\n}\n\n.shape-option img {\n  width: 24px;\n  height: 24px;\n}\n</style>","import {\n    BoxGeometry,\n    BufferGeometry,\n    CylinderGeometry,\n    DoubleSide,\n    Euler,\n    Float32BufferAttribute,\n    Line,\n    LineBasicMaterial,\n    Matrix4,\n    Mesh,\n    MeshBasicMaterial,\n    Object3D,\n    OctahedronGeometry,\n    PlaneGeometry,\n    Quaternion,\n    Raycaster,\n    RingGeometry,\n    // SphereGeometry,\n    TorusGeometry,\n    Vector3,\n} from 'three';\n\nconst _raycaster = new Raycaster();\n\nconst _tempVector = new Vector3();\nconst _tempVector2 = new Vector3();\nconst _tempQuaternion = new Quaternion();\nconst _unit = {\n    X: new Vector3(1, 0, 0),\n    Y: new Vector3(0, 1, 0),\n    Z: new Vector3(0, 0, 1)\n};\n\nconst _changeEvent = { type: 'change' };\nconst _mouseDownEvent = { type: 'mouseDown' };\nconst _mouseUpEvent = { type: 'mouseUp', mode: null };\nconst _objectChangeEvent = { type: 'objectChange' };\n\nclass TransformControls extends Object3D {\n\n    constructor(camera, domElement) {\n\n        super();\n\n        if (domElement === undefined) {\n\n            console.warn('THREE.TransformControls: The second parameter \"domElement\" is now mandatory.');\n            domElement = document;\n\n        }\n\n        this.visible = false;\n        this.domElement = domElement;\n        this.domElement.style.touchAction = 'none'; // disable touch scroll\n\n        const _gizmo = new TransformControlsGizmo();\n        this._gizmo = _gizmo;\n        this.add(_gizmo);\n\n        const _plane = new TransformControlsPlane();\n        this._plane = _plane;\n        this.add(_plane);\n\n        const scope = this;\n\n        // Defined getter, setter and store for a property\n        function defineProperty(propName, defaultValue) {\n\n            let propValue = defaultValue;\n\n            Object.defineProperty(scope, propName, {\n\n                get: function () {\n\n                    return propValue !== undefined ? propValue : defaultValue;\n\n                },\n\n                set: function (value) {\n\n                    if (propValue !== value) {\n\n                        propValue = value;\n                        _plane[propName] = value;\n                        _gizmo[propName] = value;\n\n                        scope.dispatchEvent({ type: propName + '-changed', value: value });\n                        scope.dispatchEvent(_changeEvent);\n\n                    }\n\n                }\n\n            });\n\n            scope[propName] = defaultValue;\n            _plane[propName] = defaultValue;\n            _gizmo[propName] = defaultValue;\n\n        }\n\n        // Define properties with getters/setter\n        // Setting the defined property will automatically trigger change event\n        // Defined properties are passed down to gizmo and plane\n\n        defineProperty('camera', camera);\n        defineProperty('object', undefined);\n        defineProperty('enabled', true);\n        defineProperty('axis', null);\n        defineProperty('mode', 'translate');\n        defineProperty('translationSnap', null);\n        defineProperty('rotationSnap', null);\n        defineProperty('scaleSnap', null);\n        defineProperty('space', 'world');\n        defineProperty('size', 1);\n        defineProperty('dragging', false);\n        defineProperty('showX', true);\n        defineProperty('showY', true);\n        defineProperty('showZ', true);\n\n        // Reusable utility variables\n\n        const worldPosition = new Vector3();\n        const worldPositionStart = new Vector3();\n        const worldQuaternion = new Quaternion();\n        const worldQuaternionStart = new Quaternion();\n        const cameraPosition = new Vector3();\n        const cameraQuaternion = new Quaternion();\n        const pointStart = new Vector3();\n        const pointEnd = new Vector3();\n        const rotationAxis = new Vector3();\n        const rotationAngle = 0;\n        const eye = new Vector3();\n\n        // TODO: remove properties unused in plane and gizmo\n\n        defineProperty('worldPosition', worldPosition);\n        defineProperty('worldPositionStart', worldPositionStart);\n        defineProperty('worldQuaternion', worldQuaternion);\n        defineProperty('worldQuaternionStart', worldQuaternionStart);\n        defineProperty('cameraPosition', cameraPosition);\n        defineProperty('cameraQuaternion', cameraQuaternion);\n        defineProperty('pointStart', pointStart);\n        defineProperty('pointEnd', pointEnd);\n        defineProperty('rotationAxis', rotationAxis);\n        defineProperty('rotationAngle', rotationAngle);\n        defineProperty('eye', eye);\n\n        this._offset = new Vector3();\n        this._startNorm = new Vector3();\n        this._endNorm = new Vector3();\n        this._cameraScale = new Vector3();\n\n        this._parentPosition = new Vector3();\n        this._parentQuaternion = new Quaternion();\n        this._parentQuaternionInv = new Quaternion();\n        this._parentScale = new Vector3();\n\n        this._worldScaleStart = new Vector3();\n        this._worldQuaternionInv = new Quaternion();\n        this._worldScale = new Vector3();\n\n        this._positionStart = new Vector3();\n        this._quaternionStart = new Quaternion();\n        this._scaleStart = new Vector3();\n\n        this._getPointer = getPointer.bind(this);\n        this._onPointerDown = onPointerDown.bind(this);\n        this._onPointerHover = onPointerHover.bind(this);\n        this._onPointerMove = onPointerMove.bind(this);\n        this._onPointerUp = onPointerUp.bind(this);\n\n        this.domElement.addEventListener('pointerdown', this._onPointerDown);\n        this.domElement.addEventListener('pointermove', this._onPointerHover);\n        this.domElement.ownerDocument.addEventListener('pointerup', this._onPointerUp);\n\n    }\n\n    // updateMatrixWorld  updates key transformation variables\n    updateMatrixWorld() {\n\n        if (this.object !== undefined) {\n\n            this.object.updateMatrixWorld();\n\n            if (this.object.parent === null) {\n\n                console.error('TransformControls: The attached 3D object must be a part of the scene graph.');\n\n            } else {\n\n                this.object.parent.matrixWorld.decompose(this._parentPosition, this._parentQuaternion, this._parentScale);\n\n            }\n\n            this.object.matrixWorld.decompose(this.worldPosition, this.worldQuaternion, this._worldScale);\n\n            this._parentQuaternionInv.copy(this._parentQuaternion).invert();\n            this._worldQuaternionInv.copy(this.worldQuaternion).invert();\n\n        }\n\n        this.camera.updateMatrixWorld();\n        this.camera.matrixWorld.decompose(this.cameraPosition, this.cameraQuaternion, this._cameraScale);\n\n        this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize();\n\n        super.updateMatrixWorld(this);\n\n    }\n\n    pointerHover(pointer) {\n\n        if (this.object === undefined || this.dragging === true) return;\n\n        _raycaster.setFromCamera(pointer, this.camera);\n\n        const intersect = intersectObjectWithRay(this._gizmo.picker[this.mode], _raycaster);\n\n        if (intersect) {\n\n            this.axis = intersect.object.name;\n\n        } else {\n\n            this.axis = null;\n\n        }\n\n    }\n\n    pointerDown(pointer) {\n\n        if (this.object === undefined || this.dragging === true || pointer.button !== 0) return;\n\n        if (this.axis !== null) {\n\n            _raycaster.setFromCamera(pointer, this.camera);\n\n            const planeIntersect = intersectObjectWithRay(this._plane, _raycaster, true);\n\n            if (planeIntersect) {\n\n                let space = this.space;\n\n                if (this.mode === 'scale') {\n\n                    space = 'local';\n\n                } else if (this.axis === 'E' || this.axis === 'XYZE' || this.axis === 'XYZ') {\n\n                    space = 'world';\n\n                }\n\n                if (space === 'local' && this.mode === 'rotate') {\n\n                    const snap = this.rotationSnap;\n\n                    if (this.axis === 'X' && snap) this.object.rotation.x = Math.round(this.object.rotation.x / snap) * snap;\n                    if (this.axis === 'Y' && snap) this.object.rotation.y = Math.round(this.object.rotation.y / snap) * snap;\n                    if (this.axis === 'Z' && snap) this.object.rotation.z = Math.round(this.object.rotation.z / snap) * snap;\n\n                }\n\n                this.object.updateMatrixWorld();\n                this.object.parent.updateMatrixWorld();\n\n                this._positionStart.copy(this.object.position);\n                this._quaternionStart.copy(this.object.quaternion);\n                this._scaleStart.copy(this.object.scale);\n\n                this.object.matrixWorld.decompose(this.worldPositionStart, this.worldQuaternionStart, this._worldScaleStart);\n\n                this.pointStart.copy(planeIntersect.point).sub(this.worldPositionStart);\n\n            }\n\n            this.dragging = true;\n            _mouseDownEvent.mode = this.mode;\n            this.dispatchEvent(_mouseDownEvent);\n\n        }\n\n    }\n\n    pointerMove(pointer) {\n\n        let axis = this.axis;\n        let mode = this.mode;\n        const object = this.object;\n        let space = this.space;\n\n        switch (axis) {\n            case \"XT\":\n                axis = \"X\";\n                mode = \"translate\"\n                break;\n            case \"XR\":\n                axis = \"Y\";\n                mode = \"rotate\"\n                break;\n            case \"YT\":\n                axis = \"Y\";\n                mode = \"translate\"\n                break;\n            case \"YR\":\n                axis = \"Z\";\n                mode = \"rotate\"\n                break;\n            case \"ZT\":\n                axis = \"Z\";\n                mode = \"translate\"\n                break;\n            case \"ZR\":\n                axis = \"X\";\n                mode = \"rotate\"\n                break;\n            case \"XYZ\":\n                axis = \"XYZ\";\n                mode = \"translate\"\n                break;\n            default:\n                break;\n        }\n\n        if (mode === 'scale') {\n\n            space = 'local';\n\n        } else if (axis === 'E' || axis === 'XYZE' || axis === 'XYZ') {\n\n            space = 'world';\n\n        }\n\n        if (object === undefined || axis === null || this.dragging === false || pointer.button !== - 1) return;\n\n        _raycaster.setFromCamera(pointer, this.camera);\n\n        const planeIntersect = intersectObjectWithRay(this._plane, _raycaster, true);\n\n        if (!planeIntersect) return;\n\n        this.pointEnd.copy(planeIntersect.point).sub(this.worldPositionStart);\n\n        if (mode === 'translate') {\n\n            // Apply translate\n\n            this._offset.copy(this.pointEnd).sub(this.pointStart);\n\n            if (space === 'local' && axis !== 'XYZ') {\n\n                this._offset.applyQuaternion(this._worldQuaternionInv);\n\n            }\n\n            if (axis.indexOf('X') === - 1) this._offset.x = 0;\n            if (axis.indexOf('Y') === - 1) this._offset.y = 0;\n            if (axis.indexOf('Z') === - 1) this._offset.z = 0;\n\n            if (space === 'local' && axis !== 'XYZ') {\n\n                this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale);\n\n            } else {\n\n                this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale);\n\n            }\n\n            object.position.copy(this._offset).add(this._positionStart);\n\n            // Apply translation snap\n\n            if (this.translationSnap) {\n\n                if (space === 'local') {\n\n                    object.position.applyQuaternion(_tempQuaternion.copy(this._quaternionStart).invert());\n\n                    if (axis.search('X') !== - 1) {\n\n                        object.position.x = Math.round(object.position.x / this.translationSnap) * this.translationSnap;\n\n                    }\n\n                    if (axis.search('Y') !== - 1) {\n\n                        object.position.y = Math.round(object.position.y / this.translationSnap) * this.translationSnap;\n\n                    }\n\n                    if (axis.search('Z') !== - 1) {\n\n                        object.position.z = Math.round(object.position.z / this.translationSnap) * this.translationSnap;\n\n                    }\n\n                    object.position.applyQuaternion(this._quaternionStart);\n\n                }\n\n                if (space === 'world') {\n\n                    if (object.parent) {\n\n                        object.position.add(_tempVector.setFromMatrixPosition(object.parent.matrixWorld));\n\n                    }\n\n                    if (axis.search('X') !== - 1) {\n\n                        object.position.x = Math.round(object.position.x / this.translationSnap) * this.translationSnap;\n\n                    }\n\n                    if (axis.search('Y') !== - 1) {\n\n                        object.position.y = Math.round(object.position.y / this.translationSnap) * this.translationSnap;\n\n                    }\n\n                    if (axis.search('Z') !== - 1) {\n\n                        object.position.z = Math.round(object.position.z / this.translationSnap) * this.translationSnap;\n\n                    }\n\n                    if (object.parent) {\n\n                        object.position.sub(_tempVector.setFromMatrixPosition(object.parent.matrixWorld));\n\n                    }\n\n                }\n\n            }\n\n        } else if (mode === 'scale') {\n\n            if (axis.search('XYZ') !== - 1) {\n\n                let d = this.pointEnd.length() / this.pointStart.length();\n\n                if (this.pointEnd.dot(this.pointStart) < 0) d *= - 1;\n\n                _tempVector2.set(d, d, d);\n\n            } else {\n\n                _tempVector.copy(this.pointStart);\n                _tempVector2.copy(this.pointEnd);\n\n                _tempVector.applyQuaternion(this._worldQuaternionInv);\n                _tempVector2.applyQuaternion(this._worldQuaternionInv);\n\n                _tempVector2.divide(_tempVector);\n\n                if (axis.search('X') === - 1) {\n\n                    _tempVector2.x = 1;\n\n                }\n\n                if (axis.search('Y') === - 1) {\n\n                    _tempVector2.y = 1;\n\n                }\n\n                if (axis.search('Z') === - 1) {\n\n                    _tempVector2.z = 1;\n\n                }\n\n            }\n\n            // Apply scale\n\n            object.scale.copy(this._scaleStart).multiply(_tempVector2);\n\n            if (this.scaleSnap) {\n\n                if (axis.search('X') !== - 1) {\n\n                    object.scale.x = Math.round(object.scale.x / this.scaleSnap) * this.scaleSnap || this.scaleSnap;\n\n                }\n\n                if (axis.search('Y') !== - 1) {\n\n                    object.scale.y = Math.round(object.scale.y / this.scaleSnap) * this.scaleSnap || this.scaleSnap;\n\n                }\n\n                if (axis.search('Z') !== - 1) {\n\n                    object.scale.z = Math.round(object.scale.z / this.scaleSnap) * this.scaleSnap || this.scaleSnap;\n\n                }\n\n            }\n\n        } else if (mode === 'rotate') {\n\n            this._offset.copy(this.pointEnd).sub(this.pointStart);\n\n            const ROTATION_SPEED = 20 / this.worldPosition.distanceTo(_tempVector.setFromMatrixPosition(this.camera.matrixWorld));\n\n            if (axis === 'E') {\n\n                this.rotationAxis.copy(this.eye);\n                this.rotationAngle = this.pointEnd.angleTo(this.pointStart);\n\n                this._startNorm.copy(this.pointStart).normalize();\n                this._endNorm.copy(this.pointEnd).normalize();\n\n                this.rotationAngle *= (this._endNorm.cross(this._startNorm).dot(this.eye) < 0 ? 1 : - 1);\n\n            } else if (axis === 'XYZE') {\n\n                this.rotationAxis.copy(this._offset).cross(this.eye).normalize();\n                this.rotationAngle = this._offset.dot(_tempVector.copy(this.rotationAxis).cross(this.eye)) * ROTATION_SPEED;\n\n            } else if (axis === 'X' || axis === 'Y' || axis === 'Z') {\n\n                this.rotationAxis.copy(_unit[axis]);\n\n                _tempVector.copy(_unit[axis]);\n\n                if (space === 'local') {\n\n                    _tempVector.applyQuaternion(this.worldQuaternion);\n\n                }\n\n                this.rotationAngle = this._offset.dot(_tempVector.cross(this.eye).normalize()) * ROTATION_SPEED;\n\n            }\n\n            // Apply rotation snap\n\n            if (this.rotationSnap) this.rotationAngle = Math.round(this.rotationAngle / this.rotationSnap) * this.rotationSnap;\n\n            // Apply rotate\n            if (space === 'local' && axis !== 'E' && axis !== 'XYZE') {\n\n                object.quaternion.copy(this._quaternionStart);\n                object.quaternion.multiply(_tempQuaternion.setFromAxisAngle(this.rotationAxis, this.rotationAngle)).normalize();\n\n            } else {\n\n                this.rotationAxis.applyQuaternion(this._parentQuaternionInv);\n                object.quaternion.copy(_tempQuaternion.setFromAxisAngle(this.rotationAxis, this.rotationAngle));\n                object.quaternion.multiply(this._quaternionStart).normalize();\n\n            }\n\n        }\n\n        this.dispatchEvent(_changeEvent);\n        this.dispatchEvent(_objectChangeEvent);\n\n    }\n\n    pointerUp(pointer) {\n\n        if (pointer.button !== 0) return;\n\n        if (this.dragging && (this.axis !== null)) {\n\n            _mouseUpEvent.mode = this.mode;\n            this.dispatchEvent(_mouseUpEvent);\n\n        }\n\n        this.dragging = false;\n        this.axis = null;\n\n    }\n\n    dispose() {\n\n        this.domElement.removeEventListener('pointerdown', this._onPointerDown);\n        this.domElement.removeEventListener('pointermove', this._onPointerHover);\n        this.domElement.ownerDocument.removeEventListener('pointermove', this._onPointerMove);\n        this.domElement.ownerDocument.removeEventListener('pointerup', this._onPointerUp);\n\n        this.traverse(function (child) {\n\n            if (child.geometry) child.geometry.dispose();\n            if (child.material) child.material.dispose();\n\n        });\n\n    }\n\n    // Set current object\n    attach(object) {\n\n        this.object = object;\n        this.visible = true;\n\n        return this;\n\n    }\n\n    // Detatch from object\n    detach() {\n\n        this.object = undefined;\n        this.visible = false;\n        this.axis = null;\n\n        return this;\n\n    }\n\n    // TODO: deprecate\n\n    getMode() {\n\n        return this.mode;\n\n    }\n\n    setMode(mode) {\n\n        this.mode = mode;\n\n    }\n\n    setTranslationSnap(translationSnap) {\n\n        this.translationSnap = translationSnap;\n\n    }\n\n    setRotationSnap(rotationSnap) {\n\n        this.rotationSnap = rotationSnap;\n\n    }\n\n    setScaleSnap(scaleSnap) {\n\n        this.scaleSnap = scaleSnap;\n\n    }\n\n    setSize(size) {\n\n        this.size = size;\n\n    }\n\n    setSpace(space) {\n\n        this.space = space;\n\n    }\n\n    update() {\n\n        console.warn('THREE.TransformControls: update function has no more functionality and therefore has been deprecated.');\n\n    }\n\n}\n\nTransformControls.prototype.isTransformControls = true;\n\n// mouse / touch event handlers\n\nfunction getPointer(event) {\n\n    if (this.domElement.ownerDocument.pointerLockElement) {\n\n        return {\n            x: 0,\n            y: 0,\n            button: event.button\n        };\n\n    } else {\n\n        const rect = this.domElement.getBoundingClientRect();\n\n        return {\n            x: (event.clientX - rect.left) / rect.width * 2 - 1,\n            y: - (event.clientY - rect.top) / rect.height * 2 + 1,\n            button: event.button\n        };\n\n    }\n\n}\n\nfunction onPointerHover(event) {\n\n    if (!this.enabled) return;\n\n    switch (event.pointerType) {\n\n        case 'mouse':\n        case 'pen':\n            this.pointerHover(this._getPointer(event));\n            break;\n\n    }\n\n}\n\nfunction onPointerDown(event) {\n\n    if (!this.enabled) return;\n\n    this.domElement.ownerDocument.addEventListener('pointermove', this._onPointerMove);\n\n    this.pointerHover(this._getPointer(event));\n    this.pointerDown(this._getPointer(event));\n\n}\n\nfunction onPointerMove(event) {\n\n    if (!this.enabled) return;\n\n    this.pointerMove(this._getPointer(event));\n\n}\n\nfunction onPointerUp(event) {\n\n    if (!this.enabled) return;\n\n    this.domElement.ownerDocument.removeEventListener('pointermove', this._onPointerMove);\n\n    this.pointerUp(this._getPointer(event));\n\n}\n\nfunction intersectObjectWithRay(object, raycaster, includeInvisible) {\n\n    const allIntersections = raycaster.intersectObject(object, true);\n\n    for (let i = 0; i < allIntersections.length; i++) {\n\n        if (allIntersections[i].object.visible || includeInvisible) {\n\n            return allIntersections[i];\n\n        }\n\n    }\n\n    return false;\n\n}\n\n//\n\n// Reusable utility variables\n\nconst _tempEuler = new Euler();\nconst _alignVector = new Vector3(0, 1, 0);\nconst _zeroVector = new Vector3(0, 0, 0);\nconst _lookAtMatrix = new Matrix4();\nconst _tempQuaternion2 = new Quaternion();\nconst _identityQuaternion = new Quaternion();\nconst _dirVector = new Vector3();\nconst _tempMatrix = new Matrix4();\n\nconst _unitX = new Vector3(1, 0, 0);\nconst _unitY = new Vector3(0, 1, 0);\nconst _unitZ = new Vector3(0, 0, 1);\n\nconst _v1 = new Vector3();\nconst _v2 = new Vector3();\nconst _v3 = new Vector3();\n\nclass TransformControlsGizmo extends Object3D {\n\n    constructor() {\n\n        super();\n\n        this.type = 'TransformControlsGizmo';\n\n        // shared materials\n\n        const gizmoMaterial = new MeshBasicMaterial({\n            depthTest: false,\n            depthWrite: false,\n            fog: false,\n            toneMapped: false,\n            transparent: true\n        });\n\n        const gizmoLineMaterial = new LineBasicMaterial({\n            depthTest: false,\n            depthWrite: false,\n            fog: false,\n            toneMapped: false,\n            transparent: true\n        });\n\n        // Make unique material for each axis/color\n\n        const matInvisible = gizmoMaterial.clone();\n        matInvisible.opacity = 0.15;\n\n        const matHelper = gizmoLineMaterial.clone();\n        matHelper.opacity = 1;\n        matHelper.color.setHex(0xFFD880);\n\n        const matRed = gizmoMaterial.clone();\n        matRed.color.setHex(0xFF8080);\n        matRed.side = DoubleSide;\n\n        const matRedArrow = gizmoMaterial.clone();\n        matRedArrow.color.setHex(0xFF8080);\n\n        const matGreen = gizmoMaterial.clone();\n        matGreen.color.setHex(0x80FFC9);\n        matGreen.side = DoubleSide;\n\n        const matGreenArrow = gizmoMaterial.clone();\n        matGreenArrow.color.setHex(0x80FFC9);\n\n        const matBlue = gizmoMaterial.clone();\n        matBlue.color.setHex(0x809CFF);\n        matBlue.side = DoubleSide;\n\n        const matBlueArrow = gizmoMaterial.clone();\n        matBlueArrow.color.setHex(0x809CFF);\n\n        const matRedTransparent = gizmoMaterial.clone();\n        matRedTransparent.color.setHex(0xFF8080);\n        matRedTransparent.opacity = 0.5;\n        matRedTransparent.name = \"matRedTransparent\";\n\n        const matGreenTransparent = gizmoMaterial.clone();\n        matGreenTransparent.color.setHex(0x80FFC9);\n        matGreenTransparent.opacity = 0.5;\n\n        const matBlueTransparent = gizmoMaterial.clone();\n        matBlueTransparent.color.setHex(0x809CFF);\n        matBlueTransparent.opacity = 0.5;\n\n        const matWhiteTransparent = gizmoMaterial.clone();\n        matWhiteTransparent.opacity = 0.25;\n\n        const matYellowTransparent = gizmoMaterial.clone();\n        matYellowTransparent.color.setHex(0xFFD880);\n        matYellowTransparent.opacity = 0.5;\n\n        const matYellow = gizmoMaterial.clone();\n        matYellow.color.setHex(0xFFD880);\n\n        const matGray = gizmoMaterial.clone();\n        matGray.color.setHex(0x787878);\n\n        // reusable geometry\n\n        const arrowGeometry = new CylinderGeometry(0, 0.055, 0.125, 12);\n        arrowGeometry.translate(0, 0.05, 0);\n\n        const arrowPickerGeometry = new CylinderGeometry(0.02, 0.06, 0.15, 12);\n        arrowPickerGeometry.translate(0, 0.05, 0);\n\n        const scaleHandleGeometry = new BoxGeometry(0.08, 0.08, 0.08);\n        scaleHandleGeometry.translate(0, 0.04, 0);\n\n        const lineGeometry = new BufferGeometry();\n        lineGeometry.setAttribute('position', new Float32BufferAttribute([0, 0, 0, 1, 0, 0], 3));\n\n        const lineGeometry2 = new CylinderGeometry(0.0075, 0.0075, 0.5, 3);\n        lineGeometry2.translate(0, 0.25, 0);\n\n        function CircleGeometry(radius) {\n            const geometry = new RingGeometry(radius + 0.01, radius + 0.1, 10, 10, 0.5, Math.PI / 2 - 1);\n            geometry.rotateY(Math.PI / 2);\n            geometry.rotateX(Math.PI / 2);\n            return geometry;\n        }\n\n        // Special geometry for transform helper. If scaled with position vector it spans from [0,0,0] to position\n\n        function TranslateHelperGeometry() {\n\n            const geometry = new BufferGeometry();\n\n            geometry.setAttribute('position', new Float32BufferAttribute([0, 0, 0, 1, 1, 1], 3));\n\n            return geometry;\n\n        }\n\n        // Gizmo definitions - custom hierarchy definitions for setupGizmo() function\n\n        const gizmoTranslate = {\n            X: [\n                [new Mesh(arrowGeometry, matRed), [0.5, 0, 0], [0, 0, - Math.PI / 2]],\n                // [new Mesh(arrowGeometry, matRed), [- 0.5, 0, 0], [0, 0, Math.PI / 2]],\n                // [new Mesh(lineGeometry2, matRed), [0, 0, 0], [0, 0, - Math.PI / 2]]\n            ],\n            Y: [\n                [new Mesh(arrowGeometry, matGreen), [0, 0.5, 0]],\n                // [new Mesh(arrowGeometry, matGreen), [0, - 0.5, 0], [Math.PI, 0, 0]],\n                // [new Mesh(lineGeometry2, matGreen)]\n            ],\n            Z: [\n                [new Mesh(arrowGeometry, matBlue), [0, 0, 0.5], [Math.PI / 2, 0, 0]],\n                // [new Mesh(arrowGeometry, matBlue), [0, 0, - 0.5], [- Math.PI / 2, 0, 0]],\n                // [new Mesh(lineGeometry2, matBlue), null, [Math.PI / 2, 0, 0]]\n            ],\n            // XYZ: [\n            //     [new Mesh(new OctahedronGeometry(0.1, 0), matWhiteTransparent.clone()), [0, 0, 0]]\n            // ],\n            // XY: [\n            //     [new Mesh(new BoxGeometry(0.15, 0.15, 0.01), matBlueTransparent.clone()), [0.15, 0.15, 0]]\n            // ],\n            // YZ: [\n            //     [new Mesh(new BoxGeometry(0.15, 0.15, 0.01), matRedTransparent.clone()), [0, 0.15, 0.15], [0, Math.PI / 2, 0]]\n            // ],\n            // XZ: [\n            //     [new Mesh(new BoxGeometry(0.15, 0.15, 0.01), matGreenTransparent.clone()), [0.15, 0, 0.15], [- Math.PI / 2, 0, 0]]\n            // ]\n        };\n\n        const pickerTranslate = {\n            X: [\n                [new Mesh(new CylinderGeometry(0.2, 0, 0.6, 4), matInvisible), [0.3, 0, 0], [0, 0, - Math.PI / 2]],\n                [new Mesh(new CylinderGeometry(0.2, 0, 0.6, 4), matInvisible), [- 0.3, 0, 0], [0, 0, Math.PI / 2]]\n            ],\n            Y: [\n                [new Mesh(new CylinderGeometry(0.2, 0, 0.6, 4), matInvisible), [0, 0.3, 0]],\n                [new Mesh(new CylinderGeometry(0.2, 0, 0.6, 4), matInvisible), [0, - 0.3, 0], [0, 0, Math.PI]]\n            ],\n            Z: [\n                [new Mesh(new CylinderGeometry(0.2, 0, 0.6, 4), matInvisible), [0, 0, 0.3], [Math.PI / 2, 0, 0]],\n                [new Mesh(new CylinderGeometry(0.2, 0, 0.6, 4), matInvisible), [0, 0, - 0.3], [- Math.PI / 2, 0, 0]]\n            ],\n            // XYZ: [\n            //     [new Mesh(new OctahedronGeometry(0.2, 0), matInvisible)]\n            // ],\n            // XY: [\n            //     [new Mesh(new BoxGeometry(0.2, 0.2, 0.01), matInvisible), [0.15, 0.15, 0]]\n            // ],\n            // YZ: [\n            //     [new Mesh(new BoxGeometry(0.2, 0.2, 0.01), matInvisible), [0, 0.15, 0.15], [0, Math.PI / 2, 0]]\n            // ],\n            // XZ: [\n            //     [new Mesh(new BoxGeometry(0.2, 0.2, 0.01), matInvisible), [0.15, 0, 0.15], [- Math.PI / 2, 0, 0]]\n            // ]\n        };\n\n        const helperTranslate = {\n            START: [\n                [new Mesh(new OctahedronGeometry(0.01, 2), matHelper), null, null, null, 'helper']\n            ],\n            END: [\n                [new Mesh(new OctahedronGeometry(0.01, 2), matHelper), null, null, null, 'helper']\n            ],\n            DELTA: [\n                [new Line(TranslateHelperGeometry(), matHelper), null, null, null, 'helper']\n            ],\n            X: [\n                [new Line(lineGeometry, matHelper.clone()), [- 1e3, 0, 0], null, [1e6, 1, 1], 'helper']\n            ],\n            Y: [\n                [new Line(lineGeometry, matHelper.clone()), [0, - 1e3, 0], [0, 0, Math.PI / 2], [1e6, 1, 1], 'helper']\n            ],\n            Z: [\n                [new Line(lineGeometry, matHelper.clone()), [0, 0, - 1e3], [0, - Math.PI / 2, 0], [1e6, 1, 1], 'helper']\n            ]\n        };\n\n        const gizmoRotate = {\n            // XYZE: [\n            //     [new Mesh(CircleGeometry(0.5, 1), matGray), null, [0, Math.PI / 2, 0]]\n            // ],\n            X: [\n                [new Mesh(CircleGeometry(0.5, 0.5), matRed)]\n            ],\n            Y: [\n                [new Mesh(CircleGeometry(0.5, 0.5), matGreen), null, [0, 0, - Math.PI / 2]]\n            ],\n            Z: [\n                [new Mesh(CircleGeometry(0.5, 0.5), matBlue), null, [0, Math.PI / 2, 0]]\n            ],\n            // E: [\n            //     [new Mesh(CircleGeometry(0.75, 1), matYellowTransparent), null, [0, Math.PI / 2, 0]]\n            // ]\n        };\n\n        const helperRotate = {\n            AXIS: [\n                [new Line(lineGeometry, matHelper.clone()), [- 1e3, 0, 0], null, [1e6, 1, 1], 'helper']\n            ]\n        };\n\n        const pickerRotate = {\n            // XYZE: [\n            //     [new Mesh(new SphereGeometry(0.25, 10, 8), matInvisible)]\n            // ],\n            X: [\n                [new Mesh(new TorusGeometry(0.5, 0.1, 4, 24), matInvisible), [0, 0, 0], [0, - Math.PI / 2, - Math.PI / 2]],\n            ],\n            Y: [\n                [new Mesh(new TorusGeometry(0.5, 0.1, 4, 24), matInvisible), [0, 0, 0], [Math.PI / 2, 0, 0]],\n            ],\n            Z: [\n                [new Mesh(new TorusGeometry(0.5, 0.1, 4, 24), matInvisible), [0, 0, 0], [0, 0, - Math.PI / 2]],\n            ],\n            // E: [\n            //     [new Mesh(new TorusGeometry(0.75, 0.1, 2, 24), matInvisible)]\n            // ]\n        };\n\n        const gizmoScale = {\n            X: [\n                [new Mesh(scaleHandleGeometry, matRed), [0.5, 0, 0], [0, 0, - Math.PI / 2]],\n                [new Mesh(lineGeometry2, matRed), [0, 0, 0], [0, 0, - Math.PI / 2]],\n                [new Mesh(scaleHandleGeometry, matRed), [- 0.5, 0, 0], [0, 0, Math.PI / 2]],\n            ],\n            Y: [\n                [new Mesh(scaleHandleGeometry, matGreen), [0, 0.5, 0]],\n                [new Mesh(lineGeometry2, matGreen)],\n                [new Mesh(scaleHandleGeometry, matGreen), [0, - 0.5, 0], [0, 0, Math.PI]],\n            ],\n            Z: [\n                [new Mesh(scaleHandleGeometry, matBlue), [0, 0, 0.5], [Math.PI / 2, 0, 0]],\n                [new Mesh(lineGeometry2, matBlue), [0, 0, 0], [Math.PI / 2, 0, 0]],\n                [new Mesh(scaleHandleGeometry, matBlue), [0, 0, - 0.5], [- Math.PI / 2, 0, 0]]\n            ],\n            XY: [\n                [new Mesh(new BoxGeometry(0.15, 0.15, 0.01), matBlueTransparent), [0.15, 0.15, 0]]\n            ],\n            YZ: [\n                [new Mesh(new BoxGeometry(0.15, 0.15, 0.01), matRedTransparent), [0, 0.15, 0.15], [0, Math.PI / 2, 0]]\n            ],\n            XZ: [\n                [new Mesh(new BoxGeometry(0.15, 0.15, 0.01), matGreenTransparent), [0.15, 0, 0.15], [- Math.PI / 2, 0, 0]]\n            ],\n            XYZ: [\n                [new Mesh(new BoxGeometry(0.1, 0.1, 0.1), matWhiteTransparent.clone())],\n            ]\n        };\n\n        const pickerScale = {\n            X: [\n                [new Mesh(new CylinderGeometry(0.2, 0, 0.6, 4), matInvisible), [0.3, 0, 0], [0, 0, - Math.PI / 2]],\n                [new Mesh(new CylinderGeometry(0.2, 0, 0.6, 4), matInvisible), [- 0.3, 0, 0], [0, 0, Math.PI / 2]]\n            ],\n            Y: [\n                [new Mesh(new CylinderGeometry(0.2, 0, 0.6, 4), matInvisible), [0, 0.3, 0]],\n                [new Mesh(new CylinderGeometry(0.2, 0, 0.6, 4), matInvisible), [0, - 0.3, 0], [0, 0, Math.PI]]\n            ],\n            Z: [\n                [new Mesh(new CylinderGeometry(0.2, 0, 0.6, 4), matInvisible), [0, 0, 0.3], [Math.PI / 2, 0, 0]],\n                [new Mesh(new CylinderGeometry(0.2, 0, 0.6, 4), matInvisible), [0, 0, - 0.3], [- Math.PI / 2, 0, 0]]\n            ],\n            XY: [\n                [new Mesh(new BoxGeometry(0.2, 0.2, 0.01), matInvisible), [0.15, 0.15, 0]],\n            ],\n            YZ: [\n                [new Mesh(new BoxGeometry(0.2, 0.2, 0.01), matInvisible), [0, 0.15, 0.15], [0, Math.PI / 2, 0]],\n            ],\n            XZ: [\n                [new Mesh(new BoxGeometry(0.2, 0.2, 0.01), matInvisible), [0.15, 0, 0.15], [- Math.PI / 2, 0, 0]],\n            ],\n            XYZ: [\n                [new Mesh(new BoxGeometry(0.2, 0.2, 0.2), matInvisible), [0, 0, 0]],\n            ]\n        };\n\n        const helperScale = {\n            X: [\n                [new Line(lineGeometry, matHelper.clone()), [- 1e3, 0, 0], null, [1e6, 1, 1], 'helper']\n            ],\n            Y: [\n                [new Line(lineGeometry, matHelper.clone()), [0, - 1e3, 0], [0, 0, Math.PI / 2], [1e6, 1, 1], 'helper']\n            ],\n            Z: [\n                [new Line(lineGeometry, matHelper.clone()), [0, 0, - 1e3], [0, - Math.PI / 2, 0], [1e6, 1, 1], 'helper']\n            ]\n        };\n\n        const gizmoCombined = {\n            XT: [\n                [new Mesh(arrowGeometry, matRedArrow), [0.2, 0, 0], [0, 0, - Math.PI / 2]],\n            ],\n            XR: [\n                [new Mesh(CircleGeometry(0.15, 0.5), matRed), null, [0, Math.PI / 2, Math.PI / 2]],\n            ],\n            YT: [\n                [new Mesh(arrowGeometry, matGreenArrow), [0, 0.2, 0]],\n            ],\n            YR: [\n                [new Mesh(CircleGeometry(0.15, 0.5), matGreen), null, [Math.PI / 2, Math.PI, Math.PI / 2]],\n            ],\n            ZT: [[new Mesh(arrowGeometry, matBlueArrow), [0, 0, 0.2], [Math.PI / 2, 0, 0]]\n            ],\n            ZR: [[new Mesh(CircleGeometry(0.15, 0.5), matBlue), null, [0, 0, 0]],\n            ],\n            XYZ: [\n                [new Mesh(new OctahedronGeometry(0.07, 0), matYellowTransparent.clone()), [0, 0, 0]]\n            ],\n        }\n\n        const pickerCombined = gizmoCombined;\n\n        const helperCombined = {\n            START: [\n                [new Mesh(new OctahedronGeometry(0.01, 2), matHelper), null, null, null, 'helper']\n            ],\n            END: [\n                [new Mesh(new OctahedronGeometry(0.01, 2), matHelper), null, null, null, 'helper']\n            ],\n            DELTA: [\n                [new Line(TranslateHelperGeometry(), matHelper), null, null, null, 'helper']\n            ],\n            XT: [\n                [new Line(lineGeometry, matHelper.clone()), [- 1e3, 0, 0], null, [1e6, 1, 1], 'helper']\n            ],\n            YT: [\n                [new Line(lineGeometry, matHelper.clone()), [0, - 1e3, 0], [0, 0, Math.PI / 2], [1e6, 1, 1], 'helper']\n            ],\n            ZT: [\n                [new Line(lineGeometry, matHelper.clone()), [0, 0, - 1e3], [0, - Math.PI / 2, 0], [1e6, 1, 1], 'helper']\n            ],\n        }\n\n        // Creates an Object3D with gizmos described in custom hierarchy definition.\n\n        function setupGizmo(gizmoMap) {\n\n            const gizmo = new Object3D();\n            // gizmo.renderOrder = 1000;\n\n            for (const name in gizmoMap) {\n\n                for (let i = gizmoMap[name].length; i--;) {\n\n                    const object = gizmoMap[name][i][0].clone();\n                    const position = gizmoMap[name][i][1];\n                    const rotation = gizmoMap[name][i][2];\n                    const scale = gizmoMap[name][i][3];\n                    const tag = gizmoMap[name][i][4];\n\n                    // name and tag properties are essential for picking and updating logic.\n                    object.name = name;\n                    object.tag = tag;\n\n                    if (position) {\n                        object.position.set(position[0], position[1], position[2]);\n                    }\n\n                    if (rotation) {\n                        object.rotation.set(rotation[0], rotation[1], rotation[2]);\n                    }\n\n                    if (scale) {\n                        object.scale.set(scale[0], scale[1], scale[2]);\n                    }\n\n                    object.updateMatrix();\n\n                    const tempGeometry = object.geometry.clone();\n                    tempGeometry.applyMatrix4(object.matrix);\n                    object.geometry = tempGeometry;\n                    // object.renderOrder = Infinity;\n\n                    object.position.set(0, 0, 0);\n                    object.rotation.set(0, 0, 0);\n                    object.scale.set(1, 1, 1);\n\n                    gizmo.add(object);\n\n                }\n\n            }\n\n            return gizmo;\n\n        }\n\n        // Gizmo creation\n\n        this.gizmo = {};\n        this.picker = {};\n        this.helper = {};\n\n        this.add(this.gizmo['translate'] = setupGizmo(gizmoTranslate));\n        this.add(this.gizmo['rotate'] = setupGizmo(gizmoRotate));\n        this.add(this.gizmo['scale'] = setupGizmo(gizmoScale));\n        this.add(this.picker['translate'] = setupGizmo(pickerTranslate));\n        this.add(this.picker['rotate'] = setupGizmo(pickerRotate));\n        this.add(this.picker['scale'] = setupGizmo(pickerScale));\n        this.add(this.helper['translate'] = setupGizmo(helperTranslate));\n        this.add(this.helper['rotate'] = setupGizmo(helperRotate));\n        this.add(this.helper['scale'] = setupGizmo(helperScale));\n\n        this.add(this.gizmo['combined'] = setupGizmo(gizmoCombined));\n        this.add(this.picker['combined'] = setupGizmo(pickerCombined));\n        this.add(this.helper['combined'] = setupGizmo(helperCombined));\n\n        // Pickers should be hidden always\n\n        this.picker['translate'].visible = false;\n        this.picker['rotate'].visible = false;\n        this.picker['scale'].visible = false;\n        this.picker['combined'].visible = false;\n\n    }\n\n    // updateMatrixWorld will update transformations and appearance of individual handles\n\n    updateMatrixWorld(force) {\n\n        const space = (this.mode === 'scale') ? 'local' : this.space; // scale always oriented to local rotation\n\n        const quaternion = (space === 'local') ? this.worldQuaternion : _identityQuaternion;\n\n        // Show only gizmos for current transform mode\n\n        this.gizmo['translate'].visible = this.mode === 'translate';\n        this.gizmo['rotate'].visible = this.mode === 'rotate';\n        this.gizmo['scale'].visible = this.mode === 'scale';\n        this.gizmo['combined'].visible = this.mode === 'combined';\n\n        this.helper['translate'].visible = this.mode === 'translate';\n        this.helper['rotate'].visible = this.mode === 'rotate';\n        this.helper['scale'].visible = this.mode === 'scale';\n        this.helper['combined'].visible = this.mode === 'combined';\n\n\n        let handles = [];\n        handles = handles.concat(this.picker[this.mode].children);\n        handles = handles.concat(this.gizmo[this.mode].children);\n        handles = handles.concat(this.helper[this.mode].children);\n\n        for (let i = 0; i < handles.length; i++) {\n\n            const handle = handles[i];\n\n            // hide aligned to camera\n\n            handle.visible = true;\n            handle.renderOrder = 10000;\n            handle.rotation.set(0, 0, 0);\n            handle.position.copy(this.worldPosition);\n\n            let factor;\n\n            if (this.camera.isOrthographicCamera) {\n\n                factor = (this.camera.top - this.camera.bottom) / this.camera.zoom;\n\n            } else {\n\n                factor = this.worldPosition.distanceTo(this.cameraPosition) * Math.min(1.9 * Math.tan(Math.PI * this.camera.fov / 360) / this.camera.zoom, 7);\n\n            }\n\n            handle.scale.set(1, 1, 1).multiplyScalar(factor * this.size / 4);\n\n            // TODO: simplify helpers and consider decoupling from gizmo\n\n            if (handle.tag === 'helper') {\n\n                handle.visible = false;\n\n                if (handle.name === 'AXIS') {\n\n                    handle.position.copy(this.worldPositionStart);\n                    handle.visible = !!this.axis;\n\n                    if (this.axis === 'X') {\n\n                        _tempQuaternion.setFromEuler(_tempEuler.set(0, 0, 0));\n                        handle.quaternion.copy(quaternion).multiply(_tempQuaternion);\n\n                        if (Math.abs(_alignVector.copy(_unitX).applyQuaternion(quaternion).dot(this.eye)) > 0.9) {\n\n                            handle.visible = false;\n\n                        }\n\n                    }\n\n                    if (this.axis === 'Y') {\n\n                        _tempQuaternion.setFromEuler(_tempEuler.set(0, 0, Math.PI / 2));\n                        handle.quaternion.copy(quaternion).multiply(_tempQuaternion);\n\n                        if (Math.abs(_alignVector.copy(_unitY).applyQuaternion(quaternion).dot(this.eye)) > 0.9) {\n\n                            handle.visible = false;\n\n                        }\n\n                    }\n\n                    if (this.axis === 'Z') {\n\n                        _tempQuaternion.setFromEuler(_tempEuler.set(0, Math.PI / 2, 0));\n                        handle.quaternion.copy(quaternion).multiply(_tempQuaternion);\n\n                        if (Math.abs(_alignVector.copy(_unitZ).applyQuaternion(quaternion).dot(this.eye)) > 0.9) {\n\n                            handle.visible = false;\n\n                        }\n\n                    }\n\n                    if (this.axis === 'XYZE') {\n\n                        _tempQuaternion.setFromEuler(_tempEuler.set(0, Math.PI / 2, 0));\n                        _alignVector.copy(this.rotationAxis);\n                        handle.quaternion.setFromRotationMatrix(_lookAtMatrix.lookAt(_zeroVector, _alignVector, _unitY));\n                        handle.quaternion.multiply(_tempQuaternion);\n                        handle.visible = this.dragging;\n\n                    }\n\n                    if (this.axis === 'E') {\n\n                        handle.visible = false;\n\n                    }\n\n\n                } else if (handle.name === 'START') {\n\n                    handle.position.copy(this.worldPositionStart);\n                    handle.visible = this.dragging;\n\n                } else if (handle.name === 'END') {\n\n                    handle.position.copy(this.worldPosition);\n                    handle.visible = this.dragging;\n\n                } else if (handle.name === 'DELTA') {\n\n                    handle.position.copy(this.worldPositionStart);\n                    handle.quaternion.copy(this.worldQuaternionStart);\n                    _tempVector.set(1e-10, 1e-10, 1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(- 1);\n                    _tempVector.applyQuaternion(this.worldQuaternionStart.clone().invert());\n                    handle.scale.copy(_tempVector);\n                    handle.visible = this.dragging;\n\n                } else {\n\n                    handle.quaternion.copy(quaternion);\n\n                    if (this.dragging) {\n\n                        handle.position.copy(this.worldPositionStart);\n\n                    } else {\n\n                        handle.position.copy(this.worldPosition);\n\n                    }\n\n                    if (this.axis) {\n\n                        handle.visible = this.axis.search(handle.name) !== - 1;\n\n                    }\n\n                }\n\n                // If updating helper, skip rest of the loop\n                continue;\n\n            }\n\n            // Align handles to current local or world rotation\n\n            handle.quaternion.copy(quaternion);\n\n            if (this.mode === 'translate' || this.mode === 'scale' || this.mode === 'combined') {\n\n                // Hide translate and scale axis facing the camera\n\n                const AXIS_FLIP_TRESHOLD = 0.2;\n                const PLANE_HIDE_TRESHOLD = 0.2;\n\n                if (handle.name === 'XT' || handle.name === 'XR') {\n\n                    if (Math.abs(_alignVector.copy(_unitX).applyQuaternion(quaternion).dot(this.eye)) > AXIS_FLIP_TRESHOLD) {\n\n                        // handle.scale.set(1e-10, 1e-10, 1e-10);\n                        // handle.scale.set(-handle.scale.x,handle.scale.y,handle.scale.z);\n                        // handle.visible = false;\n                        handle.renderOrder = 10001\n\n                    }\n\n                }\n\n                if (handle.name === 'YT' || handle.name === 'YR') {\n\n                    if (Math.abs(_alignVector.copy(_unitY).applyQuaternion(quaternion).dot(this.eye)) > AXIS_FLIP_TRESHOLD) {\n\n                        // handle.scale.set(1e-10, 1e-10, 1e-10);\n                        // handle.visible = false;\n                        //handle.scale.set(handle.scale.x,-handle.scale.y,handle.scale.z);\n                        handle.renderOrder = 10001\n\n                    }\n\n                }\n\n                if (handle.name === 'ZT' || handle.name === 'ZR') {\n\n                    if (Math.abs(_alignVector.copy(_unitZ).applyQuaternion(quaternion).dot(this.eye)) > AXIS_FLIP_TRESHOLD) {\n\n                        // handle.scale.set(1e-10, 1e-10, 1e-10);\n                        // handle.visible = false;\n                        //handle.scale.set(handle.scale.x,handle.scale.y,-handle.scale.z);\n                        handle.renderOrder = 10001\n\n                    }\n\n                }\n\n                if (handle.name === 'XY') {\n\n                    if (Math.abs(_alignVector.copy(_unitZ).applyQuaternion(quaternion).dot(this.eye)) < PLANE_HIDE_TRESHOLD) {\n\n                        handle.scale.set(1e-10, 1e-10, 1e-10);\n                        handle.visible = false;\n\n                    }\n\n                }\n\n                if (handle.name === 'YZ') {\n\n                    if (Math.abs(_alignVector.copy(_unitX).applyQuaternion(quaternion).dot(this.eye)) < PLANE_HIDE_TRESHOLD) {\n\n                        handle.scale.set(1e-10, 1e-10, 1e-10);\n                        handle.visible = false;\n\n                    }\n\n                }\n\n                if (handle.name === 'XZ') {\n\n                    if (Math.abs(_alignVector.copy(_unitY).applyQuaternion(quaternion).dot(this.eye)) < PLANE_HIDE_TRESHOLD) {\n\n                        handle.scale.set(1e-10, 1e-10, 1e-10);\n                        handle.visible = false;\n\n                    }\n\n                }\n\n            } else if (this.mode === 'rotate') {\n\n                // Align handles to current local or world rotation\n\n                _tempQuaternion2.copy(quaternion);\n                _alignVector.copy(this.eye).applyQuaternion(_tempQuaternion.copy(quaternion).invert());\n\n                if (handle.name.search('E') !== - 1) {\n\n                    handle.quaternion.setFromRotationMatrix(_lookAtMatrix.lookAt(this.eye, _zeroVector, _unitY));\n\n                }\n\n                if (handle.name === 'X') {\n\n                    _tempQuaternion.setFromAxisAngle(_unitX, Math.atan2(- _alignVector.y, _alignVector.z));\n                    _tempQuaternion.multiplyQuaternions(_tempQuaternion2, _tempQuaternion);\n                    handle.quaternion.copy(_tempQuaternion);\n\n                }\n\n                if (handle.name === 'Y') {\n\n                    _tempQuaternion.setFromAxisAngle(_unitY, Math.atan2(_alignVector.x, _alignVector.z));\n                    _tempQuaternion.multiplyQuaternions(_tempQuaternion2, _tempQuaternion);\n                    handle.quaternion.copy(_tempQuaternion);\n\n                }\n\n                if (handle.name === 'Z') {\n\n                    _tempQuaternion.setFromAxisAngle(_unitZ, Math.atan2(_alignVector.y, _alignVector.x));\n                    _tempQuaternion.multiplyQuaternions(_tempQuaternion2, _tempQuaternion);\n                    handle.quaternion.copy(_tempQuaternion);\n\n                }\n\n            }\n\n            // Hide disabled axes\n            handle.visible = handle.visible && (handle.name.indexOf('X') === - 1 || this.showX);\n            handle.visible = handle.visible && (handle.name.indexOf('Y') === - 1 || this.showY);\n            handle.visible = handle.visible && (handle.name.indexOf('Z') === - 1 || this.showZ);\n            handle.visible = handle.visible && (handle.name.indexOf('E') === - 1 || (this.showX && this.showY && this.showZ));\n\n            // highlight selected axis\n            handle.material._color = handle.material._color || handle.material.color.clone();\n            handle.material._opacity = handle.material._opacity || handle.material.opacity;\n\n            handle.material.color.copy(handle.material._color);\n            handle.material.opacity = handle.material._opacity;\n\n            if (this.enabled && this.axis) {\n\n                if (handle.name === this.axis) {\n\n                    handle.material.color.setHex(0xFFD880);\n                    handle.material.opacity = 1;\n                }\n\n                // else if (this.axis.split('').some(function (a) {\n\n                //     return handle.name === a;\n\n                // })) {\n\n                //     handle.material.color.setHex(0xffff00);\n                //     handle.material.opacity = 1.0;\n\n                // }\n\n            }\n\n        }\n\n        super.updateMatrixWorld(force);\n\n    }\n\n}\n\nTransformControlsGizmo.prototype.isTransformControlsGizmo = true;\n\n//\n\nclass TransformControlsPlane extends Mesh {\n\n    constructor() {\n\n        super(\n            new PlaneGeometry(100000, 100000, 2, 2),\n            new MeshBasicMaterial({ visible: false, wireframe: true, side: DoubleSide, transparent: true, opacity: 0.1, toneMapped: false })\n        );\n\n        this.type = 'TransformControlsPlane';\n\n    }\n\n    updateMatrixWorld(force) {\n\n        let space = this.space;\n\n        this.position.copy(this.worldPosition);\n\n        if (this.mode === 'scale') space = 'local'; // scale always oriented to local rotation\n\n        _v1.copy(_unitX).applyQuaternion(space === 'local' ? this.worldQuaternion : _identityQuaternion);\n        _v2.copy(_unitY).applyQuaternion(space === 'local' ? this.worldQuaternion : _identityQuaternion);\n        _v3.copy(_unitZ).applyQuaternion(space === 'local' ? this.worldQuaternion : _identityQuaternion);\n\n        // Align the plane for current transform mode, axis and space.\n\n        _alignVector.copy(_v2);\n\n        switch (this.mode) {\n\n            case 'translate':\n            case 'scale':\n                switch (this.axis) {\n\n                    case 'X':\n                        _alignVector.copy(this.eye).cross(_v1);\n                        _dirVector.copy(_v1).cross(_alignVector);\n                        break;\n                    case 'Y':\n                        _alignVector.copy(this.eye).cross(_v2);\n                        _dirVector.copy(_v2).cross(_alignVector);\n                        break;\n                    case 'Z':\n                        _alignVector.copy(this.eye).cross(_v3);\n                        _dirVector.copy(_v3).cross(_alignVector);\n                        break;\n                    case 'XY':\n                        _dirVector.copy(_v3);\n                        break;\n                    case 'YZ':\n                        _dirVector.copy(_v1);\n                        break;\n                    case 'XZ':\n                        _alignVector.copy(_v3);\n                        _dirVector.copy(_v2);\n                        break;\n                    case 'XYZ':\n                    case 'E':\n                        _dirVector.set(0, 0, 0);\n                        break;\n\n                }\n\n                break;\n            case 'rotate':\n            default:\n                // special case for rotate\n                _dirVector.set(0, 0, 0);\n\n        }\n\n        if (_dirVector.length() === 0) {\n\n            // If in rotate mode, make the plane parallel to camera\n            this.quaternion.copy(this.cameraQuaternion);\n\n        } else {\n\n            _tempMatrix.lookAt(_tempVector.set(0, 0, 0), _dirVector, _alignVector);\n\n            this.quaternion.setFromRotationMatrix(_tempMatrix);\n\n        }\n\n        super.updateMatrixWorld(force);\n\n    }\n\n}\n\nTransformControlsPlane.prototype.isTransformControlsPlane = true;\n\nexport { TransformControls, TransformControlsGizmo, TransformControlsPlane };\n","<template>\r\n  <div\r\n    class=\"draggable-window\"\r\n    :class=\"{ minimized: minimized }\"\r\n    :style=\"{ top: currentY + 'px', left: currentX + 'px' }\"\r\n    v-show=\"visible && !userClosed\"\r\n  >\r\n    <div class=\"window-header\" @mousedown=\"startDrag\" @touchstart=\"startDragTouch\">\r\n      <div class=\"drag-handle\">\r\n        <div class=\"handle-dots\">\r\n          <span></span><span></span><span></span>\r\n        </div>\r\n        <span class=\"title\">{{ title }}</span>\r\n      </div>\r\n      <div class=\"controls\">\r\n        <button \r\n          class=\"control-btn minimize\" \r\n          @click.stop=\"toggleMinimize\" \r\n          @mousedown.stop \r\n          @touchstart.stop\r\n        >\r\n          {{ minimized ? '+' : '' }}\r\n        </button>\r\n        <button \r\n          class=\"control-btn close\" \r\n          @click.stop=\"close\" \r\n          @mousedown.stop \r\n          @touchstart.stop\r\n        >\r\n          \r\n        </button>\r\n      </div>\r\n    </div>\r\n    <div class=\"window-content\" v-show=\"!minimized\" v-bind=\"$attrs\">\r\n      <slot></slot>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"DraggableWindow\",\r\n  inheritAttrs: false,\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      default: \"Window\",\r\n    },\r\n    initialX: {\r\n      type: Number,\r\n      default: 100,\r\n    },\r\n    initialY: {\r\n      type: Number,\r\n      default: 100,\r\n    },\r\n    visible: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    reopenTrigger: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n    startOpen: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    isOpen: {\r\n      type: Boolean,\r\n      default: undefined,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      isDragging: false,\r\n      currentX: this.initialX,\r\n      currentY: this.initialY,\r\n      dragOffsetX: 0,\r\n      dragOffsetY: 0,\r\n      minimized: false,\r\n      userClosed: this.isOpen !== undefined ? !this.isOpen : !this.startOpen,\r\n    };\r\n  },\r\n  methods: {\r\n    startDrag(event) {\r\n      if (event.target.closest('.controls')) return;\r\n      this.isDragging = true;\r\n      this.dragOffsetX = event.clientX - this.currentX;\r\n      this.dragOffsetY = event.clientY - this.currentY;\r\n      document.addEventListener(\"mousemove\", this.onDrag);\r\n      document.addEventListener(\"mouseup\", this.stopDrag);\r\n    },\r\n    onDrag(event) {\r\n      if (this.isDragging) {\r\n        this.currentX = event.clientX - this.dragOffsetX;\r\n        this.currentY = event.clientY - this.dragOffsetY;\r\n      }\r\n    },\r\n    stopDrag() {\r\n      this.isDragging = false;\r\n      document.removeEventListener(\"mousemove\", this.onDrag);\r\n      document.removeEventListener(\"mouseup\", this.stopDrag);\r\n    },\r\n    // Touch support\r\n    startDragTouch(event) {\r\n      if (event.target.closest('.controls')) return;\r\n      const touch = event.touches[0];\r\n      this.isDragging = true;\r\n      this.dragOffsetX = touch.clientX - this.currentX;\r\n      this.dragOffsetY = touch.clientY - this.currentY;\r\n      document.addEventListener(\"touchmove\", this.onDragTouch);\r\n      document.addEventListener(\"touchend\", this.stopDragTouch);\r\n    },\r\n    onDragTouch(event) {\r\n       if (this.isDragging) {\r\n         event.preventDefault(); // Prevent scrolling while dragging\r\n         const touch = event.touches[0];\r\n         this.currentX = touch.clientX - this.dragOffsetX;\r\n         this.currentY = touch.clientY - this.dragOffsetY;\r\n       }\r\n    },\r\n    stopDragTouch() {\r\n       this.isDragging = false;\r\n       document.removeEventListener(\"touchmove\", this.onDragTouch);\r\n       document.removeEventListener(\"touchend\", this.stopDragTouch);\r\n    },\r\n    toggleMinimize() {\r\n      this.minimized = !this.minimized;\r\n    },\r\n    close() {\r\n      this.userClosed = true;\r\n      this.$emit(\"close\");\r\n    },\r\n  },\r\n  watch: {\r\n    reopenTrigger() {\r\n      this.userClosed = false;\r\n    },\r\n    isOpen(val) {\r\n      if (val !== undefined) {\r\n         this.userClosed = !val;\r\n      }\r\n    },\r\n    initialX(val) {\r\n      this.currentX = val;\r\n    },\r\n    initialY(val) {\r\n      this.currentY = val;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.draggable-window {\r\n  position: absolute;\r\n  z-index: 1000;\r\n  background: rgba(30, 30, 30, 0.75);\r\n  backdrop-filter: blur(16px);\r\n  -webkit-backdrop-filter: blur(16px);\r\n  border-radius: 16px;\r\n  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-width: 160px;\r\n  transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);\r\n  /* overflow: hidden; */\r\n  overflow: visible;\r\n  user-select: none;\r\n  font-family: 'Inter', sans-serif;\r\n  color: white;\r\n  pointer-events: auto;\r\n}\r\n\r\n.minimized {\r\n  height: auto !important;\r\n  width: auto !important;\r\n  min-width: auto;\r\n  border-radius: 12px;\r\n}\r\n\r\n.window-header {\r\n  height: 36px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 0 12px;\r\n  cursor: grab;\r\n  background: rgba(255, 255, 255, 0.03);\r\n  border-bottom: 1px solid rgba(255, 255, 255, 0.05);\r\n}\r\n\r\n.window-header:active {\r\n  cursor: grabbing;\r\n}\r\n\r\n.drag-handle {\r\n  display: flex;\r\n  align-items: center;\r\n  flex-grow: 1;\r\n}\r\n\r\n.handle-dots {\r\n  display: flex;\r\n  margin-right: 10px;\r\n  gap: 4px;\r\n}\r\n\r\n.handle-dots span {\r\n  width: 6px;\r\n  height: 6px;\r\n  background-color: rgba(255, 255, 255, 0.2);\r\n  border-radius: 50%;\r\n}\r\n\r\n.title {\r\n  font-size: 12px;\r\n  font-weight: 700;\r\n  text-transform: uppercase;\r\n  letter-spacing: 0.8px;\r\n  color: rgba(255, 255, 255, 0.8);\r\n  pointer-events: none;\r\n}\r\n\r\n.controls {\r\n  display: flex;\r\n  gap: 8px;\r\n}\r\n\r\n.control-btn {\r\n  width: 20px;\r\n  height: 20px;\r\n  border-radius: 50%;\r\n  border: none;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 14px;\r\n  cursor: pointer;\r\n  padding: 0;\r\n  line-height: 1;\r\n  background-color: rgba(255, 255, 255, 0.1);\r\n  color: rgba(255, 255, 255, 0.9);\r\n  transition: all 0.2s;\r\n}\r\n\r\n.control-btn:hover {\r\n  background-color: rgba(255, 255, 255, 0.25);\r\n  transform: scale(1.1);\r\n}\r\n\r\n.control-btn.minimize {\r\n  /* color: transparent; */\r\n}\r\n\r\n/* Traffic light colors style option */\r\n/* \r\n.control-btn.minimize { background-color: #ffbd2e; }\r\n.control-btn.close { background-color: #ff5f57; } \r\n*/\r\n\r\n.window-content {\r\n  padding: 16px;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n</style>\r\n","import { render } from \"./DraggableWindow.vue?vue&type=template&id=0ddda394&scoped=true\"\nimport script from \"./DraggableWindow.vue?vue&type=script&lang=js\"\nexport * from \"./DraggableWindow.vue?vue&type=script&lang=js\"\n\nimport \"./DraggableWindow.vue?vue&type=style&index=0&id=0ddda394&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\UNREAL\\\\Downloads\\\\3d\\\\Original\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0ddda394\"]])\n\nexport default __exports__","import { render } from \"./Canvas.vue?vue&type=template&id=feb6f62c&scoped=true\"\nimport script from \"./Canvas.vue?vue&type=script&lang=js\"\nexport * from \"./Canvas.vue?vue&type=script&lang=js\"\n\nimport \"./Canvas.vue?vue&type=style&index=0&id=feb6f62c&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\UNREAL\\\\Downloads\\\\3d\\\\Original\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-feb6f62c\"]])\n\nexport default __exports__","import * as THREE from \"three\";\nimport { MeshLineRaycast } from \"meshline\";\nimport { scene } from \"../App.vue\";\n\nlet mirror = {\n    updateMirrorOf: function (obj, activeScene, localCanvas) {\n        if (obj.type === \"Group\") {\n            obj.children.forEach((child) => {\n                mirror.updateMirrorOf(child, activeScene, localCanvas);\n            });\n        } else if (obj.userData.mirrors && Array.isArray(obj.userData.mirrors)) {\n            obj.userData.mirrors.forEach(mirrorData => {\n                let mirroredObject = activeScene.getObjectByProperty(\n                    \"uuid\",\n                    mirrorData.uuid\n                );\n                if (!mirroredObject) return;\n\n                const axis = mirrorData.axis;\n\n                if (localCanvas) {\n                    const m = localCanvas.matrixWorld;\n                    const mInv = m.clone().invert();\n                    let sx = 1, sy = 1, sz = 1;\n                    if (axis === \"x\") sx = -1;\n                    else if (axis === \"y\") sy = -1;\n                    else if (axis === \"z\") sz = -1;\n                    const mFlip = new THREE.Matrix4().makeScale(sx, sy, sz);\n                    const transform = m.clone().multiply(mFlip).multiply(mInv);\n\n                    mirroredObject.position.copy(obj.position);\n                    mirroredObject.quaternion.copy(obj.quaternion);\n                    mirroredObject.scale.copy(obj.scale);\n                    mirroredObject.applyMatrix4(transform);\n                } else {\n                    var position = new THREE.Vector3();\n                    obj.getWorldPosition(position);\n                    var quaternion = new THREE.Quaternion();\n                    obj.getWorldQuaternion(quaternion);\n                    var scale = new THREE.Vector3();\n                    obj.getWorldScale(scale);\n\n                    switch (axis) {\n                        case \"x\":\n                            mirroredObject.position.set(-position.x, position.y, position.z);\n                            mirroredObject.quaternion.set(-quaternion.x, quaternion.y, quaternion.z, -quaternion.w);\n                            mirroredObject.scale.set(-scale.x, scale.y, scale.z);\n                            break;\n                        case \"y\":\n                            mirroredObject.position.set(position.x, -position.y, position.z);\n                            mirroredObject.quaternion.set(quaternion.x, -quaternion.y, quaternion.z, -quaternion.w);\n                            mirroredObject.scale.set(scale.x, -scale.y, scale.z);\n                            break;\n                        case \"z\":\n                            mirroredObject.position.set(position.x, position.y, -position.z);\n                            mirroredObject.quaternion.set(quaternion.x, quaternion.y, -quaternion.z, -quaternion.w);\n                            mirroredObject.scale.set(scale.x, scale.y, -scale.z);\n                            break;\n                    }\n                }\n                // Recursive update for nested mirrors (X then Y)\n                mirror.updateMirrorOf(mirroredObject, activeScene, localCanvas);\n            });\n            obj.matrixWorldNeedsUpdate = true;\n        }\n    },\n    object: function (obj, axis, activeScene, localCanvas) {\n        var clone = obj.clone();\n        clone.layers.set(1);\n        clone.raycast = MeshLineRaycast;\n\n        if (!obj.userData.mirrors) obj.userData.mirrors = [];\n        obj.userData.mirrors.push({ uuid: clone.uuid, axis: axis });\n\n        // The clone also needs to know it's a mirror and what axis it came from \n        // to support multi-axis update (A mirrors to B, then B mirrors to D)\n        clone.userData.mirrorParent = obj.uuid;\n        clone.userData.mirrorAxisFromParent = axis;\n\n        if (localCanvas) {\n            const m = localCanvas.matrixWorld;\n            const mInv = m.clone().invert();\n            let sx = 1, sy = 1, sz = 1;\n            if (axis === \"x\") sx = -1;\n            else if (axis === \"y\") sy = -1;\n            else if (axis === \"z\") sz = -1;\n            const mFlip = new THREE.Matrix4().makeScale(sx, sy, sz);\n            const transform = m.clone().multiply(mFlip).multiply(mInv);\n            clone.applyMatrix4(transform);\n        } else {\n            const mFlip = new THREE.Matrix4().makeScale(\n                axis === \"x\" ? -1 : 1,\n                axis === \"y\" ? -1 : 1,\n                axis === \"z\" ? -1 : 1\n            );\n            clone.applyMatrix4(mFlip);\n        }\n        activeScene.add(clone);\n        return clone;\n    },\n    eraseMirrorOf: function (obj) {\n        if (obj.userData.mirrors) {\n            obj.userData.mirrors.forEach(m => {\n                let mirroredObject = scene.getObjectByProperty(\"uuid\", m.uuid);\n                if (mirroredObject) {\n                    mirror.eraseMirrorOf(mirroredObject);\n                    scene.remove(mirroredObject);\n                }\n            });\n        }\n    },\n};\n\nexport { mirror };","\n<template>\n  <draggable-window title=\"History\" :initialX=\"12\" :initialY=\"window.innerHeight - 100\" :reopenTrigger=\"reopenTrigger\" :start-open=\"startOpen\" :is-open=\"isOpen\" @close=\"$emit('close')\">\n    <div class=\"history-controls\">\n      <button @click=\"undo\" :disabled=\"undoDisabled\">\n        <img src=\"@/assets/icons/undo.svg\" alt=\"undo\" />\n      </button>\n      <button @click=\"redo\" :disabled=\"redoDisabled\">\n        <img src=\"@/assets/icons/redo.svg\" alt=\"redo\" />\n      </button>\n    </div>\n  </draggable-window>\n</template>\n\n<script>\nimport UndoManager from \"undo-manager\";\nimport DraggableWindow from \"./DraggableWindow.vue\";\n\nexport let undoManager = new UndoManager();\nexport let undoRedoComponent;\n\nexport default {\n  name: \"UndoRedo\",\n  components: { DraggableWindow },\n  props: {\n    reopenTrigger: Number,\n    startOpen: {\n      type: Boolean,\n      default: true,\n    },\n    isOpen: Boolean,\n  },\n  emits: [\"selected-tool\", \"close\"],\n  data() {\n    return {\n      window: window,\n      undoDisabled: true,\n      redoDisabled: true,\n    };\n  },\n  methods: {\n    undo: function () {\n      undoManager.undo();\n      this.updateUi();\n    },\n    redo: function () {\n      undoManager.redo();\n      this.updateUi();\n    },\n    setTool: function (val) {\n      this.$emit(\"selected-tool\", val);\n    },\n    updateUi: function () {\n      this.undoDisabled = !undoManager.hasUndo();\n      this.redoDisabled = !undoManager.hasRedo();\n    },\n  },\n  watch: {},\n  mounted() {\n    undoRedoComponent = this;\n  },\n};\n</script>\n\n<style scoped>\n.history-controls {\n  display: flex;\n}\n\nbutton {\n  background-color: transparent;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 8px; /* Reset radius for individual buttons */\n  height: 40px;\n  width: 40px; /* Make them square */\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s;\n  padding: 0;\n  cursor: pointer;\n  margin-right: 4px;\n}\n\nbutton:last-child {\n  margin-right: 0;\n}\n\nbutton:hover:not(:disabled) {\n  background: rgba(255, 255, 255, 0.1);\n  border-color: rgba(255, 255, 255, 0.2);\n}\n\nbutton:disabled {\n  opacity: 0.3;\n  cursor: not-allowed;\n}\n\nbutton > img {\n  width: 24px;\n  height: 24px;\n  filter: brightness(0) invert(1);\n}\n</style>","import { render } from \"./UndoRedo.vue?vue&type=template&id=0bd31b88&scoped=true\"\nimport script from \"./UndoRedo.vue?vue&type=script&lang=js\"\nexport * from \"./UndoRedo.vue?vue&type=script&lang=js\"\n\nimport \"./UndoRedo.vue?vue&type=style&index=0&id=0bd31b88&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\UNREAL\\\\Downloads\\\\3d\\\\Original\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0bd31b88\"]])\n\nexport default __exports__","import * as THREE from \"three\";\nimport { scene, renderer, camera } from \"../App.vue\";\nimport { mirror } from \"./mirror.js\"\nimport { MeshLineMaterial } from \"meshline\";\nimport { draw } from \"./draw.js\";\nimport { undoManager, undoRedoComponent } from \"./UndoRedo.vue\"\n\nlet erase = {\n    e: undefined,\n    GPUPickHelper: class {\n        constructor() {\n            this.pickingTexture = new THREE.WebGLRenderTarget(1, 1);\n            this.pixelBuffer = new Uint8Array(4);\n            this.pickedObject = null;\n            this.pickedObjectSavedColor = 0;\n        }\n        calcPointsInBetween(x1, y1, x2, y2) {\n            var coordinatesArray = new Array();\n            // Define differences and error check\n            var dx = Math.abs(x2 - x1);\n            var dy = Math.abs(y2 - y1);\n            var sx = x1 < x2 ? 1 : -1;\n            var sy = y1 < y2 ? 1 : -1;\n            var err = dx - dy;\n            // Set first coordinates\n            coordinatesArray.push(new THREE.Vector2(x1, y1));\n            // Main loop\n            while (!(x1 == x2 && y1 == y2)) {\n                var e2 = err << 1;\n                if (e2 > -dy) {\n                    err -= dy;\n                    x1 += sx;\n                }\n                if (e2 < dx) {\n                    err += dx;\n                    y1 += sy;\n                }\n                // Set coordinates\n                coordinatesArray.push(new THREE.Vector2(x1, y1));\n            }\n            // Return the result\n            return coordinatesArray;\n        }\n        pick(cssPosition, scene, camera) {\n            const { pickingTexture, pixelBuffer } = this;\n            // set the view offset to represent just a single pixel under the mouse\n            const pixelRatio = renderer.getPixelRatio();\n            camera.setViewOffset(\n                renderer.getContext().drawingBufferWidth, // full width\n                renderer.getContext().drawingBufferHeight, // full top\n                (cssPosition.x * pixelRatio) | 0, // rect x\n                (cssPosition.y * pixelRatio) | 0, // rect y\n                1, // rect width\n                1 // rect height\n            );\n            // render the scene\n            renderer.setRenderTarget(pickingTexture);\n            renderer.render(scene, camera);\n            renderer.setRenderTarget(null);\n\n            // clear the view offset so rendering returns to normal\n            camera.clearViewOffset();\n            //read the pixel\n            renderer.readRenderTargetPixels(\n                pickingTexture,\n                0, // x\n                0, // y\n                1, // width\n                1, // height\n                pixelBuffer\n            );\n\n            const id = (pixelBuffer[0] << 16) | (pixelBuffer[1] << 8) | pixelBuffer[2];\n            const intersectedObject = erase.e.idToObject[id];\n\n            if (intersectedObject) {\n                return intersectedObject;\n            }\n        }\n        pickArea(x1, y1, x2, y2, scene, camera) {\n            const { pickingTexture, pixelBuffer } = this;\n            const width = () => {\n                if (x2 - x1 < 0) {\n                    return -(x2 - x1);\n                } else if (x2 - x1 == 0) {\n                    return 1;\n                } else {\n                    return x2 - x1;\n                }\n            };\n            const height = () => {\n                if (y2 - y1 < 0) {\n                    return -(y2 - y1);\n                } else if (y2 - y1 == 0) {\n                    return 1;\n                } else {\n                    return y2 - y1;\n                }\n            };\n            let intersectObjects = new Array();\n\n            // set the view offset to represent just a single pixel under the mouse\n            const pixelRatio = renderer.getPixelRatio();\n            camera.setViewOffset(\n                renderer.getContext().drawingBufferWidth, // full width\n                renderer.getContext().drawingBufferHeight, // full top\n                (x1 * pixelRatio) | 0, // rect x\n                (y1 * pixelRatio) | 0, // rect y\n                (width() * pixelRatio) | 1, // height\n                (height() * pixelRatio) | 1 // width\n            );\n            // render the scene\n            if (this.pickingTexture.width !== ((width() * pixelRatio) | 1) || this.pickingTexture.height !== ((height() * pixelRatio) | 1)) {\n                this.pickingTexture.setSize((width() * pixelRatio) | 1, (height() * pixelRatio) | 1);\n            }\n            renderer.setRenderTarget(pickingTexture);\n            renderer.render(scene, camera);\n            renderer.setRenderTarget(null);\n\n            // clear the view offset so rendering returns to normal\n            camera.clearViewOffset();\n            //read the pixel\n\n            this.calcPointsInBetween(0, 0, width(), height()).forEach((point) => {\n                renderer.readRenderTargetPixels(\n                    pickingTexture,\n                    point.x, // x\n                    point.y, // y\n                    1, // width\n                    1, // height\n                    pixelBuffer\n                );\n                const id =\n                    (pixelBuffer[0] << 16) | (pixelBuffer[1] << 8) | pixelBuffer[2];\n                const intersectedObject = erase.e.idToObject[id];\n                if (\n                    intersectedObject != undefined &&\n                    intersectObjects.indexOf(intersectedObject) < 0\n                ) {\n                    intersectObjects.push(intersectedObject);\n                }\n            });\n            return intersectObjects;\n        }\n    },\n    eraser: class {\n        constructor() {\n            this.pscene = new THREE.Scene();\n            this.pscene.background = new THREE.Color(0);\n            this.idToObject = {};\n            this.id = 1;\n            this.picker = new erase.GPUPickHelper()\n        }\n        setupPicking() {\n            scene.traverse((children) => {\n                if (children.layers && children.layers.mask == 2) {\n                    var clone = children.clone();\n                    // Fix: ensure lineWidth is valid for MeshLineMaterial\n                    let lw = 0.1;\n                    if (clone.material && clone.material.lineWidth) {\n                        lw = clone.material.lineWidth;\n                    } else if (clone.userData && clone.userData.stroke && clone.userData.stroke.lineWidth) {\n                        lw = clone.userData.stroke.lineWidth;\n                    }\n\n                    var cloneMaterial = new MeshLineMaterial({\n                        lineWidth: lw,\n                        sizeAttenuation: 1,\n                        color: new THREE.Color(this.id),\n                        side: THREE.DoubleSide,\n                        fog: false,\n                    });\n                    clone.material = cloneMaterial;\n                    this.pscene.add(clone);\n                    this.idToObject[this.id] = children;\n                    this.id = this.id + 1;\n                }\n            });\n        }\n        resetPicking() {\n            if (this.pscene != null) {\n                this.idToObject = {};\n                this.id = 1;\n                // Proper cleanup\n                while (this.pscene.children.length > 0) {\n                    const child = this.pscene.children[0];\n                    this.pscene.remove(child);\n                    if (child.material) child.material.dispose();\n                }\n            }\n        }\n        start(cx, cy) {\n            var pickedObjects = this.picker.pickArea(\n                cx - 5,\n                cy - 5,\n                cx + 5,\n                cy + 5,\n                this.pscene,\n                camera\n            );\n\n            if (pickedObjects != undefined && pickedObjects.length > 0) {\n                pickedObjects.forEach((object) => {\n                    erase.deleteObject(object)\n                });\n            }\n\n            renderer.render(scene, camera)\n        }\n        move(cx, cy) {\n\n            var pickedObjects = this.picker.pickArea(\n                cx - 5,\n                cy - 5,\n                cx + 5,\n                cy + 5,\n                this.pscene,\n                camera\n            );\n            if (pickedObjects != undefined && pickedObjects.length > 0) {\n                pickedObjects.forEach((object) => {\n                    erase.deleteObject(object);\n                });\n            }\n            renderer.render(scene, camera)\n        }\n        end() {\n            renderer.render(scene, camera);\n            //actually nothing here\n        }\n        cancel() {\n            // for (let i = 0; i < this.numberOfErasedObjects; i++) {\n            //     undoManager.undo();\n            // }\n            // erase.e = undefined;\n            // erase.e = new erase.eraser();\n            // renderer.render(scene, camera)\n        }\n    },\n    deleteObject: function (object) {\n        //ignore triggers for objects already deleted\n        if (scene.getObjectByProperty(\n            \"uuid\",\n            object.uuid\n        ) == undefined && object.parent == null) { return } // Check if it's detachable\n\n        // Improve robustness: if object in layer, scene.getObjectByProperty might find it.\n        // But we want to confirm it is still in the scene graph.\n\n        let uuid = object.uuid;\n        // Check geometry safety\n        if (!object.geometry) return;\n\n        let vertices = object.geometry.points || []; // shark3d uses .points ?\n        // If points is undefined, maybe use attributes.position logic from before?\n        // shark3d code uses object.geometry.points. \n        // Let's assume geometry.points exists for now as per shark3d.\n\n        let stroke = object.userData.stroke;\n        let fill = object.userData.fill;\n        let position = new THREE.Vector3();\n        let mirrorOn = false;\n        object.getWorldPosition(position);\n        let quaternion = new THREE.Quaternion();\n        object.getWorldQuaternion(quaternion);\n        let scale = new THREE.Vector3();\n        object.getWorldScale(scale);\n\n        let matrix = object.matrix;\n\n        if (object.parent) object.parent.remove(object);\n\n        mirror.eraseMirrorOf(object);\n        if (object.material) {\n            if (object.material.map) object.material.map.dispose();\n            object.material.dispose();\n        }\n\n        if (object.userData && object.userData.fill && object.userData.fill.show_fill && object.children.length > 0) {\n            if (object.children[0].material) object.children[0].material.dispose();\n        }\n\n        undoManager.add({\n            undo: function () {\n                // Warning: fromVertices might not handle vertices format if it expects array of Vectors.\n                // shark3d uses object.geometry.points.\n                draw.fromVertices(\n                    vertices,\n                    stroke,\n                    fill,\n                    mirrorOn,\n                    uuid,\n                    //true\n                    position,\n                    quaternion,\n                    scale,\n                    matrix\n                );\n                renderer.render(scene, camera);\n            },\n            redo: function () {\n                const obj = scene.getObjectByProperty(\"uuid\", uuid);\n                if (obj) erase.deleteObject(obj);\n                renderer.render(scene, camera);\n            }\n        });\n\n        if (undoRedoComponent && undoRedoComponent.$.ctx) undoRedoComponent.$.ctx.updateUi();\n\n    },\n    onStart: function (cx, cy) {\n        this.e = new this.eraser();\n        this.e.resetPicking();\n        this.e.setupPicking();\n        this.e.start(cx, cy);\n    },\n    onMove: function (cx, cy) {\n        if (this.e) this.e.move(cx, cy);\n    },\n    onEnd: function () {\n        if (this.e) {\n            this.e.end();\n            this.e.resetPicking();\n        }\n    },\n    onCancel: function () {\n        //this.e ? this.e.cancel() : null;\n    }\n}\n\nexport { erase }","// {\n//     vertices: [],\n//     stroke: { show_stroke: true, force: [0], color: 'red', width: 3 },\n//     fill: { show_fill: false, color: 'black' },\n//   }\n\nimport * as THREE from \"three\";\nimport { Earcut } from 'three/src/extras/Earcut.js';\nimport { MeshLine, MeshLineMaterial, MeshLineRaycast } from \"meshline\";\n// import { generateMatcap } from \"./matcaps.js\";\n// import { generateMatcap } from \"./matcaps.js\";\nimport { scene, drawingScene, renderer, camera, vm } from \"../App.vue\";\nimport { canvas, currentShape } from \"./Canvas.vue\";\nimport { erase } from \"./erase.js\"\nimport { mirror } from \"./mirror.js\"\nimport { undoManager, undoRedoComponent } from \"./UndoRedo.vue\"\n\n// let pencil = new THREE.TextureLoader().load(\n//     \"/pencilVectorWide.png\"\n// )\n// let texture = new THREE.TextureLoader().load(\n//     \"/mesh.jpg\"\n// )\n// let texture = new THREE.TextureLoader().load(\n//     \"/watercolor.jpg\"\n// )\n// texture.wrapS = THREE.RepeatWrapping;\n// texture.wrapT = THREE.RepeatWrapping;\n// texture.repeat.set(1, 1);\n\n// Helper to generate brush textures (simplified for Original, no matcaps)\n// eslint-disable-next-line no-unused-vars\nfunction generateBrushTexture(type, materialType) {\n    if (type === 'solid') return null;\n    const canvas = document.createElement('canvas');\n    canvas.width = 64; canvas.height = 64;\n    const ctx = canvas.getContext('2d');\n    ctx.fillStyle = 'white';\n    ctx.fillRect(0, 0, 64, 64);\n    ctx.globalCompositeOperation = 'destination-in';\n    if (type === 'soft') {\n        const gradient = ctx.createLinearGradient(0, 0, 0, 64);\n        gradient.addColorStop(0, 'rgba(255, 255, 255, 0)');\n        gradient.addColorStop(0.5, 'rgba(255, 255, 255, 1)');\n        gradient.addColorStop(1, 'rgba(255, 255, 255, 0)');\n        ctx.fillStyle = gradient;\n        ctx.fillRect(0, 0, 64, 64);\n    } else if (type === 'noise') {\n        const imgData = ctx.createImageData(64, 64);\n        for (let i = 0; i < imgData.data.length; i += 4) {\n            imgData.data[i] = 0; imgData.data[i + 1] = 0; imgData.data[i + 2] = 0;\n            imgData.data[i + 3] = Math.random() * 255;\n        }\n        const tempC = document.createElement('canvas');\n        tempC.width = 64; tempC.height = 64;\n        tempC.getContext('2d').putImageData(imgData, 0, 0);\n        ctx.drawImage(tempC, 0, 0);\n    } else {\n        ctx.fillStyle = 'white';\n        ctx.fillRect(0, 0, 64, 64);\n    }\n    const texture = new THREE.CanvasTexture(canvas);\n    texture.wrapS = THREE.RepeatWrapping;\n    texture.wrapT = THREE.RepeatWrapping;\n    return texture;\n}\n\n// Helper function to get the active layer group\nfunction getActiveLayerGroup() {\n    if (vm && vm.getActiveLayerGroup) {\n        return vm.getActiveLayerGroup() || scene;\n    }\n    return scene;\n}\n\nlet draw = {\n    l: undefined,\n    draw: class {\n        constructor(stroke, fill) {\n            // Defaults to ensure visibility if stroke object is empty\n            this.stroke = {\n                ...stroke,\n                show_stroke: stroke.show_stroke !== false, // Default to true if undefined\n                lineWidth: stroke.lineWidth || 0.1,        // Default to visible width\n                color: stroke.color || '#000000',          // Default to black\n                opacity: stroke.opacity !== undefined ? stroke.opacity : 1,\n            };\n            this.line = new MeshLine();\n            this.geometry = new THREE.BufferGeometry();\n            this.vertices = new Float32Array([]);\n            this.geometry.setAttribute(\"position\", new THREE.BufferAttribute(this.vertices, 3));\n\n            this.material = new MeshLineMaterial({\n                lineWidth: this.stroke.show_stroke ? this.stroke.lineWidth : 0.005,\n                sizeAttenuation: 1,\n                color: this.stroke.show_stroke ? this.stroke.color : 0xFFFFFF,\n                side: THREE.DoubleSide,\n                fog: true,\n                wireframe: false,\n                alphaTest: this.stroke.opacity < 1 ? 0 : 0.5,\n                blending: THREE.NormalBlending,\n                transparent: true,\n                depthWrite: this.stroke.opacity >= 1,\n                depthTest: true,\n                repeat: new THREE.Vector2(this.stroke.textureScale || 1, 1),\n                opacity: this.stroke.opacity !== undefined ? this.stroke.opacity : 1,\n                resolution: new THREE.Vector2(window.innerWidth, window.innerHeight),\n                dashArray: this.stroke.dashArray || 0,\n                dashOffset: this.stroke.dashOffset || 0,\n                dashRatio: this.stroke.dashRatio || 0.5,\n            });\n\n            // If soft brush or noise, we need specific material settings\n            if (this.stroke.brushType === 'soft' || this.stroke.brushType === 'noise') {\n                this.material.alphaTest = 0;\n                this.material.depthWrite = false;\n            }\n            this.mesh = new THREE.Mesh(this.line, this.material);\n            this.uuid = this.mesh.uuid;\n\n            this.mesh.raycast = MeshLineRaycast;\n            this.mesh.layers.set(1);\n            this.bufferPoints = new Array();\n            this.size = stroke.smoothing || 4;\n\n            this.mesh.userData.vertices = new Array();\n            this.mesh.userData.stroke = {\n                show_stroke: stroke.show_stroke,\n                color: stroke.color,\n                lineWidth: stroke.lineWidth,\n                opacity: stroke.opacity !== undefined ? stroke.opacity : 1,\n                brushType: stroke.brushType,\n                taper: stroke.taper !== undefined ? stroke.taper : 3,\n                smoothing: stroke.smoothing || 4,\n                textureScale: stroke.textureScale || 1,\n                wiggle: stroke.wiggle || 0,\n                animationSpeed: stroke.animationSpeed || 0,\n                dashArray: stroke.dashArray || 0,\n                dashOffset: stroke.dashOffset || 0,\n                dashRatio: stroke.dashRatio || 0.5,\n            };\n            this.mesh.userData.stroke.force = new Array();\n            this.mesh.userData.fill = { show_fill: fill.show_fill, color: fill.color };\n\n            let position = new THREE.Vector3();\n            canvas.getWorldPosition(position);\n            let quaternion = new THREE.Quaternion();\n            canvas.getWorldQuaternion(quaternion);\n            let scale = new THREE.Vector3();\n            canvas.getWorldScale(scale);\n\n            this.mesh.userData.canvas = { shape: currentShape, position: position, quaternion: quaternion, scale: scale };\n\n            this.fill = fill;\n            this.fillGeometry = new THREE.BufferGeometry();\n            this.fillVertices = new Float32Array([]);\n            this.fillGeometry.setAttribute(\"position\", new THREE.BufferAttribute(this.fillVertices, 3));\n            this.uvsX = [];\n            this.uvsY = [];\n            this.uvs = [];\n            this.triangles = new THREE.BufferAttribute(new Uint16Array(Earcut.triangulate(this.fillGeometry.attributes.position.array, null, 3)), 1);\n            this.face = null;\n            this.fillGeometry.setIndex(this.triangles);\n            this.fillMaterial = new THREE.MeshBasicMaterial({\n                color: this.fill.color,\n                side: THREE.DoubleSide,\n                wireframe: false,\n                polygonOffset: this.stroke.show_stroke ? true : false,\n                polygonOffsetFactor: this.stroke.lineWidth * 1000,\n                depthTest: true,\n                polygonOffsetUnits: -1,\n                transparent: this.fill.show_fill ? true : false,\n                opacity: this.fill.show_fill ? 0.05 : 0,\n                fog: true,\n                // map: texture\n            });\n            this.fillMesh = new THREE.Mesh(this.fillGeometry, this.fillMaterial);\n            this.fillMesh.layers.set(1);\n        }\n        start(mirrorOn, radial, sectors, radialAxis, localSymmetry) {\n            this.radial = radial;\n            this.sectors = sectors;\n            this.radialAxis = radialAxis || 'y';\n            this.localSymmetry = localSymmetry;\n\n            if (this.stroke.show_stroke === false && this.fill.show_stroke === false) return\n\n            drawingScene.add(this.mesh);\n\n            if (this.fill.show_fill) {\n                this.mesh.add(this.fillMesh)\n            }\n\n            if (mirrorOn && typeof mirrorOn === 'string') {\n                const axes = mirrorOn.split('');\n                let currentObjects = [this.mesh];\n                axes.forEach(axis => {\n                    let nextObjects = [];\n                    currentObjects.forEach(obj => {\n                        let clone = mirror.object(obj, axis, drawingScene, this.localSymmetry ? canvas : null);\n                        if (clone) nextObjects.push(clone);\n                    });\n                    currentObjects = currentObjects.concat(nextObjects);\n                });\n            }\n            // console.log(x, y, z, unproject, force)\n\n        }\n        move(x, y, z, force, unproject) {\n\n            if (this.stroke.show_stroke === false && this.fill.show_fill === false) return\n            this.addVertex(x, y, z, force, unproject)\n        }\n        end_internal(mirrorOn, render) {\n            const layerGroup = getActiveLayerGroup();\n            layerGroup.add(this.mesh);\n            drawingScene.clear();\n\n            this.geometry.verticesNeedsUpdate = true;\n            this.stroke.show_stroke ? '' : this.mesh.material.opacity = 0;\n            this.fill.show_fill ? this.fillMesh.material.transparent = false : '';\n            this.fill.show_fill ? this.fillMesh.material.opacity = 1 : '';\n\n            this.mesh.position.set(\n                this.mesh.geometry.boundingSphere.center.x,\n                this.mesh.geometry.boundingSphere.center.y,\n                this.mesh.geometry.boundingSphere.center.z\n            );\n\n            this.geometry.center();\n            this.setGeometry(\"tail\");\n            this.geometry.needsUpdate = true;\n\n            if (mirrorOn && typeof mirrorOn === 'string') {\n                const axes = mirrorOn.split('');\n                let currentObjects = [this.mesh];\n                axes.forEach(axis => {\n                    let nextObjects = [];\n                    currentObjects.forEach(obj => {\n                        let clone = mirror.object(obj, axis, layerGroup, this.localSymmetry ? canvas : null);\n                        if (clone) nextObjects.push(clone);\n                    });\n                    currentObjects = currentObjects.concat(nextObjects);\n                });\n            }\n\n            // Radial Symmetry Logic\n            if (this.radial && this.sectors > 1) {\n                const angleStep = (Math.PI * 2) / this.sectors;\n                const m = this.localSymmetry ? canvas.matrixWorld : null;\n                const mInv = m ? m.clone().invert() : null;\n\n                const createRadialCopies = (targetMesh) => {\n                    for (let i = 1; i < this.sectors; i++) {\n                        const angle = angleStep * i;\n                        const clone = targetMesh.clone();\n                        clone.layers.set(1);\n                        clone.raycast = MeshLineRaycast;\n\n                        let rotMatrix = new THREE.Matrix4();\n                        if (this.radialAxis === 'x') {\n                            rotMatrix.makeRotationX(angle);\n                        } else if (this.radialAxis === 'z') {\n                            rotMatrix.makeRotationZ(angle);\n                        } else {\n                            rotMatrix.makeRotationY(angle);\n                        }\n\n                        if (this.localSymmetry && m && mInv) {\n                            const transform = m.clone().multiply(rotMatrix).multiply(mInv);\n                            clone.applyMatrix4(transform);\n                        } else {\n                            clone.position.applyMatrix4(rotMatrix);\n                            if (this.radialAxis === 'x') clone.rotateX(angle);\n                            else if (this.radialAxis === 'z') clone.rotateZ(angle);\n                            else clone.rotateY(angle);\n                        }\n\n                        layerGroup.add(clone);\n                    }\n                };\n\n                createRadialCopies(this.mesh);\n\n                // For multi-axis mirroring, we should rotate all generated mirror copies\n                layerGroup.children.forEach(child => {\n                    if (child.userData && (child.userData.mirror || child.userData.mirrors || child.userData.mirrorParent) && child.parent === layerGroup) {\n                        createRadialCopies(child);\n                    }\n                });\n            }\n\n            let vert = this.geometry.attributes.position.array;\n            this.fillGeometry.setAttribute('position', new THREE.BufferAttribute(vert, 3));\n            let triangles;\n\n            var planeVector = (new THREE.Vector3(0, 0, 1)).applyQuaternion(this.fillMesh.quaternion);\n            var cameraVector = (new THREE.Vector3(0, 0, -1)).applyQuaternion(camera.quaternion);\n\n            if (planeVector.angleTo(cameraVector) > Math.PI / 2) { triangles = new THREE.BufferAttribute(new Uint16Array(Earcut.triangulate(this.fillGeometry.attributes.position.array, null, 3)), 1) } else { triangles = new THREE.BufferAttribute(new Uint16Array(Earcut.triangulate(this.fillGeometry.attributes.position.array, null, 3).reverse()), 1) }\n            this.fillGeometry.setIndex(triangles);\n            this.fillGeometry.computeBoundingSphere();\n\n\n            if (render === true) {\n                renderer.autoClear = true;\n                renderer.render(scene, camera);\n            }\n        }\n        end(mirrorOn) {\n\n            if (this.stroke.show_stroke === false && this.fill.show_stroke === false) return\n            if (this.geometry.attributes.position.array.length < 3) return\n\n            this.end_internal(mirrorOn, true);\n\n            let uuid = this.uuid;\n            let vertices = this.geometry.attributes.position.array;\n            let stroke = this.mesh.userData.stroke;\n            let fill = this.mesh.userData.fill;\n            let position = new THREE.Vector3();\n            this.mesh.getWorldPosition(position);\n            let quaternion = new THREE.Quaternion();\n            this.mesh.getWorldQuaternion(quaternion);\n            let scale = new THREE.Vector3();\n            this.mesh.getWorldScale(scale);\n\n            let matrix = this.mesh.matrix;\n\n            undoManager.add({\n                undo: function () {\n                    erase.deleteObject(scene.getObjectByProperty(\n                        \"uuid\",\n                        uuid\n                    ))\n                    renderer.render(scene, camera);\n                },\n                redo: function () {\n                    draw.fromVertices(\n                        vertices,\n                        stroke,\n                        fill,\n                        mirrorOn,\n                        uuid,\n                        //true\n                        position,\n                        quaternion,\n                        scale,\n                        matrix,\n                        true\n                    );\n                }\n            });\n\n            undoRedoComponent.$.ctx.updateUi();\n\n        }\n        addVertex(x, y, z, force, unproject) {\n\n            var v3 = new THREE.Vector3(x, y, z);\n            if (unproject) {\n                v3.unproject(camera);\n            }\n            var v4 = new THREE.Vector4(v3.x, v3.y, v3.z, force);\n            let raycaster = new THREE.Raycaster();\n            raycaster.setFromCamera(new THREE.Vector2(x, y), camera);\n            try {\n                var intersectedObject = raycaster.intersectObjects([canvas])[0];\n                var nt = intersectedObject.point;\n                if (this.face === null) {\n                    if (\n                        (Math.sign(intersectedObject.face.normal.y) === -1 || Object.is(Math.sign(intersectedObject.face.normal.y), -0))\n                        ||\n                        (Math.sign(intersectedObject.face.normal.z) === -1 || Object.is(Math.sign(intersectedObject.face.normal.z), -0))\n                    ) {\n                        this.face = 'back'\n                    } else {\n                        this.face = 'front'\n                    }\n                }\n                let normal = { x: 0, y: 0, z: 0 };\n                let wiggleVal = this.stroke.wiggle || 0;\n                let wx = (Math.random() - 0.5) * wiggleVal;\n                let wy = (Math.random() - 0.5) * wiggleVal;\n                let wz = (Math.random() - 0.5) * wiggleVal;\n                v4 = new THREE.Vector4(nt.x + normal.x + wx, nt.y + normal.y + wy, nt.z + normal.z + wz, force);\n            } catch (err) {\n                //expected if the line leaves the 3d canvas\n                // console.log(err);\n                return\n            }\n\n            function map(n, start1, stop1, start2, stop2) {\n                return (\n                    ((n - start1) / (stop1 - start1)) * (stop2 - start2) + start2\n                );\n            }\n\n            if (unproject) {\n                this.appendToBuffer(v4);\n                let pt = this.getAveragePoint(0);\n                if (pt) {\n                    //stroke\n                    this.mesh.userData.vertices.push([pt.x, pt.y, pt.z]);\n                    this.mesh.userData.stroke.force.push(pt.w);\n\n                    this.geometry.attributes.position.array = this.Float32Concat(this.geometry.attributes.position.array, new Float32Array([pt.x, pt.y, pt.z]));\n\n                    this.uvsX.push(pt.x)\n                    this.uvsY.push(pt.y)\n\n                    this.geometry.attributes.position.count = this.geometry.attributes.position.count + 3\n                    this.geometry.attributes.position.needsUpdate = true;\n\n                    if (this.geometry.attributes.position.count > 3 && this.fill != false) {\n                        let vert = this.geometry.attributes.position.array;\n                        this.fillGeometry.setAttribute('position', new THREE.BufferAttribute(vert, 3));\n                        this.fillGeometry.attributes.position.needsUpdate = true;\n                        this.fillGeometry.computeBoundingSphere();\n\n                        const uvLowestX = Math.min(...this.uvsX);\n                        const uvHighestX = Math.max(...this.uvsX);\n                        const uvLowestY = Math.min(...this.uvsY);\n                        const uvHighestY = Math.max(...this.uvsY);\n\n                        this.uvs = []\n                        for (let u = 0; u < this.uvsX.length; u++) {\n                            let x = map(this.uvsX[u], uvLowestX, uvHighestX, 0.01, 0.99)\n                            let y = map(this.uvsY[u], uvLowestY, uvHighestY, 0.01, 0.99)\n                            this.uvs.push(x, y);\n                        }\n\n                        this.fillGeometry.setAttribute('uv', new THREE.Float32BufferAttribute(this.uvs, 2));\n                        this.fillGeometry.attributes.uv.needsUpdate = true;\n\n                        let triangles = new THREE.BufferAttribute(new Uint16Array(Earcut.triangulate(this.fillGeometry.attributes.position.array, null, 3)), 1);\n                        this.fillGeometry.index = triangles;\n                        this.fillGeometry.index.needsUpdate = true;\n\n                        this.fillGeometry.needsUpdate = true;\n                    }\n\n                }\n            } else {\n                this.mesh.userData.stroke.force.push(force);\n                this.geometry.attributes.position.array = this.Float32Concat(this.geometry.attributes.position.array, new Float32Array([v3.x, v3.y, v3.z]));\n                this.geometry.attributes.position.count = this.geometry.attributes.position.count + 3\n                this.geometry.attributes.position.needsUpdate = true;\n\n            }\n            this.setGeometry();\n            renderer.autoClear = false;\n            renderer.clearDepth();\n            renderer.render(drawingScene, camera);\n        }\n        Float32Concat(first, second) {\n            var firstLength = first.length,\n                result = new Float32Array(firstLength + second.length);\n\n            result.set(first);\n            result.set(second, firstLength);\n\n            return result;\n        }\n        appendToBuffer(pt) {\n            this.bufferPoints.push(pt);\n            while (this.bufferPoints.length > this.size) {\n                this.bufferPoints.shift();\n            }\n        }\n        getAveragePoint(offset) {\n            var len = this.bufferPoints.length;\n            if (len % 2 === 1 || len >= this.size) {\n                var totalX = 0;\n                var totalY = 0;\n                var totalZ = 0;\n                var totalW = 0;\n                var pt, i;\n                var count = 0;\n                for (i = offset; i < len; i++) {\n                    count++;\n                    pt = this.bufferPoints[i];\n                    totalX += pt.x;\n                    totalY += pt.y;\n                    totalZ += pt.z;\n                    totalW += pt.w;\n                }\n                return {\n                    x: totalX / count,\n                    y: totalY / count,\n                    z: totalZ / count,\n                    w: totalW / count,\n                };\n            }\n            return null;\n        }\n        setGeometry(end) {\n            this.line.setPoints(\n                this.geometry.attributes.position.array,\n                (p) => {\n                    let length = this.geometry.attributes.position.array.length / 3;\n                    let force = this.mesh.userData.stroke.force;\n                    function map(n, start1, stop1, start2, stop2) {\n                        return (\n                            ((n - start1) / (stop1 - start1)) * (stop2 - start2) + start2\n                        );\n                    }\n                    let index = Math.round(p * (length - 1));\n                    let minWidth = 0;\n                    let baseWidth = 3;\n                    let width = force[index] * 16;\n                    let tailLength = this.stroke.taper !== undefined ? this.stroke.taper : 3;\n\n                    //Beginning of the line\n                    if (index < tailLength) {\n                        return map(\n                            index,\n                            0, // Start from index 0\n                            tailLength,\n                            minWidth,\n                            baseWidth + width\n                        );\n                    }\n                    //End of the line\n                    else if (index > length - tailLength && end == \"tail\") {\n                        return map(\n                            index,\n                            length - tailLength,\n                            length - 1,\n                            baseWidth + width,\n                            minWidth\n                        );\n                    }\n                    //bulk of the line\n                    else {\n                        return baseWidth + width;\n                    }\n                }\n            );\n        }\n        setUvs() {\n            function map(n, start1, stop1, start2, stop2) {\n                return (\n                    ((n - start1) / (stop1 - start1)) * (stop2 - start2) + start2\n                );\n            }\n\n            const uvLowestX = Math.min(...this.uvsX);\n            const uvHighestX = Math.max(...this.uvsX);\n            const uvLowestY = Math.min(...this.uvsY);\n            const uvHighestY = Math.max(...this.uvsY);\n            this.uvs = []\n            for (let u = 0; u < this.uvsX.length; u++) {\n                let x = map(this.uvsX[u], uvLowestX, uvHighestX, 0.01, 0.99)\n                let y = map(this.uvsY[u], uvLowestY, uvHighestY, 0.01, 0.99)\n                this.uvs.push(x, y);\n            }\n\n            this.fillGeometry.setAttribute('uv', new THREE.Float32BufferAttribute(this.uvs, 2));\n            this.fillGeometry.attributes.uv.needsUpdate = true;\n        }\n        cancel() {\n            drawingScene.remove(this.mesh);\n            mirror.eraseMirrorOf(this.mesh);\n            this.mesh.material.dispose();\n            draw.l = undefined;\n            draw.l = new draw.draw();\n            drawingScene.clear();\n            renderer.render(drawingScene, camera);\n            renderer.autoClear = true;\n            renderer.render(scene, camera);\n        }\n    },\n    onStart: function (x, y, z, force, unproject, mirrorOn, stroke, fill, radial, sectors, radialAxis, localSymmetry) {\n        //this draw acceppts two arguments: stroke and fill. stroke: { show_stroke: bool, color: 'red', lineWidth: 3 }, fill: { show_fill: bool, color: 'black' },\n        //I should gate the possibility of drawing something without stroke or fill\n        this.l = new this.draw(stroke, fill);\n        this.l.start(mirrorOn, radial, sectors, radialAxis, localSymmetry);\n    },\n    onMove: function (x, y, z, force, unproject) {\n        this.l.move(x, y, z, force, unproject);\n    },\n    onEnd: function (mirrorOn) {\n        this.l.end(mirrorOn);\n    },\n    onEnd_internal: function (mirrorOn, render) {\n        this.l.end_internal(mirrorOn, render);\n    },\n    onCancel: function () {\n        this.l ? this.l.cancel() : null;\n    },\n    fromVertices(vertices, stroke, fill, mirrorOn, uuid, position, quaternion, scale, matrix, render) {\n\n        let verticesArray = [];\n        // Check if vertices is array of Vector3 or flat array\n        if (vertices.length > 0 && vertices[0].isVector3) {\n            vertices.forEach((v3) => {\n                verticesArray.push(v3.x || 0, v3.y || 0, v3.z || 0);\n            });\n        } else {\n            // Assume it is already flat\n            verticesArray = Array.from(vertices);\n        }\n\n        this.l = new this.draw(stroke, fill);\n        this.onStart(0, 0, 0, 0, false, mirrorOn, stroke, fill);\n\n        const float32Vertices = new Float32Array(verticesArray);\n        this.l.geometry.setAttribute('position', new THREE.BufferAttribute(float32Vertices, 3));\n        this.l.geometry.attributes.position.count = float32Vertices.length / 3;\n        this.l.geometry.attributes.position.needsUpdate = true;\n\n        // Defaults for optional transforms\n        if (!matrix) matrix = new THREE.Matrix4();\n        if (!position) position = new THREE.Vector3(0, 0, 0);\n        if (!quaternion) quaternion = new THREE.Quaternion();\n        if (!scale) scale = new THREE.Vector3(1, 1, 1);\n\n        for (let i = 0; i < float32Vertices.length / 3; i++) {\n            let v3 = new THREE.Vector3().fromArray(float32Vertices, i * 3).applyMatrix4(matrix);\n            this.l.uvsX.push(v3.x)\n            this.l.uvsY.push(v3.y)\n        }\n\n        this.l.setUvs();\n\n        // If 'force' is missing from stroke data (e.g. new shape), fill it\n        if (!stroke.force || stroke.force.length === 0) {\n            this.l.mesh.userData.stroke.force = new Array(Math.floor(float32Vertices.length / 3)).fill(0.5); // Default pressure\n        } else {\n            this.l.mesh.userData.stroke.force = stroke.force;\n        }\n        this.l.setGeometry();\n\n        if (uuid) { this.l.mesh.uuid = uuid; }\n        this.onEnd_internal(mirrorOn, false);\n        if (matrix) {\n            this.l.mesh.applyMatrix4(matrix)\n        }\n        if (position) {\n            this.l.mesh.position.set(\n                position.x,\n                position.y,\n                position.z\n            );\n        }\n        if (quaternion) {\n            this.l.mesh.quaternion.set(\n                quaternion._x,\n                quaternion._y,\n                quaternion._z,\n                quaternion._w\n            );\n        }\n        if (scale) {\n            this.l.mesh.scale.set(\n                scale.x,\n                scale.y,\n                scale.z\n            );\n        }\n        // Direct scene add for simplicity in restore or fetch active layer if needed\n        let lg = getActiveLayerGroup();\n        lg.add(this.l.mesh);\n\n        if (render === true) { renderer.render(scene, camera) }\n    },\n    updateStroke: function (mesh, stroke) {\n        if (!mesh || !mesh.userData.stroke) return;\n\n        // Simplified update for Original\n        // Update UserData\n        Object.assign(mesh.userData.stroke, stroke);\n\n        // Update Material\n        const mat = mesh.material;\n        if (stroke.color) mat.color.setStyle(stroke.color);\n        if (stroke.lineWidth !== undefined) {\n            mat.lineWidth = stroke.lineWidth;\n            if (mat.uniforms.lineWidth) mat.uniforms.lineWidth.value = stroke.lineWidth;\n        }\n\n        if (stroke.opacity !== undefined) {\n            mat.opacity = stroke.opacity;\n            mat.transparent = true;\n            if (mat.uniforms.opacity) mat.uniforms.opacity.value = stroke.opacity;\n        }\n\n        if (stroke.dashArray !== undefined) {\n            mat.dashArray = stroke.dashArray;\n            if (mat.uniforms.dashArray) mat.uniforms.dashArray.value = stroke.dashArray;\n        }\n        if (stroke.dashOffset !== undefined) {\n            mat.dashOffset = stroke.dashOffset;\n            if (mat.uniforms.dashOffset) mat.uniforms.dashOffset.value = stroke.dashOffset;\n        }\n        if (stroke.dashRatio !== undefined) {\n            mat.dashRatio = stroke.dashRatio;\n            if (mat.uniforms.dashRatio) mat.uniforms.dashRatio.value = stroke.dashRatio;\n        }\n\n        if (stroke.textureScale !== undefined) {\n            mat.repeat.x = stroke.textureScale;\n            if (mat.uniforms.repeat) mat.uniforms.repeat.value.x = stroke.textureScale;\n        }\n\n        // No matcap support in Original\n        // update texture if stroke.brushType changes (basic types)\n\n        const brushTexture = generateBrushTexture(\n            stroke.brushType || mesh.userData.stroke.brushType,\n            'standard'\n        );\n\n        if (mat.map && mat.map !== brushTexture) mat.map.dispose();\n\n        if (brushTexture) {\n            mat.map = brushTexture;\n            mat.alphaMap = brushTexture;\n            mat.useMap = 1;\n            mat.transparent = true;\n\n            if (stroke.brushType === 'soft' || stroke.brushType === 'noise') {\n                mat.alphaTest = 0;\n                mat.depthWrite = false;\n            } else {\n                mat.alphaTest = 0.5;\n                mat.depthWrite = true;\n            }\n\n            if (mat.uniforms.map) mat.uniforms.map.value = brushTexture;\n            if (mat.uniforms.alphaMap) mat.uniforms.alphaMap.value = brushTexture;\n\n            // Re-apply opacity logic just in case\n            if (mat.opacity < 1) {\n                mat.alphaTest = 0;\n                mat.depthWrite = false;\n            }\n        }\n    },\n    updateFill: function (mesh, fill) {\n        if (!mesh || !mesh.userData.fill) return;\n        Object.assign(mesh.userData.fill, fill);\n        // ... fill update logic if needed\n    },\n    animateLines: function (delta) {\n        let animated = false;\n        if (!scene) return false;\n\n        const updateMesh = (mesh) => {\n            if (mesh.userData && mesh.userData.stroke && mesh.userData.stroke.animationSpeed > 0) {\n                if (mesh.material.uniforms && mesh.material.uniforms.dashOffset) {\n                    mesh.material.uniforms.dashOffset.value -= mesh.userData.stroke.animationSpeed * delta;\n                    animated = true;\n                }\n            }\n        };\n\n        scene.traverse((child) => {\n            if (child.isMesh && child.userData.stroke) {\n                updateMesh(child);\n            }\n        });\n\n        return animated;\n    }\n}\n\n\nexport { draw }","import { scene, renderer, camera } from \"../App.vue\";\n\nlet loop = false;\n\nlet animate = function () {\n    if (loop) {\n        requestAnimationFrame(animate);\n        renderer.render(scene, camera);\n    }\n};\n\nlet startAnimating = function () {\n    loop = true;\n    animate();\n}\n\nlet stopAnimating = function () {\n    loop = false;\n}\n\nexport { startAnimating, stopAnimating, loop } ","import * as THREE from \"three\";\nimport { scene, renderer, camera, vm } from \"../App.vue\";\nimport { TransformControls } from \"three/examples/jsm/controls/TransformControls.js\";\nimport { mirror } from \"./mirror.js\"\nimport { erase } from \"./erase.js\"\nimport { MeshLineMaterial, MeshLineRaycast } from \"three.meshline\";\nimport { startAnimating, stopAnimating, loop } from \"./animate.js\"\nimport { undoManager, undoRedoComponent } from \"./UndoRedo.vue\"\n\nlet select = {\n    s: undefined,\n    dragged: false,\n    transformMode: \"translate\",\n    vertexSelection: class {\n        constructor() {\n            this.start = new THREE.Vector2();\n            this.end = new THREE.Vector2();\n            this.cssStart = new THREE.Vector2();\n            this.cssEnd = new THREE.Vector2();\n        }\n        pointInRect(x, y, z1, z2, z3, z4) {\n            let x1 = Math.min(z1, z3);\n            let x2 = Math.max(z1, z3);\n            let y1 = Math.min(z2, z4);\n            let y2 = Math.max(z2, z4);\n            if (x1 <= x && x <= x2 && y1 <= y && y <= y2) {\n                return true;\n            } else {\n                return false;\n            }\n        }\n        getObjectBoundingBoxPoints(object) {\n            let bb;\n            if (object.geometry.boundingBox != undefined) {\n                bb = object.geometry.boundingBox;\n            } else {\n                return;\n            }\n\n            var points = [\n                new THREE.Vector3(),\n                new THREE.Vector3(),\n                new THREE.Vector3(),\n                new THREE.Vector3(),\n                new THREE.Vector3(),\n                new THREE.Vector3(),\n                new THREE.Vector3(),\n                new THREE.Vector3(),\n                new THREE.Vector3(),\n            ];\n\n            points[0].set(bb.min.x, bb.min.y, bb.min.z); // 000\n            points[1].set(bb.min.x, bb.min.y, bb.max.z); // 001\n            points[2].set(bb.min.x, bb.max.y, bb.min.z); // 010\n            points[3].set(bb.min.x, bb.max.y, bb.max.z); // 011\n            points[4].set(bb.max.x, bb.min.y, bb.min.z); // 100\n            points[5].set(bb.max.x, bb.min.y, bb.max.z); // 101\n            points[6].set(bb.max.x, bb.max.y, bb.min.z); // 110\n            points[7].set(bb.max.x, bb.max.y, bb.max.z); // 111\n            points[8].set(\n                object.geometry.boundingSphere.center.x,\n                object.geometry.boundingSphere.center.y,\n                object.geometry.boundingSphere.center.z\n            ); //does it make sense to add this?\n\n            points.forEach((point) => {\n                point.applyMatrix4(object.matrixWorld); // Use world matrix for accurate projection\n                point.project(camera);\n            });\n\n            return points;\n        }\n        select() {\n            let selectedObjects = new Array();\n\n            const traverse = (children) => {\n                children.forEach((object) => {\n                    if (object.isGroup) {\n                        traverse(object.children);\n                    }\n\n                    if (object.layers.mask == 2 && object.visible) {\n                        //get the projected bounding points of the rectangle\n                        let boundingBoxPoints = this.getObjectBoundingBoxPoints(object)\n                        if (boundingBoxPoints != undefined) {\n                            for (var j = boundingBoxPoints.length; j--;) {\n                                //check if any of the points is part of the selection\n                                let point = boundingBoxPoints[j];\n                                if (\n                                    this.pointInRect(\n                                        point.x,\n                                        point.y,\n                                        this.start.x,\n                                        this.start.y,\n                                        this.end.x,\n                                        this.end.y\n                                    )\n                                ) {\n                                    //If even one point is inside of the selection, it's worth checking for all the vertices (points), otherwise not\n                                    if (object.geometry && object.geometry.points) {\n                                        for (var k = object.geometry.points.length; k--;) {\n                                            let p = new THREE.Vector3(\n                                                object.geometry.points[k].x,\n                                                object.geometry.points[k].y,\n                                                object.geometry.points[k].z\n                                            );\n                                            p.applyMatrix4(object.matrixWorld); // Use matrixWorld for nested objects\n                                            p.project(camera);\n\n                                            if (\n                                                this.pointInRect(\n                                                    p.x,\n                                                    p.y,\n                                                    this.start.x,\n                                                    this.start.y,\n                                                    this.end.x,\n                                                    this.end.y\n                                                )\n                                            ) {\n                                                selectedObjects.push(object);\n                                                return;\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                });\n            }\n            traverse(scene.children);\n            return selectedObjects;\n        }\n    },\n    selection: class {\n        constructor() {\n            this.selected = new Array();\n            this.undoRedoSelection = new Array();\n            this.undoRedoMatrix = undefined;\n            this.selector = new select.vertexSelection()\n            this.helper = undefined;\n            this.controls = undefined;\n            this.group;\n            this.raycaster = new THREE.Raycaster();\n            this.raycaster.params.Line.threshold = 0.1;\n            this.raycaster.layers.set(1);\n            this.color = \"red\";\n        }\n        start(tx, ty, cx, cy) {\n            this.raycaster.setFromCamera(new THREE.Vector2(tx, ty), camera);\n            try {\n                var intersectedObject = this.raycaster.intersectObjects(scene.children, true)[0].object;\n                this.selected.push(intersectedObject);\n            } catch (err) {\n                //console.log(err)\n                //expected error if nothing is found\n            }\n            this.selector.start.x = tx;\n            this.selector.start.y = ty;\n            this.selector.cssStart.x = cx;\n            this.selector.cssStart.y = cy;\n        }\n        move(cx, cy) {\n            if (this.selected.length == 0) {\n                console.log(cx, cy)\n            }\n        }\n        end(tx, ty) {\n            this.selector.end.x = tx;\n            this.selector.end.y = ty;\n            let objectsInRect = this.selector.select();\n\n            try {\n                objectsInRect.forEach((object) => {\n                    this.selected.push(object);\n                });\n            } catch (err) {\n                //console.log(err)\n            }\n\n            if (this.selected.length == 0) {\n                return\n            } else {\n                this.select(this.selected);\n            }\n            renderer.render(scene, camera)\n        }\n        select(selection, matrix) {\n\n            //this.undoRedoMatrix = undefined;\n\n            this.select_internal(selection, matrix)\n\n            let previouslySelected = this.undoRedoSelection;\n            //let originalMatrix = this.undoRedoMatrix;\n            this.selected.forEach(object => {\n                previouslySelected.push(object.uuid)\n            })\n\n            undoManager.add({\n                undo: function () {\n                    console.log(\"undoing select\")\n                    select.s.deselect();\n                    renderer.render(scene, camera);\n                },\n                redo: function () {\n                    console.log(\"redoing select\")\n                    let selection = [];\n                    previouslySelected.forEach(uuid => {\n                        selection.push(scene.getObjectByProperty(\n                            \"uuid\",\n                            uuid\n                        ))\n                    })\n                    select.s.select(selection);\n                    renderer.render(scene, camera);\n                }\n            });\n            undoRedoComponent.$.ctx.updateUi();\n\n            this.selected = new Array();\n        }\n        select_internal(selection, matrix) {\n            //selection can not be zero so it's either 1 or more than 1\n            //It's a single element\n            if (selection.length == 1) {\n                this.toggleSelectionColor(selection[0], true);\n                this.controls = new TransformControls(camera, document.getElementById(\"app\"));\n                this.controls.mode = select.transformMode;\n                this.controls.attach(selection[0]);\n                this.controls.addEventListener(\"mouseDown\", function () {\n                    startAnimating();\n                    var position = new THREE.Vector3();\n                    this.object.getWorldPosition(position);\n                    var quaternion = new THREE.Quaternion();\n                    this.object.getWorldQuaternion(quaternion);\n                    var scale = new THREE.Vector3();\n                    this.object.getWorldScale(scale);\n                    this.userData.startingTransform = {\n                        position: position,\n                        quaternion: quaternion,\n                        scale: scale\n                    }\n\n                    vm.$.ctx.setTransformToolbarDisplay(false);\n\n                })\n                this.controls.addEventListener(\"change\", function () {\n                    if (!loop) {\n                        select.s.helper.update();\n                        renderer.render(scene, camera);\n                    }\n                })\n                this.controls.addEventListener(\"objectChange\", function () {\n                    mirror.updateMirrorOf(this.object, scene);\n                    select.s.helper.update();\n                });\n                this.controls.addEventListener(\"mouseUp\", function () {\n                    stopAnimating();\n                    var endPosition = new THREE.Vector3();\n                    this.object.getWorldPosition(endPosition);\n                    var endQuaternion = new THREE.Quaternion();\n                    this.object.getWorldQuaternion(endQuaternion);\n                    var endScale = new THREE.Vector3();\n                    this.object.getWorldScale(endScale);\n\n                    let startPosition = this.userData.startingTransform.position;\n                    let startQuaternion = this.userData.startingTransform.quaternion;\n                    let startScale = this.userData.startingTransform.scale;\n\n                    if (!startPosition.equals(endPosition) || !startQuaternion.equals(endQuaternion) || !startScale.equals(endScale)) {\n                        undoManager.add({\n                            undo: function () {\n                                select.s.controls.object.position.copy(startPosition);\n                                select.s.controls.object.quaternion.copy(startQuaternion);\n                                select.s.controls.object.scale.copy(startScale);\n                                select.s.helper.update();\n                                vm.$.ctx.setTransformToolbarDisplay(true)\n                                let transfromToolbarPosition = select.s.calculateTransfromToolbarPosition();\n                                vm.$.ctx.setTransformToolbarPosition({\n                                    left: transfromToolbarPosition.x,\n                                    top: transfromToolbarPosition.y,\n                                    location: transfromToolbarPosition.location,\n                                })\n                                select.s.helper.update();\n                                renderer.render(scene, camera);\n                            },\n                            redo: function () {\n                                select.s.controls.object.position.copy(endPosition);\n                                select.s.controls.object.quaternion.copy(endQuaternion);\n                                select.s.controls.object.scale.copy(endScale)\n                                select.s.helper.update();\n                                vm.$.ctx.setTransformToolbarDisplay(true)\n                                let transfromToolbarPosition = select.s.calculateTransfromToolbarPosition();\n                                vm.$.ctx.setTransformToolbarPosition({\n                                    left: transfromToolbarPosition.x,\n                                    top: transfromToolbarPosition.y,\n                                    location: transfromToolbarPosition.location,\n                                })\n                                select.s.helper.update();\n                                renderer.render(scene, camera);\n                            }\n                        });\n                    }\n\n                    vm.$.ctx.setTransformToolbarDisplay(true);\n                    let position = select.s.calculateTransfromToolbarPosition();\n                    vm.$.ctx.setTransformToolbarPosition({\n                        left: position.x,\n                        top: position.y,\n                        location: position.location,\n                    })\n                    select.s.helper.update();\n\n                    renderer.render(scene, camera);\n                })\n                this.helper = new THREE.BoxHelper(\n                    selection[0],\n                    new THREE.Color(this.color)\n                );\n                scene.add(this.controls);\n                scene.add(this.helper);\n                this.helper.geometry.computeBoundingBox();\n                this.helper.update();\n\n                vm.$.ctx.setTransformToolbarDisplay(true)\n                let position = this.calculateTransfromToolbarPosition();\n                vm.$.ctx.setTransformToolbarPosition({\n                    left: position.x,\n                    top: position.y,\n                    location: position.location,\n                })\n            }\n            //It's a group\n            else {\n                this.group = new THREE.Group();\n                scene.add(this.group);\n                //we pass a matrix into the selection only to restore the group matrix properly on undo. This way worldTransformations can be applied in referse efficiently \n                if (matrix) {\n                    this.group.applyMatrix4(matrix);\n                    this.undoRedoMatrix = this.group.matrix\n                } else {\n                    this.undoRedoMatrix = this.group.matrix\n                }\n                //calculate where is the center for the selected objects so we can set the center of the group before we attach objects to it;\n                var center = new THREE.Vector3();\n                selection.forEach((obj) => {\n                    this.toggleSelectionColor(obj, true);\n                    center.add(obj.position);\n                });\n                center.divideScalar(selection.length);\n                this.group.position.set(center.x, center.y, center.z);\n                //Clone all the elements in the selection to the temporary groups\n                selection.forEach((element) => {\n                    var clone = element.clone();\n                    scene.add(clone);\n                    this.group.attach(clone);\n                    clone.userData.uuid = element.uuid;\n                    clone.visible = false;\n                });\n                this.controls = new TransformControls(camera, document.getElementById(\"app\"));\n                this.controls.mode = select.transformMode;\n                this.controls.attach(this.group);\n                this.controls.addEventListener(\"mouseDown\", function () {\n                    startAnimating();\n                    var position = new THREE.Vector3();\n                    this.object.getWorldPosition(position);\n                    var quaternion = new THREE.Quaternion();\n                    this.object.getWorldQuaternion(quaternion);\n                    var scale = new THREE.Vector3();\n                    this.object.getWorldScale(scale);\n\n                    this.userData.startingTransform = {\n                        position: position,\n                        quaternion: quaternion,\n                        scale: scale\n                    }\n\n                    vm.$.ctx.setTransformToolbarDisplay(false);\n\n                })\n                this.controls.addEventListener(\"change\", function () {\n                    if (!loop) {\n                        select.s.helper.update();\n                        renderer.render(scene, camera);\n                    }\n                })\n                this.controls.addEventListener(\"objectChange\", function () {\n                    select.s.helper.update();\n                    this.object.children.forEach((obj) => {\n                        var position = new THREE.Vector3();\n                        obj.getWorldPosition(position);\n                        var quaternion = new THREE.Quaternion();\n                        obj.getWorldQuaternion(quaternion);\n                        var scale = new THREE.Vector3();\n                        obj.getWorldScale(scale);\n                        var selectedObj = scene.getObjectByProperty(\"uuid\", obj.userData.uuid);\n                        selectedObj.position.copy(position);\n                        selectedObj.quaternion.copy(quaternion);\n                        selectedObj.scale.copy(scale);\n                        mirror.updateMirrorOf(selectedObj, scene);\n                    });\n                });\n                this.controls.addEventListener(\"mouseUp\", function () {\n                    stopAnimating();\n\n                    var endPosition = new THREE.Vector3();\n                    this.object.getWorldPosition(endPosition);\n                    var endQuaternion = new THREE.Quaternion();\n                    this.object.getWorldQuaternion(endQuaternion);\n                    var endScale = new THREE.Vector3();\n                    this.object.getWorldScale(endScale);\n\n                    let startPosition = this.userData.startingTransform.position;\n                    let startQuaternion = this.userData.startingTransform.quaternion;\n                    let startScale = this.userData.startingTransform.scale;\n\n                    var delta = endQuaternion.clone().invert();\n                    delta.multiply(startQuaternion);\n\n                    if (!startPosition.equals(endPosition) || !startQuaternion.equals(endQuaternion) || !startScale.equals(endScale)) {\n\n                        //There is a problem when we are coming back from a deselect because the object position, scale, quaternion is reset. I think it's possible to adjust these to be deltas\n                        undoManager.add({\n                            undo: function () {\n\n                                select.s.controls.object.position.copy(startPosition);\n                                select.s.controls.object.quaternion.copy(startQuaternion);\n                                select.s.controls.object.scale.copy(startScale);\n\n                                select.s.helper.update();\n\n                                vm.$.ctx.setTransformToolbarDisplay(true)\n                                let transfromToolbarPosition = select.s.calculateTransfromToolbarPosition();\n                                vm.$.ctx.setTransformToolbarPosition({\n                                    left: transfromToolbarPosition.x,\n                                    top: transfromToolbarPosition.y,\n                                    location: transfromToolbarPosition.location,\n                                })\n\n                                select.s.helper.update();\n\n                                select.s.controls.object.children.forEach((obj) => {\n                                    var position = new THREE.Vector3();\n                                    obj.getWorldPosition(position);\n                                    var quaternion = new THREE.Quaternion();\n                                    obj.getWorldQuaternion(quaternion);\n                                    var scale = new THREE.Vector3();\n                                    obj.getWorldScale(scale);\n                                    var selectedObj = scene.getObjectByProperty(\"uuid\", obj.userData.uuid);\n                                    selectedObj.position.copy(position);\n                                    selectedObj.quaternion.copy(quaternion);\n                                    selectedObj.scale.copy(scale);\n                                    mirror.updateMirrorOf(selectedObj, scene);\n                                });\n\n                                renderer.render(scene, camera);\n                            },\n                            redo: function () {\n                                select.s.controls.object.position.copy(endPosition);\n                                select.s.controls.object.quaternion.copy(endQuaternion);\n                                select.s.controls.object.scale.copy(endScale)\n\n                                select.s.helper.update();\n\n                                vm.$.ctx.setTransformToolbarDisplay(true)\n                                let transfromToolbarPosition = select.s.calculateTransfromToolbarPosition();\n                                vm.$.ctx.setTransformToolbarPosition({\n                                    left: transfromToolbarPosition.x,\n                                    top: transfromToolbarPosition.y,\n                                    location: transfromToolbarPosition.location,\n                                })\n\n                                select.s.helper.update();\n\n                                select.s.controls.object.children.forEach((obj) => {\n                                    var position = new THREE.Vector3();\n                                    obj.getWorldPosition(position);\n                                    var quaternion = new THREE.Quaternion();\n                                    obj.getWorldQuaternion(quaternion);\n                                    var scale = new THREE.Vector3();\n                                    obj.getWorldScale(scale);\n                                    var selectedObj = scene.getObjectByProperty(\"uuid\", obj.userData.uuid);\n                                    selectedObj.position.copy(position);\n                                    selectedObj.quaternion.copy(quaternion);\n                                    selectedObj.scale.copy(scale);\n                                    mirror.updateMirrorOf(selectedObj, scene);\n                                });\n\n                                renderer.render(scene, camera);\n                            }\n                        });\n                    }\n\n                    vm.$.ctx.setTransformToolbarDisplay(true)\n                    let transfromToolbarPosition = select.s.calculateTransfromToolbarPosition();\n                    vm.$.ctx.setTransformToolbarPosition({\n                        left: transfromToolbarPosition.x,\n                        top: transfromToolbarPosition.y,\n                        location: transfromToolbarPosition.location,\n                    })\n                    select.s.helper.update();\n\n                    renderer.render(scene, camera);\n                })\n                scene.add(this.controls);\n                this.helper = new THREE.BoxHelper(\n                    this.group,\n                    new THREE.Color(this.color)\n                );\n                scene.add(this.helper);\n                this.helper.geometry.computeBoundingBox();\n                this.helper.update();\n            }\n\n            vm.$.ctx.setTransformToolbarDisplay(true)\n            let position = this.calculateTransfromToolbarPosition();\n            vm.$.ctx.setTransformToolbarPosition({\n                left: position.x,\n                top: position.y,\n                location: position.location,\n            })\n            this.helper.update();\n            renderer.render(scene, camera)\n\n        }\n        toggleSelectionColor(object, bool) {\n            if (bool) {\n                object.material.color = new THREE.Color(this.color);\n            } else {\n                object.userData.stroke != false ? object.material.color = new THREE.Color(object.userData.stroke.color) : '';\n            }\n        }\n        deselect() {\n            if (this.controls != undefined) {\n\n                this.deselect_internal();\n\n                let previouslySelected = this.undoRedoSelection;\n                this.selected.forEach(object => {\n                    previouslySelected.push(object.uuid)\n                })\n                let previousMatrix = this.undoRedoMatrix;\n\n                //TODO: deselect should update setTransformationToolbar on its own\n                undoManager.add({\n                    undo: function () {\n                        console.log(\"undoing deselect\")\n                        let selection = [];\n                        previouslySelected.forEach(uuid => {\n                            selection.push(scene.getObjectByProperty(\n                                \"uuid\",\n                                uuid\n                            ))\n                        })\n                        select.s = new select.selection();\n                        select.s.select(selection, previousMatrix);\n                        renderer.render(scene, camera);\n                    },\n                    redo: function () {\n\n                        console.log(\"redo deselect\")\n\n                        select.s.deselect()\n                        renderer.render(scene, camera);\n                    }\n                });\n\n                undoRedoComponent.$.ctx.updateUi();\n\n                renderer.render(scene, camera)\n            }\n        }\n        deselect_internal() {\n            switch (true) {\n                case this.controls.object.type == \"Mesh\":\n                    this.undoRedoSelection = new Array();\n                    this.undoRedoSelection.push(this.controls.object.uuid); //for undo\n                    this.toggleSelectionColor(this.controls.object, false);\n                    //clear references to controls and helper\n                    scene.remove(this.controls);\n                    scene.remove(this.helper);\n                    this.controls.detach();\n                    this.controls.dispose();\n                    this.controls = undefined;\n                    this.helper = undefined;\n                    break;\n                case this.controls.object.type == \"Group\":\n                    this.undoRedoSelection = new Array();\n                    this.undoRedoMatrix = this.controls.object.matrix;\n                    this.controls.object.children.forEach;\n                    for (var i = 0; i < this.controls.object.children.length; i++) {\n                        this.undoRedoSelection.push(this.controls.object.children[i].userData.uuid)\n                        this.toggleSelectionColor(this.controls.object.children[i], false);\n                    }\n                    scene.remove(this.group);\n                    //clear references to controls and helper\n                    scene.remove(this.controls);\n                    scene.remove(this.helper);\n                    this.controls.detach();\n                    this.controls.dispose();\n                    this.controls = undefined;\n                    this.helper = undefined;\n                    break;\n                default:\n                //do nothing, nothing is selected\n            }\n            vm.$.ctx.setTransformToolbarDisplay(false)\n        }\n        duplicate(offset) {\n            let duplicateArray = new Array();\n            let previousSelectedArray = new Array();\n            let transformMatrix = undefined;\n\n            switch (true) {\n                case this.controls.object.type == \"Mesh\":\n                    previousSelectedArray.push(this.controls.object.uuid);\n                    var duplicate = this.controls.object.clone();\n\n                    if (offset) {\n                        duplicate.position.add(offset);\n                    }\n\n                    console.log(duplicate.userData.stroke)\n                    var duplicateMaterial = new MeshLineMaterial({\n                        lineWidth: duplicate.userData.stroke.show_stroke ? duplicate.userData.stroke.lineWidth : 0.005,\n                        sizeAttenuation: 1,\n                        color: duplicate.userData.stroke.show_stroke ? duplicate.userData.stroke.color : 0xFFFFFF,\n                        transparent: duplicate.userData.stroke.show_stroke ? false : true,\n                        opacity: duplicate.userData.stroke.show_stroke ? 1 : 0,\n                        side: THREE.DoubleSide,\n                        fog: false,\n                    });\n                    duplicate.material = duplicateMaterial;\n                    scene.add(duplicate);\n                    duplicate.raycast = MeshLineRaycast;\n                    if (duplicate.userData.mirrorAxis) {\n                        mirror.object(duplicate, duplicate.userData.mirrorAxis, scene);\n                    }\n                    duplicateArray.push(duplicate);\n                    this.deselect_internal();\n                    this.select_internal(duplicateArray);\n                    break;\n                case this.controls.object.type == \"Group\":\n                    transformMatrix = this.controls.object.matrix;\n\n                    this.controls.object.children.forEach((object) => {\n                        //Here we are picking the original hidden object that we use for working around the grouping and ungrouping issues\n                        let originalObject = scene.getObjectByProperty(\"uuid\", object.userData.uuid);\n                        previousSelectedArray.push(object.userData.uuid);\n\n                        var duplicate = originalObject.clone();\n                        if (offset) {\n                            // If it's a group, we might want to offset the whole group or each item.\n                            // Since we are duplicating items and adding them to scene individually (temporarily),\n                            // we should apply offset to their position relative to world?\n                            // Wait, the logic below deselects and re-selects the duplicates, forming a NEW group.\n                            // The originalObject is in world space.\n\n                            // If we apply offset to each object:\n                            // We need to verify if originalObject has transforms applied.\n\n                            // A simpler way for group duplication provided here is:\n                            // The current group has a transform. \n                            // The duplication logic clones original objects.\n\n                            // If we want to offset the RESULT, we should apply offset to the duplicate's position.\n                            duplicate.position.add(offset);\n                        }\n\n                        duplicate.layers.set(1);\n                        var duplicateMaterial = new MeshLineMaterial({\n                            lineWidth: duplicate.userData.stroke.show_stroke ? duplicate.userData.stroke.lineWidth : 0.005,\n                            sizeAttenuation: 1,\n                            color: duplicate.userData.stroke.show_stroke ? duplicate.userData.stroke.color : 0xFFFFFF,\n                            transparent: duplicate.userData.stroke.show_stroke ? false : true,\n                            opacity: duplicate.userData.stroke.show_stroke ? 1 : 0,\n                            side: THREE.DoubleSide,\n                            fog: false,\n                        });\n                        duplicate.material = duplicateMaterial;\n                        duplicate.raycast = MeshLineRaycast;\n                        duplicateArray.push(duplicate);\n                        scene.add(duplicate);\n                        if (duplicate.userData.mirrorAxis) {\n                            mirror.object(duplicate, duplicate.userData.mirrorAxis, scene);\n                        }\n                    });\n                    //deselect selected group\n                    this.deselect_internal();\n\n                    this.selected = duplicateArray;\n                    this.selected.forEach((element) => {\n                        this.toggleSelectionColor(element, true);\n                    });\n                    this.select_internal(this.selected);\n                    this.helper.update();\n                    mirror.updateMirrorOf(this.group, scene);\n                    break;\n                default:\n                //do nothing, nothing is selected\n            }\n\n            this.undoRedoSelection = new Array();\n            renderer.render(scene, camera)\n\n            undoManager.add({\n                undo: function () {\n                    console.log(\"undoing duplicate\")\n                    //deselect the current selection\n                    select.s.deselect_internal();\n                    duplicateArray.forEach(object => {\n                        erase.deleteObject(object)\n                    })\n                    let selection = [];\n                    previousSelectedArray.forEach(uuid => {\n                        selection.push(scene.getObjectByProperty(\n                            \"uuid\",\n                            uuid\n                        ))\n                    })\n                    select.s = new select.selection();\n                    select.s.select_internal(selection, transformMatrix);\n                    renderer.render(scene, camera);\n                },\n                redo: function () {\n\n                    console.log(\"redoing duplicate\")\n\n                    console.log(\"redoing duplicate\")\n\n                    select.s.duplicate(offset);\n                    renderer.render(scene, camera);\n                }\n            });\n        }\n        calculateTransfromToolbarPosition() {\n\n            //find the center \n            let position = this.helper.geometry.boundingSphere.center;\n            position = position.project(camera);\n\n            //find the min and max vertical distance\n            let buffArray = this.helper.geometry.attributes.position.array;\n            let vectors = [];\n            for (let i = 0; i < buffArray.length; i = i + 3) {\n                vectors.push(new THREE.Vector3().fromArray(buffArray, i));\n            }\n            let vectorsY = [];\n            vectors.forEach(v => {\n                v.project(camera);\n                let y = (-(v.y - 1) * window.innerHeight) / 2;\n                vectorsY.push(y)\n            });\n            let minY = Math.min(...vectorsY);\n            let maxY = Math.max(...vectorsY);\n\n            if (position.y < 120) {\n                location = \"below\";\n                position.y = (window.innerHeight / 2) + 60; // Just a fallback if projected y is weird?\n                // Actually the logic uses CSS top.\n                // Let's use simpler logic.\n            }\n\n            if (\n                this.controls && this.controls.children[0] && this.controls.children[0].gizmo && this.controls.children[0].gizmo.translate.children[5].visible\n            ) {\n                position.y = maxY;\n                location = \"below\";\n            } else {\n                position.y = minY;\n                location = \"above\";\n            }\n\n            return {\n                x: ((position.x + 1) * window.innerWidth) / 2,\n                y: position.y,\n                location: location\n            }\n        }\n        cancel() {\n            this.s = undefined;\n            return;\n        }\n    },\n    transforming: function () {\n        if (this.s != undefined) {\n            if (this.s.controls === undefined) {\n                return false\n            } else {\n                if (this.s.controls.axis == null && this.s.controls.dragging == false && this.dragged == false) {\n                    return false\n                } else {\n                    return true\n                }\n            }\n        } else {\n            return false\n        }\n    },\n    onStart: function (tx, ty, cx, cy) {\n        if (this.transforming() == false) {\n            if (this.s != undefined) {\n                this.s.deselect();\n            }\n            this.s = new this.selection();\n            this.s.start(tx, ty, cx, cy)\n        }\n\n    },\n    onMove: function (cx, cy) {\n        if (this.transforming() == false) {\n            this.s.move(cx, cy)\n        } else {\n            this.dragged = true;\n        }\n    },\n    onEnd: function (tx, ty) {\n        if (this.transforming() == false) {\n            this.s.end(tx, ty);\n        }\n        this.dragged = false;\n    },\n    onCancel: function () {\n        this.s ? this.s.cancel() : null;\n    }\n}\n\nexport { select }","import { render } from \"./Input.vue?vue&type=template&id=404cb6ae\"\nimport script from \"./Input.vue?vue&type=script&lang=js\"\nexport * from \"./Input.vue?vue&type=script&lang=js\"\n\nimport \"./Input.vue?vue&type=style&index=0&id=404cb6ae&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\UNREAL\\\\Downloads\\\\3d\\\\Original\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <draggable-window ref=\"win\" title=\"Tools\" :initialX=\"initialX || (window.innerWidth / 2 - 300)\" :initialY=\"initialY || 12\" :reopenTrigger=\"reopenTrigger\" :is-open=\"isOpen\" @close=\"$emit('close')\">\n    <div class=\"tools-container\">\n      <!-- Drawing Tools -->\n      <div class=\"tool-group\">\n        <button \n          class=\"tool-btn\"\n          :class=\"{ active: tool === 'draw' }\"\n          @click=\"setTool('draw', true)\"\n          :title=\"'Draw'\"\n        >\n          <img src=\"@/assets/icons/draw.svg\" alt=\"Draw\" />\n          <span class=\"tooltip\">Draw</span>\n        </button>\n        \n        <button \n          class=\"tool-btn\"\n          :class=\"{ active: tool === 'erase' }\"\n          @click=\"setTool('erase', true)\"\n          :title=\"'Erase'\"\n        >\n          <img src=\"@/assets/icons/erase.svg\" alt=\"Erase\" />\n          <span class=\"tooltip\">Erase</span>\n        </button>\n      </div>\n\n      <div class=\"separator\"></div>\n\n      <!-- Brush Presets -->\n      <div class=\"tool-group brushes\">\n        <button \n          v-for=\"brush in brushes\" \n          :key=\"brush.name\"\n          class=\"tool-btn brush-btn\"\n          @click=\"selectPreset(brush)\"\n          :title=\"brush.name\"\n        >\n          <span class=\"brush-emoji\">{{ brush.icon }}</span>\n          <span class=\"tooltip\">{{ brush.name }}</span>\n        </button>\n      </div>\n\n      <div class=\"separator\"></div>\n\n      <!-- Properties Toggle -->\n      <button \n        class=\"tool-btn\"\n        @click=\"toggleProperties\"\n        title=\"Properties\"\n      >\n        <span class=\"properties-icon\"></span>\n        <span class=\"tooltip\">Properties</span>\n      </button>\n\n      <!-- Scene Toggle -->\n      <button \n        class=\"tool-btn\"\n        @click=\"toggleScene\"\n        title=\"Scene\"\n      >\n        <span class=\"properties-icon\"></span>\n        <span class=\"tooltip\">Scene</span>\n      </button>\n\n      <!-- 2D Shapes Toggle -->\n      <button \n        class=\"tool-btn\"\n        @click=\"$emit('toggle-2d-shapes')\"\n        title=\"2D Shapes\"\n      >\n        <span class=\"properties-icon\"></span>\n        <span class=\"tooltip\">Shapes</span>\n      </button>\n    </div>\n  </draggable-window>\n</template>\n\n<script>\nimport DraggableWindow from \"./DraggableWindow.vue\";\n\nexport default {\n  name: \"ToolSelector\",\n  components: { DraggableWindow },\n  data() {\n    return {\n      tool: undefined,\n      window: window,\n      brushes: [\n        { \n          name: \"Pencil\", \n          icon: \"\", \n          settings: { strokeWidth: 2, strokeColor: { r: 50, g: 50, b: 50 }, stroke: true, fill: false }\n        },\n        { \n          name: \"Pen\", \n          icon: \"\", \n          settings: { strokeWidth: 5, strokeColor: { r: 0, g: 0, b: 0 }, stroke: true, fill: false }\n        },\n        { \n          name: \"Marker\", \n          icon: \"\", \n          settings: { strokeWidth: 20, strokeColor: { r: 255, g: 0, b: 0 }, stroke: true, fill: false }\n        },\n        { \n          name: \"Dashed Pencil\", \n          icon: \"\", \n          settings: { \n            strokeWidth: 2, \n            strokeColor: { r: 50, g: 50, b: 50 }, \n            stroke: true, \n            fill: false,\n            dashArray: 0.1,\n            dashRatio: 0.5,\n          }\n        },\n        { \n          name: \"Highlighter\", \n          icon: \"\", \n          settings: { \n            strokeWidth: 30, \n            strokeColor: { r: 255, g: 255, b: 0 }, \n            stroke: true, \n            fill: false,\n            opacity: 0.3,\n            transparent: true,\n            depthTest: false,\n            alphaTest: 0.01,\n          }\n        },\n        { \n          name: \"Ghost Ink\", \n          icon: \"\", \n          settings: { \n            strokeWidth: 4, \n            strokeColor: { r: 200, g: 200, b: 255 }, \n            stroke: true, \n            fill: false,\n            opacity: 0.3,\n            transparent: true,\n            alphaTest: 0.0,\n          }\n        },\n        { \n          name: \"Cinta\", \n          icon: \"\", \n          settings: { \n            strokeWidth: 2, \n            strokeColor: { r: 255, g: 0, b: 100 }, \n            fillColor: { r: 255, g: 100, b: 150 },\n            stroke: true, \n            fill: true,\n          }\n        }\n      ]\n    };\n  },\n  props: {\n    selectedTool: String,\n    reopenTrigger: Number,\n    isOpen: Boolean,\n    initialX: Number,\n    initialY: Number,\n  },\n  emits: [\"selected-tool\", \"set-preset\", \"toggle-properties\", \"toggle-scene\", \"toggle-2d-shapes\", \"close\"],\n  watch: {\n    selectedTool: function (val) {\n      this.tool = val;\n    },\n  },\n  methods: {\n    getPosition() {\n       return { \n         x: this.$refs.win.currentX, \n         y: this.$refs.win.currentY \n       };\n    },\n    setTool: function (val, emit) {\n      this.tool = val;\n      if (emit) {\n        this.$emit(\"selected-tool\", val);\n      }\n    },\n    selectPreset: function(brush) {\n      // Ensure we're in draw mode when selecting a brush\n      this.setTool('draw', true);\n      this.$emit(\"set-preset\", brush.settings);\n    },\n    toggleProperties: function() {\n      this.$emit(\"toggle-properties\");\n    },\n    toggleScene: function() {\n      this.$emit(\"toggle-scene\");\n    },\n  },\n  mounted() {\n    this.setTool(this.selectedTool);\n  },\n};\n</script>\n\n<style scoped>\n.tools-container {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.tool-group {\n  display: flex;\n  gap: 4px;\n}\n\n.tool-group.brushes {\n  gap: 4px;\n}\n\n.separator {\n  width: 1px;\n  height: 32px;\n  background-color: rgba(255, 255, 255, 0.1);\n}\n\n.tool-btn {\n  position: relative;\n  width: 40px;\n  height: 40px;\n  background: transparent;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 8px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s;\n  padding: 0;\n}\n\n.tool-btn:hover {\n  background: rgba(255, 255, 255, 0.1);\n  border-color: rgba(255, 255, 255, 0.2);\n}\n\n.tool-btn.active {\n  background: rgba(255, 255, 255, 0.2);\n  border-color: rgba(255, 255, 255, 0.3);\n  box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.1);\n}\n\n.tool-btn img {\n  width: 24px;\n  height: 24px;\n  filter: brightness(0) invert(1);\n}\n\n.brush-emoji {\n  font-size: 20px;\n  line-height: 1;\n}\n\n.properties-icon {\n  font-size: 20px;\n  line-height: 1;\n}\n\n/* Tooltip */\n.tooltip {\n  position: absolute;\n  bottom: -32px;\n  left: 50%;\n  transform: translateX(-50%);\n  background: rgba(0, 0, 0, 0.9);\n  color: white;\n  padding: 4px 8px;\n  border-radius: 4px;\n  font-size: 11px;\n  white-space: nowrap;\n  pointer-events: none;\n  opacity: 0;\n  transition: opacity 0.2s;\n  z-index: 1000;\n}\n\n.tool-btn:hover .tooltip {\n  opacity: 1;\n}\n\n/* Arrow for tooltip */\n.tooltip::before {\n  content: '';\n  position: absolute;\n  top: -4px;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 0;\n  height: 0;\n  border-left: 4px solid transparent;\n  border-right: 4px solid transparent;\n  border-bottom: 4px solid rgba(0, 0, 0, 0.9);\n}\n</style>","import { render } from \"./ToolSelector.vue?vue&type=template&id=2d3197f1&scoped=true\"\nimport script from \"./ToolSelector.vue?vue&type=script&lang=js\"\nexport * from \"./ToolSelector.vue?vue&type=script&lang=js\"\n\nimport \"./ToolSelector.vue?vue&type=style&index=0&id=2d3197f1&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\UNREAL\\\\Downloads\\\\3d\\\\Original\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2d3197f1\"]])\n\nexport default __exports__","<template>\n  <draggable-window \n    title=\"View\" \n    :initialX=\"window.innerWidth - 170\"   \n    :initialY=\"12\"\n    :reopenTrigger=\"reopenTrigger\"\n    :is-open=\"isOpen\"\n    @close=\"$emit('close')\"\n  >\n    <div class=\"viewport-controls\">\n      <div\n        @touchstart=\"handleInput\"\n        @touchmove=\"handleInput\"\n        @touchend=\"handleInput\"\n        @mousedown=\"handleInput\"\n        @mousemove=\"handleInput\"\n        @mouseup=\"handleInput\"\n        class=\"viewport-cube\"\n      >\n        <canvas id=\"viewportCanvas\"></canvas>\n      </div>\n      \n      <button \n        class=\"reset-btn\"\n        @click=\"resetCamera()\"\n        @touchstart=\"resetCamera()\"\n        :disabled=\"cameraResetDisabled\"\n      >\n        <img src=\"@/assets/icons/reset.svg\" alt=\"Reset camera\" />\n        <span>Reset Camera</span>\n      </button>\n    </div>\n  </draggable-window>\n</template>\n\n<script>\nimport * as THREE from \"three\";\nimport { cameraControls } from \"../App.vue\";\nimport DraggableWindow from \"./DraggableWindow.vue\";\n\nlet viewPortRenderer, viewPortScene, viewPortCamera;\n\nexport default {\n  name: \"ViewportCube\",\n  components: { DraggableWindow },\n  props: {\n    quaternion: Array,\n    cameraResetDisabled: Boolean,\n    reopenTrigger: Number,\n    isOpen: Boolean,\n  },\n  emits: [\"close\"],\n  data() {\n    return {\n      window: window,\n      mouse: {\n        down: false,\n        tx: 0,\n        ty: 0,\n        cx: 0,\n        cy: 0,\n        dragStartPosition: new THREE.Vector2(),\n        lastDragPosition: new THREE.Vector2(),\n        force: 0,\n      },\n    };\n  },\n  methods: {\n    updateMouseCoordinates: function (event) {\n      const canvas = document.getElementById(\"viewportCanvas\");\n      const rect = canvas.getBoundingClientRect();\n      \n      if (event.touches) {\n        const touch = event.changedTouches[0];\n        this.mouse.tx = ((touch.clientX - rect.left) / 150) * 2 - 1;\n        this.mouse.ty = -((touch.clientY - rect.top) / 150) * 2 + 1;\n        this.mouse.cx = touch.clientX - rect.left;\n        this.mouse.cy = touch.clientY - rect.top;\n\n        if (event.touches[0] && event.touches[0][\"force\"] !== undefined) {\n          this.mouse.force = event.touches[0][\"force\"];\n        } else {\n          this.mouse.force = 0;\n        }\n      } else {\n        if (event.button == 0) {\n          this.mouse.tx = ((event.clientX - rect.left) / 150) * 2 - 1;\n          this.mouse.ty = -((event.clientY - rect.top) / 150) * 2 + 1;\n          this.mouse.cx = event.clientX - rect.left;\n          this.mouse.cy = event.clientY - rect.top;\n        }\n      }\n    },\n    render: function () {\n      viewPortRenderer.render(viewPortScene, viewPortCamera);\n    },\n    init: function () {\n      viewPortRenderer = new THREE.WebGLRenderer({\n        antialias: true,\n        alpha: true,\n        canvas: document.getElementById(\"viewportCanvas\"),\n      });\n      viewPortRenderer.setPixelRatio(window.devicePixelRatio);\n      viewPortRenderer.setSize(150, 150);\n\n      viewPortCamera = new THREE.OrthographicCamera();\n      viewPortCamera.position.set(0, 0, 10);\n      viewPortCamera.zoom = 160;\n\n      viewPortScene = new THREE.Scene();\n\n      this.addViewPortCube();\n\n      this.render();\n    },\n    addViewPortCube: function () {\n      let right = new THREE.TextureLoader().load(\n        require(\"@/assets/viewport/right.png\")\n      );\n      let left = new THREE.TextureLoader().load(\n        require(\"@/assets/viewport/left.png\")\n      );\n      let top = new THREE.TextureLoader().load(\n        require(\"@/assets/viewport/top.png\")\n      );\n      let bottom = new THREE.TextureLoader().load(\n        require(\"@/assets/viewport/bottom.png\")\n      );\n      let front = new THREE.TextureLoader().load(\n        require(\"@/assets/viewport/front.png\")\n      );\n      let back = new THREE.TextureLoader().load(\n        require(\"@/assets/viewport/back.png\"),\n        () => {\n          this.render();\n        }\n      );\n\n      const materials = [\n        new THREE.MeshBasicMaterial({ map: right }),\n        new THREE.MeshBasicMaterial({ map: left }),\n        new THREE.MeshBasicMaterial({ map: top }),\n        new THREE.MeshBasicMaterial({ map: bottom }),\n        new THREE.MeshBasicMaterial({ map: front }),\n        new THREE.MeshBasicMaterial({ map: back }),\n      ];\n\n      const geometry = new THREE.BoxGeometry(1, 1, 1);\n      const cube = new THREE.Mesh(geometry, materials);\n      viewPortScene.add(cube);\n    },\n    rotate: function (deltaX, deltaY) {\n      let w = 150;\n      var PI_2 = Math.PI * 2;\n      var speed = 0.5;\n      var theta = (PI_2 * speed * deltaX) / w;\n      var phi = (PI_2 * speed * deltaY) / w;\n      cameraControls.rotate(theta, phi, false);\n    },\n    evalFaceIndexAndRepositionCamera: function (index) {\n      let target = new THREE.Vector3();\n      target = cameraControls.getTarget(target);\n      let adj = 0.0001;\n\n      let lookAt = function (x, y, z) {\n        cameraControls.dampingFactor = 0.5;\n        cameraControls.enabled = false;\n        cameraControls.setLookAt(x, y, z, target.x, target.y, target.z, true);\n        cameraControls.enabled = true;\n        setTimeout(() => {\n          cameraControls.dampingFactor = 20;\n        }, 100);\n      };\n\n      switch (index) {\n        case 0:\n        case 1:\n          lookAt(target.x + 10, target.y + adj, target.z + adj);\n          break;\n        case 2:\n        case 3:\n          lookAt(target.x - 10, target.y + adj, target.z + adj);\n          break;\n        case 4:\n        case 5:\n          lookAt(target.x, target.y + 10, target.z + adj);\n          break;\n        case 6:\n        case 7:\n          lookAt(target.x, target.y - 10, target.z + adj);\n          break;\n        case 8:\n        case 9:\n          lookAt(target.x + adj, target.y, target.z + 10);\n          break;\n        case 10:\n        case 11:\n          lookAt(target.x + adj, target.y, target.z - 10);\n          break;\n        default:\n      }\n    },\n    onTapStart: function () {\n      this.mouse.down = true;\n      this.mouse.dragStartPosition = new THREE.Vector2(\n        this.mouse.cx,\n        this.mouse.cy\n      );\n      this.mouse.lastDragPosition = new THREE.Vector2(\n        this.mouse.cx,\n        this.mouse.cy\n      );\n      document.addEventListener(\"mousemove\", this.handleInput);\n      document.addEventListener(\"mouseup\", this.handleInput);\n      document.addEventListener(\"touchmove\", this.handleInput);\n      document.addEventListener(\"touchend\", this.handleInput);\n    },\n    onTapMove: function () {\n      if (this.mouse.down) {\n        this.rotate(\n          this.mouse.lastDragPosition.x - this.mouse.cx,\n          this.mouse.lastDragPosition.y - this.mouse.cy\n        );\n        this.mouse.lastDragPosition = new THREE.Vector2(\n          this.mouse.cx,\n          this.mouse.cy\n        );\n      }\n    },\n    onTapEnd: function (raycaster) {\n      if (\n        this.mouse.dragStartPosition.distanceTo(this.mouse.lastDragPosition) < 5\n      ) {\n        raycaster.setFromCamera(\n          new THREE.Vector2(this.mouse.tx, this.mouse.ty),\n          viewPortCamera\n        );\n\n        try {\n          this.evalFaceIndexAndRepositionCamera(\n            raycaster.intersectObjects(viewPortScene.children)[0].faceIndex\n          );\n        } catch (error) {\n          //raycaster didn't find anything\n        }\n      }\n      this.mouse.dragStartPosition = new THREE.Vector2();\n      this.mouse.lastDragPosition = new THREE.Vector2();\n      this.mouse.cx = 0;\n      this.mouse.cy = 0;\n      document.removeEventListener(\"mousemove\", this.handleInput);\n      document.removeEventListener(\"mouseup\", this.handleInput);\n      document.removeEventListener(\"touchmove\", this.handleInput);\n      document.removeEventListener(\"touchend\", this.handleInput);\n      this.mouse.down = false;\n    },\n    resetCamera: function () {\n      cameraControls.dampingFactor = 0.5;\n      cameraControls.enabled = false;\n      cameraControls.setLookAt(0, 0, 10, 0, 0, 0, true);\n      cameraControls.zoomTo(3, true);\n      setTimeout(() => {\n        cameraControls.dampingFactor = 20;\n        cameraControls.enabled = true;\n      }, 100);\n    },\n    handleInput: function (event) {\n      this.updateMouseCoordinates(event);\n      event.preventDefault();\n      let raycaster = new THREE.Raycaster();\n\n      switch (event.type) {\n        case \"mousedown\":\n        case \"touchstart\":\n          this.onTapStart();\n          break;\n        case \"mousemove\":\n        case \"touchmove\":\n          this.onTapMove();\n          break;\n        case \"touchend\":\n        case \"mouseup\":\n          this.onTapEnd(raycaster);\n          break;\n        default:\n      }\n    },\n  },\n  watch: {\n    quaternion: function (val) {\n      viewPortScene.setRotationFromQuaternion(\n        new THREE.Quaternion(val[0], val[1], val[2], val[3]).invert()\n      );\n      this.render();\n    },\n  },\n  mounted() {\n    this.init();\n    this.render();\n  },\n};\n</script>\n\n<style scoped>\n.viewport-controls {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  align-items: center;\n}\n\n.viewport-cube {\n  width: 150px;\n  height: 150px;\n  position: relative;\n  cursor: grab;\n}\n\n.viewport-cube:active {\n  cursor: grabbing;\n}\n\n#viewportCanvas {\n  width: 150px;\n  height: 150px;\n  background-color: rgba(0, 0, 0, 0);\n  border-radius: 8px;\n}\n\n.reset-btn {\n  background: transparent;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  color: white;\n  border-radius: 8px;\n  padding: 8px 12px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  transition: all 0.2s;\n  font-size: 0.9em;\n  width: 100%;\n  justify-content: center;\n}\n\n.reset-btn:hover:not(:disabled) {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.reset-btn:disabled {\n  opacity: 0.3;\n  cursor: not-allowed;\n}\n\n.reset-btn img {\n  width: 16px;\n  height: 16px;\n}\n</style>","import { render } from \"./ViewportCube.vue?vue&type=template&id=c6f5d5b0&scoped=true\"\nimport script from \"./ViewportCube.vue?vue&type=script&lang=js\"\nexport * from \"./ViewportCube.vue?vue&type=script&lang=js\"\n\nimport \"./ViewportCube.vue?vue&type=style&index=0&id=c6f5d5b0&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\UNREAL\\\\Downloads\\\\3d\\\\Original\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-c6f5d5b0\"]])\n\nexport default __exports__","<template>\n  <draggable-window \n    title=\"Properties\" \n    :initialX=\"12\" \n    :initialY=\"300\"\n    :visible=\"forceVisible || selectedTool == 'draw'\"\n    :reopenTrigger=\"reopenTrigger\"\n    :is-open=\"isOpen\"\n    @close=\"$emit('close')\"\n  >\n      <div class=\"panel\">\n        <line-sliders\n          mode=\"stroke\"\n          :active=\"stroke\"\n          @color=\"setStrokeColor\"\n          @active=\"setStrokeActive\"\n          @width=\"setStrokeWidth\"\n        />\n        \n        <div v-if=\"stroke\" class=\"extra-settings\">\n          <div class=\"section-title\">Brush Settings</div>\n          <!-- Shape -->\n          <div class=\"setting-row\">\n            <span>Shape</span>\n            <div class=\"ratio-buttons\">\n              <button class=\"ratio-btn\" :class=\"{ active: brushType === 'solid' }\" @click=\"brushType = 'solid'\">Solid</button>\n              <button class=\"ratio-btn\" :class=\"{ active: brushType === 'soft' }\" @click=\"brushType = 'soft'\">Soft</button>\n              <button class=\"ratio-btn\" :class=\"{ active: brushType === 'noise' }\" @click=\"brushType = 'noise'\">Sketch</button>\n            </div>\n          </div>\n\n\n\n          <!-- Taper -->\n           <div class=\"setting-row\">\n            <span>Taper</span>\n            <input type=\"range\" min=\"0\" max=\"20\" step=\"1\" v-model.number=\"taper\" />\n            <span class=\"value\">{{ taper }}</span>\n          </div>\n\n          <!-- Smoothing -->\n           <div class=\"setting-row\">\n            <span>Smooth</span>\n            <input type=\"range\" min=\"1\" max=\"20\" step=\"1\" v-model.number=\"smoothing\" />\n            <span class=\"value\">{{ smoothing }}</span>\n          </div>\n\n          <!-- Texture Scale -->\n          <div class=\"setting-row\" v-if=\"brushType !== 'solid' || brushMaterial !== 'standard'\">\n            <span>Tex Scale</span>\n            <input type=\"range\" min=\"0.1\" max=\"5\" step=\"0.1\" v-model.number=\"textureScale\" />\n            <span class=\"value\">{{ textureScale }}</span>\n          </div>\n\n          <!-- Wiggle -->\n           <div class=\"setting-row\">\n            <span>Wiggle</span>\n            <input type=\"range\" min=\"0\" max=\"0.5\" step=\"0.01\" v-model.number=\"wiggle\" />\n            <span class=\"value\">{{ Math.round(wiggle * 100) }}</span>\n          </div>\n\n          <div class=\"section-title\" style=\"margin-top: 8px;\">Line Settings</div>\n\n          <!-- Opacity -->\n          <div class=\"setting-row\">\n            <span>Opacity</span>\n            <input type=\"range\" min=\"0\" max=\"1\" step=\"0.01\" v-model.number=\"opacity\" />\n            <span class=\"value\">{{ Math.round(opacity * 100) }}%</span>\n          </div>\n\n          <!-- Dash Size -->\n          <div class=\"setting-row\">\n            <span>Dash Size</span>\n            <input type=\"range\" min=\"0\" max=\"1\" step=\"0.01\" v-model.number=\"dashArray\" />\n          </div>\n\n          <!-- Dash Ratio -->\n          <div class=\"setting-row\">\n             <span>Dash Scale</span>\n             <div class=\"ratio-buttons\">\n                <button class=\"ratio-btn\" :class=\"{ active: Math.abs(dashRatio - 0.66) < 0.1 }\" @click=\"dashRatio = 0.66\">2:1</button>\n                <button class=\"ratio-btn\" :class=\"{ active: Math.abs(dashRatio - 0.5) < 0.1 }\" @click=\"dashRatio = 0.5\">1:1</button>\n                <button class=\"ratio-btn\" :class=\"{ active: Math.abs(dashRatio - 0.33) < 0.1 }\" @click=\"dashRatio = 0.33\">1:2</button>\n             </div>\n          </div>\n\n          <div class=\"section-title\" style=\"margin-top: 8px;\">Animation</div>\n\n          <!-- Animation Speed -->\n          <div class=\"setting-row\">\n            <span>Speed</span>\n            <input type=\"range\" min=\"0\" max=\"2\" step=\"0.01\" v-model.number=\"animationSpeed\" />\n            <span class=\"value\">{{ Math.round(animationSpeed * 100) }}</span>\n          </div>\n        </div>\n\n        <line-sliders\n          :active=\"fill\"\n          mode=\"fill\"\n          @color=\"setFillColor\"\n          @active=\"setFillActive\"\n        />\n\n        <div v-if=\"fill\" class=\"extra-settings\">\n          <div class=\"setting-row\">\n            <span>Opacity</span>\n            <input type=\"range\" min=\"0\" max=\"1\" step=\"0.01\" v-model.number=\"fillOpacity\" />\n            <span class=\"value\">{{ Math.round(fillOpacity * 100) }}%</span>\n          </div>\n        </div>\n      </div>\n  </draggable-window>\n</template>\n\n<script>\nimport LineSliders from \"./LineSliders.vue\";\n// import LineWidthSelector from \"./LineWidthSelector.vue\";\n\nimport DraggableWindow from \"./DraggableWindow.vue\";\n\nexport default {\n  components: { LineSliders, DraggableWindow },\n  name: \"Modal\",\n  data() {\n    return {\n      window: window,\n      stroke: true,\n      strokeColor: \"#1C1C1E\",\n      strokeWidth: 5,\n      fill: false,\n      fillColor: \"#000000\",\n      // panelVisible: false, // Removed\n      dashArray: 0,\n      dashOffset: 0,\n      dashRatio: 0.5,\n      opacity: 1,\n      fillOpacity: 1,\n      transparent: false,\n      alphaTest: 0.5,\n      brushType: 'solid',\n      taper: 3,\n      smoothing: 4,\n      textureScale: 1,\n      wiggle: 0,\n      animationSpeed: 0,\n    };\n  },\n  props: {\n    selectedTool: String,\n    forceVisible: Boolean,\n    reopenTrigger: Number,\n    isOpen: Boolean,\n  },\n  emits: [\"stroke\", \"fill\", \"close\"],   \n  methods: {\n    setStrokeColor: function (val) {\n      this.strokeColor = \"rgb(\" + val.r + \",\" + val.g + \",\" + val.b + \")\";\n    },\n    setStrokeActive: function (val) {\n      this.stroke = val.active;\n    },\n    setStrokeWidth: function (val) {\n      this.strokeWidth = val.width;\n    },\n    setFillColor: function (val) {\n      this.fillColor = \"rgb(\" + val.r + \",\" + val.g + \",\" + val.b + \")\";\n    },\n    setFillActive: function (val) {\n      this.fill = val.active;\n    },\n    emitStroke: function () {\n      this.$emit(\"stroke\", {\n        show_stroke: this.stroke,\n        lineWidth: this.strokeWidth / 500,\n        color: this.strokeColor,\n        dashArray: this.dashArray,\n        dashOffset: this.dashOffset,\n        dashRatio: this.dashRatio,\n        opacity: this.opacity,\n        transparent: this.transparent,\n        alphaTest: this.alphaTest,\n        brushType: this.brushType,\n        taper: this.taper,\n        smoothing: this.smoothing,\n        textureScale: this.textureScale,\n        wiggle: this.wiggle,\n        animationSpeed: this.animationSpeed,\n      });\n    },\n    emitFill: function () {\n      this.$emit(\"fill\", { show_fill: this.fill, color: this.fillColor, opacity: this.fillOpacity });\n    },\n    updateSettings: function (settings) {\n      if (settings.stroke !== undefined) this.stroke = settings.stroke;\n      if (settings.strokeColor !== undefined) {\n         this.strokeColor = \"rgb(\" + settings.strokeColor.r + \",\" + settings.strokeColor.g + \",\" + settings.strokeColor.b + \")\";\n      }\n      if (settings.strokeWidth !== undefined) this.strokeWidth = settings.strokeWidth;\n      \n      this.dashArray = settings.dashArray !== undefined ? settings.dashArray : 0;\n      this.dashOffset = settings.dashOffset !== undefined ? settings.dashOffset : 0;\n      this.dashRatio = settings.dashRatio !== undefined ? settings.dashRatio : 0.5;\n      this.opacity = settings.opacity !== undefined ? settings.opacity : 1;\n      this.transparent = settings.transparent !== undefined ? settings.transparent : false;\n      this.alphaTest = settings.alphaTest !== undefined ? settings.alphaTest : 0.5;\n\n      if (settings.brushType !== undefined) this.brushType = settings.brushType;\n      if (settings.taper !== undefined) this.taper = settings.taper;\n      if (settings.smoothing !== undefined) this.smoothing = settings.smoothing;\n      if (settings.textureScale !== undefined) this.textureScale = settings.textureScale;\n      if (settings.wiggle !== undefined) this.wiggle = settings.wiggle;\n      if (settings.animationSpeed !== undefined) this.animationSpeed = settings.animationSpeed;\n\n      if (settings.fill !== undefined) this.fill = settings.fill;\n      if (settings.fillColor !== undefined) {\n         this.fillColor = \"rgb(\" + settings.fillColor.r + \",\" + settings.fillColor.g + \",\" + settings.fillColor.b + \")\";\n      }\n      if (settings.fillOpacity !== undefined) this.fillOpacity = settings.fillOpacity;\n    },\n  },\n  watch: {\n    stroke: function () {\n      this.emitStroke();\n    },\n    strokeWidth: function () {\n      this.emitStroke();\n    },\n    strokeColor: function () {\n      this.emitStroke();\n    },\n    fill: function () {\n      this.emitFill();\n    },\n    fillColor: function () {\n      this.emitFill();\n    },\n    fillOpacity: function() {\n      this.emitFill();\n    },\n    dashArray: function () {\n      this.emitStroke();\n    },\n    dashRatio: function () {\n      this.emitStroke();\n    },\n    opacity: function () {\n      this.emitStroke();\n    },\n    brushType: function() {\n      this.emitStroke();\n    },\n    taper: function() {\n      this.emitStroke();\n    },\n    smoothing: function() {\n      this.emitStroke();\n    },\n    textureScale: function() {\n      this.emitStroke();\n    },\n    wiggle: function() {\n      this.emitStroke();\n    },\n    animationSpeed: function() {\n      this.emitStroke();\n    },\n  },\n  mounted() {\n    this.emitStroke();\n    this.emitFill();\n  },\n};\n</script>\n\n<style>\n.panel {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  /* background-color: white; Remove bg since window has glass */\n  /* filter: drop-shadow(0px 0px 24px rgba(0, 0, 0, 0.08)); */\n  width: fit-content;\n  /* padding: 8px; */\n  /* border-radius: 8px; */\n}\n\n.extra-settings {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  padding: 0 8px 0 44px; /* Align with sliders roughly */\n}\n\n.setting-row {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  color: white;\n  font-size: 12px;\n  font-family: 'Inter', sans-serif;\n}\n\n.setting-row > span:first-child {\n  width: 70px;\n  opacity: 0.8;\n}\n\n.setting-row input[type=\"range\"] {\n  height: 4px;\n  -webkit-appearance: none;\n  appearance: none;\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 2px;\n  flex: 1;\n  outline: none;\n}\n\n.setting-row input[type=\"range\"]::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  width: 16px;\n  height: 16px;\n  border-radius: 50%;\n  background: white;\n  cursor: pointer;\n  border: 2px solid rgba(0,0,0,0.5);\n}\n\n.setting-row .value {\n  width: 32px;\n  text-align: right;\n  font-family: monospace;\n}\n\n.ratio-buttons {\n  display: flex;\n  gap: 4px;\n}\n\n.ratio-btn {\n  background: transparent;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  color: white;\n  border-radius: 4px;\n  padding: 4px 8px;\n  cursor: pointer;\n  font-size: 10px;\n  transition: all 0.2s;\n}\n\n.ratio-btn:hover {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.ratio-btn.active {\n  background: rgba(255, 255, 255, 0.2);\n  border-color: rgba(255, 255, 255, 0.6);\n  font-weight: bold;\n}\n\n.section-title {\n  color: white;\n  font-size: 10px;\n  font-weight: bold;\n  opacity: 0.5;\n  text-transform: uppercase;\n  margin-bottom: 4px;\n}\n</style>","\n<template>\n  <div class=\"color\" :style=\"cssProps\">\n    <div class=\"toggle\" @click=\"setActive\">\n      <img src=\"@/assets/icons/checkbox.svg\" v-if=\"!active\" alt=\"Enable\" />\n      <img\n        src=\"@/assets/icons/checkbox-checked.svg\"\n        v-if=\"active\"\n        alt=\"Disable\"\n      /><span>{{\n        this.mode.charAt(0).toUpperCase() + this.mode.substr(1).toLowerCase()\n      }}</span>\n    </div>\n    <div class=\"sliders\" v-if=\"active\">\n      <span class=\"width-slider\" v-if=\"mode === 'stroke'\"\n        ><span>w</span\n        ><input type=\"range\" min=\"1\" max=\"20\" id=\"width-slider\" v-model=\"width\"\n      /></span>\n      <span class=\"hsb-slider\"\n        ><span>h</span\n        ><input type=\"range\" min=\"0\" max=\"359\" id=\"hue-slider\" v-model=\"hue\"\n      /></span>\n      <span class=\"hsb-slider\"\n        ><span>s</span\n        ><input\n          type=\"range\"\n          min=\"0\"\n          max=\"99\"\n          class=\"hsb-slider\"\n          id=\"saturation-slider\"\n          v-model=\"saturation\"\n          :style=\"{\n            background: `linear-gradient(\n    to right,\n    hsl(${hue}, 0%, 50%) 0%,\n    hsl(${hue}, 50%, 50%) 90%\n  )`,\n          }\"\n      /></span>\n      <span class=\"hsb-slider\"\n        ><span>b</span\n        ><input\n          type=\"range\"\n          min=\"0\"\n          max=\"99\"\n          class=\"hsb-slider\"\n          id=\"brightness-slider\"\n          v-model=\"brightness\"\n      /></span>\n    </div>\n  </div>\n</template>\n\n<script>\n//https://codepen.io/HunorMarton/details/eWvewo\n\nexport default {\n  name: \"ColorSelector\",\n  data() {\n    return {\n      hue: 0,\n      saturation: 0,\n      brightness: 25,\n      width: 5,\n      r: 0,\n      g: 0,\n      b: 0,\n    };\n  },\n  props: { mode: String, active: Boolean },\n  emits: [\"color\", \"active\", \"width\"],\n  computed: {\n    cssProps() {\n      return {\n        \"--width-margin\": this.map(this.width, 1, 20, -6, +6) + \"px\",\n        \"--width-radius\": this.calcRadius(this.width * 4, 1, 80), //workaround because range is othewise so low\n        \"--hue-margin\": this.map(this.hue, 0, 359, -6, +6) + \"px\",\n        \"--hue-radius\": this.calcRadius(this.hue, 0, 359),\n        \"--saturation-margin\": this.map(this.saturation, 0, 99, -6, +6) + \"px\",\n        \"--saturation-radius\": this.calcRadius(this.saturation, 0, 99),\n        \"--brightness-margin\": this.map(this.brightness, 0, 99, -6, +6) + \"px\",\n        \"--brightness-radius\": this.calcRadius(this.brightness, 0, 99),\n      };\n    },\n  },\n  methods: {\n    map: function (n, start1, stop1, start2, stop2) {\n      return ((n - start1) / (stop1 - start1)) * (stop2 - start2) + start2;\n    },\n    calcRadius: function (val, min, max) {\n      if (val < min + 4) {\n        return \"0px 4px 4px 0px\";\n      } else if (val > max - 4) {\n        return \"4px 0px 0px 4px\";\n      } else {\n        return \"4px\";\n      }\n    },\n    updateColor: function (h, s, v) {\n      var r, g, b, i, f, p, q, t;\n      if (arguments.length === 1) {\n        (s = h.s), (v = h.v), (h = h.h);\n      }\n      i = Math.floor(h * 6);\n      f = h * 6 - i;\n      p = v * (1 - s);\n      q = v * (1 - f * s);\n      t = v * (1 - (1 - f) * s);\n      switch (i % 6) {\n        case 0:\n          (r = v), (g = t), (b = p);\n          break;\n        case 1:\n          (r = q), (g = v), (b = p);\n          break;\n        case 2:\n          (r = p), (g = v), (b = t);\n          break;\n        case 3:\n          (r = p), (g = q), (b = v);\n          break;\n        case 4:\n          (r = t), (g = p), (b = v);\n          break;\n        case 5:\n          (r = v), (g = p), (b = q);\n          break;\n      }\n\n      (this.r = Math.round(r * 255)),\n        (this.g = Math.round(g * 255)),\n        (this.b = Math.round(b * 255));\n\n      this.$emit(\"color\", { r: this.r, g: this.g, b: this.b });\n    },\n    setActive() {\n      this.$emit(\"active\", { active: !this.active });\n    },\n  },\n  watch: {\n    width: function (val) {\n      this.$emit(\"width\", { width: val });\n    },\n    hue: function () {\n      this.updateColor(\n        this.hue / 359,\n        this.saturation / 99,\n        this.brightness / 99\n      );\n    },\n    saturation: function () {\n      this.updateColor(\n        this.hue / 359,\n        this.saturation / 99,\n        this.brightness / 99\n      );\n    },\n    brightness: function () {\n      this.updateColor(\n        this.hue / 359,\n        this.saturation / 99,\n        this.brightness / 99\n      );\n    },\n  },\n  mounted() {\n    this.updateColor(\n      this.hue / 359,\n      this.saturation / 99,\n      this.brightness / 99\n    );\n  },\n};\n</script>\n\n<style scoped>\n.toggle {\n  height: 32px;\n  float: left;\n  display: flex;\n  flex-direction: row;\n  gap: 8px;\n}\n\n.color-bubble {\n  border-radius: 22px;\n  height: 36px;\n  width: 36px;\n  border: 1px solid #1c1c1e;\n}\n\n.sliders {\n  float: left;\n  display: flex;\n  gap: 8px;\n  flex-direction: column;\n}\n\ninput {\n  width: 200px;\n}\n\n.width-slider > input[type=\"range\"] {\n  border: 1px solid #1c1c1e;\n  border-radius: 4px;\n}\n\n.hsb-slider,\n.width-slider {\n  display: flex;\n  align-content: center;\n  align-items: center;\n  gap: 12px;\n}\n\n.hsb-slider span,\n.width-slider span {\n  width: 20px;\n  text-align: center;\n}\n\ninput[type=\"range\"] {\n  -webkit-appearance: none; /* Override default CSS styles */\n  appearance: none;\n  height: 8px;\n}\n\ninput[type=\"range\"]::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  background-color: rgba(255, 255, 255, 0);\n  border: 6px solid #1c1c1e;\n  border-radius: 3px;\n  width: 20px;\n  height: 20px;\n  margin-top: 0px;\n  overflow: visible;\n  position: relative;\n}\n\n#width-slider {\n  border-radius: var(--width-radius);\n}\n\n#width-slider::-webkit-slider-thumb {\n  left: var(--width-margin);\n}\n\n#hue-slider {\n  border-radius: var(--hue-radius);\n}\n\n#hue-slider::-webkit-slider-thumb {\n  left: var(--hue-margin);\n}\n\n#saturation-slider {\n  border-radius: var(--saturation-radius);\n}\n\n#saturation-slider::-webkit-slider-thumb {\n  left: var(--saturation-margin);\n}\n\n#brightness-slider {\n  border-radius: var(--brightness-radius);\n}\n\n#brightness-slider::-webkit-slider-thumb {\n  left: var(--brightness-margin);\n}\n\n#hue-slider {\n  background: linear-gradient(\n    to right,\n    hsl(0, 100%, 50%) 0%,\n    hsl(60, 100%, 50%) 16.67%,\n    hsl(120, 100%, 50%) 33.33%,\n    hsl(180, 100%, 50%) 50%,\n    hsl(240, 100%, 50%) 66.67%,\n    hsl(320, 100%, 50%) 83.33%,\n    hsl(360, 100%, 50%) 100%\n  );\n}\n\n#brightness-slider {\n  background: linear-gradient(\n    to right,\n    hsl(0, 0%, 0%) 0%,\n    hsl(0, 0%, 100%) 100%\n  );\n}\n\nlabel {\n  display: flex;\n  font-size: 0.45em;\n}\n</style>","import { render } from \"./LineSliders.vue?vue&type=template&id=209b775a&scoped=true\"\nimport script from \"./LineSliders.vue?vue&type=script&lang=js\"\nexport * from \"./LineSliders.vue?vue&type=script&lang=js\"\n\nimport \"./LineSliders.vue?vue&type=style&index=0&id=209b775a&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\UNREAL\\\\Downloads\\\\3d\\\\Original\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-209b775a\"]])\n\nexport default __exports__","import { render } from \"./LineSettings.vue?vue&type=template&id=3b92b248\"\nimport script from \"./LineSettings.vue?vue&type=script&lang=js\"\nexport * from \"./LineSettings.vue?vue&type=script&lang=js\"\n\nimport \"./LineSettings.vue?vue&type=style&index=0&id=3b92b248&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\UNREAL\\\\Downloads\\\\3d\\\\Original\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div>\n    <div class=\"popup\" v-if=\"show\">\n      <ToggleWindow label=\"Tools\" @click=\"toggleWindow('tools')\" :checked=\"windowStates && windowStates.tools\" />\n      <ToggleWindow label=\"Properties\" @click=\"toggleWindow('properties')\" :checked=\"windowStates && windowStates.properties\" />\n      <ToggleWindow label=\"Canvas\" @click=\"toggleWindow('canvas')\" :checked=\"windowStates && windowStates.canvas\" />\n      <ToggleWindow label=\"Shapes\" @click=\"toggleWindow('shapes')\" :checked=\"windowStates && windowStates.shapes\" />\n      <ToggleWindow label=\"Object Manager\" @click=\"toggleWindow('objectManager')\" :checked=\"windowStates && windowStates.objectManager\" />\n      <ToggleWindow label=\"History\" @click=\"toggleWindow('history')\" :checked=\"windowStates && windowStates.history\" />\n      <ToggleWindow label=\"View\" @click=\"toggleWindow('view')\" :checked=\"windowStates && windowStates.view\" />\n      <ToggleWindow label=\"Colors\" @click=\"toggleWindow('colors')\" :checked=\"windowStates && windowStates.colors\" />\n      <ToggleWindow label=\"Scene\" @click=\"toggleWindow('scene')\" :checked=\"windowStates && windowStates.scene\" />\n      <ToggleWindow label=\"Symmetry\" @click=\"toggleWindow('symmetry')\" :checked=\"windowStates && windowStates.symmetry\" />\n      <ToggleWindow label=\"Layers\" @click=\"toggleWindow('layers')\" :checked=\"windowStates && windowStates.layers\" />\n      <div class=\"separator\"></div>\n      <Save />\n      <Load ref=\"load\" />\n      <div class=\"separator\"></div>\n      <export-for-blender @modal=\"showModal\" />\n      <export-for-procreate @modal=\"showModal\" />\n      <ExportUSDZ v-if=\"isSafari\" />\n      <ExportGLB />\n      <ExportHTML @modal=\"showModal\" />\n      <start-preview @preview=\"startPreview\" />\n    </div>\n    <button\n      class=\"toggle-menu\"\n      @click=\"show = !show\"\n      v-bind:style=\"[show === true ? 'z-index: 10' : '']\"\n    >\n      <img src=\"@/assets/icons/share.svg\" alt=\"Share your sketch\" />\n    </button>\n    <div class=\"fade\" v-if=\"show\" @click=\"show = false\"></div>\n  </div>\n</template>\n\n<script>\nimport ToggleWindow from \"./MenuButtons/ToggleWindow.vue\";\nimport Save from \"./MenuButtons/Save.vue\";\nimport Load from \"./MenuButtons/Load.vue\";\nimport ExportForBlender from \"./MenuButtons/ExportForBlender.vue\";\nimport ExportForProcreate from \"./MenuButtons/ExportForProcreate.vue\";\nimport StartPreview from \"./MenuButtons/StartPreview.vue\";\nimport ExportUSDZ from \"./MenuButtons/ExportUSDZ.vue\";\nimport ExportGLB from \"./MenuButtons/ExportGLB.vue\";\nimport ExportHTML from \"./MenuButtons/ExportHTML.vue\";\n\nexport default {\n  name: \"Share\",\n  props: {\n    windowStates: Object,\n  },\n  components: {\n    ToggleWindow,\n    Save,\n    Load,\n    ExportForBlender,\n    ExportForProcreate,\n    StartPreview,\n    ExportUSDZ,\n    ExportGLB,\n    ExportHTML,\n  },\n  emits: [\"modal-set\", \"preview\", \"toggle-window\"],\n  data() {\n    return {\n      show: false,\n      isSafari: false,\n    };\n  },\n  methods: {\n    hide: function () {\n      this.show = false;\n    },\n    showModal: function (val) {\n      this.$emit(\"modal-set\", val);\n      this.hide();\n    },\n    startPreview: function (val) {\n      this.$emit(\"preview\", val);\n      this.hide();\n    },\n    toggleWindow: function (windowName) {\n      this.$emit(\"toggle-window\", windowName);\n    },\n  },\n  watch: {},\n  mounted() {\n    this.isSafari =\n      navigator.vendor &&\n      navigator.vendor.indexOf(\"Apple\") > -1 &&\n      navigator.userAgent &&\n      navigator.userAgent.indexOf(\"CriOS\") == -1 &&\n      navigator.userAgent.indexOf(\"FxiOS\") == -1;\n  },\n};\n</script>\n\n<style scoped>\n.fade {\n  position: absolute;\n  z-index: 9;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  background-color: rgba(0, 0, 0, 0.2);\n}\n\n.toggle-menu {\n  position: absolute;\n  z-index: 5;\n  bottom: 12px;\n  right: 62px;\n  width: 44px;\n  height: 44px;\n  background-color: white;\n  filter: drop-shadow(0px 0px 24px rgba(0, 0, 0, 0.08));\n  border-radius: 22px;\n  padding: 0;\n}\n\ndiv {\n  position: absolute;\n  z-index: 10;\n  bottom: 64px;\n  right: 68px;\n  background-color: white;\n  filter: drop-shadow(0px 0px 24px rgba(0, 0, 0, 0.08));\n  border-radius: 8px;\n  display: flex;\n  flex-direction: column;\n}\n\nbutton {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  align-content: center;\n  background-color: rgba(0, 0, 0, 0);\n  border: none;\n  height: 44px;\n  padding-left: 12px;\n  padding-right: 12px;\n  border-bottom: 1px solid #ffe8b3;\n  font-size: 0.8em;\n}\n\nbutton:last-child,\n.toggle-menu {\n  border-bottom: none;\n}\n\n.separator {\n  height: 1px;\n  background-color: rgba(0, 0, 0, 0.1);\n  margin: 4px 0;\n}\n</style>","<template>\r\n  <button @click=\"$emit('click')\">\r\n    <span class=\"label\">{{ label }}</span>\r\n    <span class=\"check\" v-if=\"checked\"></span>\r\n  </button>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"ToggleWindow\",\r\n  props: {\r\n    label: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    checked: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n  },\r\n  emits: [\"click\"],\r\n};\r\n</script>\r\n\r\n<style scoped>\r\nbutton {\r\n  font-family: Avenir, Helvetica, Arial, sans-serif;\r\n  align-content: center;\r\n  background-color: rgba(0, 0, 0, 0);\r\n  border: none;\r\n  height: 44px;\r\n  padding-left: 12px;\r\n  padding-right: 12px;\r\n  border-bottom: 1px solid #ffe8b3;\r\n  font-size: 0.8em;\r\n  text-align: left;\r\n  cursor: pointer;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  width: 100%;\r\n}\r\n\r\nbutton:hover {\r\n  background-color: rgba(255, 232, 179, 0.1);\r\n}\r\n\r\n.check {\r\n    font-weight: bold;\r\n    color: #ffb000;\r\n}\r\n</style>\r\n","import { render } from \"./ToggleWindow.vue?vue&type=template&id=50198f32&scoped=true\"\nimport script from \"./ToggleWindow.vue?vue&type=script&lang=js\"\nexport * from \"./ToggleWindow.vue?vue&type=script&lang=js\"\n\nimport \"./ToggleWindow.vue?vue&type=style&index=0&id=50198f32&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\UNREAL\\\\Downloads\\\\3d\\\\Original\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-50198f32\"]])\n\nexport default __exports__","<template>\n  <button @click=\"exportToJson\">Save</button>\n</template>\n\n<script>\nimport * as THREE from \"three\";\n// import { draw } from \"./draw.js\";\nimport { scene } from \"../../App.vue\";\n\nexport default {\n  name: \"Import\",\n  props: {},\n  data() {\n    return {};\n  },\n  methods: {\n    exportToJson: function () {\n      const json = [];\n      scene.children.forEach((obj) => {\n        //check if it's a line, if it's in the right layer and that we don't already have its original\n        if (\n          obj.geometry &&\n          obj.geometry.type == \"MeshLine\" &&\n          obj.layers.mask == 2\n        ) {\n          let line = {};\n\n          console.log(obj.geometry);\n\n          line.vertices = Array.from(obj.geometry.points);\n          line.stroke = obj.userData.stroke;\n          line.fill = obj.userData.fill;\n          line.mirrorOn = false;\n          line.position = new THREE.Vector3();\n          obj.getWorldPosition(line.position);\n          line.quaternion = new THREE.Quaternion();\n          obj.getWorldQuaternion(line.quaternion);\n          line.scale = new THREE.Vector3();\n          obj.getWorldScale(line.scale);\n          line.matrix = obj.matrix;\n          json.push(line);\n        }\n      });\n      console.log(json);\n\n      var dataStr =\n        \"data:text/json;charset=utf-8,\" +\n        encodeURIComponent(JSON.stringify(json));\n\n      var filename = prompt(\"Enter a name for your file\", \"sketch\");\n\n      if (filename != null) {\n        var el = document.createElement(\"a\");\n        el.setAttribute(\"href\", dataStr);\n        el.setAttribute(\"download\", filename + \".json\");\n        el.click();\n      }\n    },\n  },\n  watch: {},\n  mounted() {},\n};\n</script>\n\n<style scoped>\n</style>","import { render } from \"./Save.vue?vue&type=template&id=0d7c2da8\"\nimport script from \"./Save.vue?vue&type=script&lang=js\"\nexport * from \"./Save.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\UNREAL\\\\Downloads\\\\3d\\\\Original\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <button @click=\"importFromJson\">{{ text }}</button>\n</template>\n\n<script>\nimport { draw } from \"../draw.js\";\nimport { scene, renderer, camera } from \"../../App.vue\";\n\nexport default {\n  name: \"Import\",\n  props: {},\n  data() {\n    return {\n      text: \"Load\",\n    };\n  },\n  methods: {\n    importFromJson: function () {\n      var file;\n      var input = document.createElement(\"input\");\n      input.style.display = \"none\";\n      input.type = \"file\";\n      document.body.appendChild(input);\n      input.onchange = (event) => {\n        file = event.target.files[0];\n        function onReaderLoad(event) {\n          var json = JSON.parse(event.target.result);\n          let i = 0;\n          function drawLine(l) {\n            draw.fromVertices(\n              new Float32Array(l.vertices),\n              l.stroke,\n              l.fill,\n              l.mirrorOn,\n              null, //uuid, not necessary to restore in import\n              l.position,\n              l.quaternion,\n              l.scale,\n              l.matrix\n            );\n            if (i < json.length - 1) {\n              i++;\n              drawLine(json[i]);\n            } else {\n              renderer.render(scene, camera);\n            }\n          }\n          drawLine(json[i]);\n        }\n        if (file.type == \"application/json\") {\n          var reader = new FileReader();\n          reader.onload = onReaderLoad;\n          reader.readAsText(file);\n        } else {\n          //   app.toast.show = true;\n          //   app.toast.text = \"Error. File type not correct\";\n          //   setTimeout(function () {\n          //     app.toast.show = false;\n          //   }, 2000);\n        }\n      };\n      input.click();\n    },\n    // updateText: function (index, length) {\n    //   this.text = \"Loading \" + index + \"/\" + length;\n    // },\n  },\n  watch: {},\n  mounted() {},\n};\n</script>\n\n<style scoped>\n</style>","import { render } from \"./Load.vue?vue&type=template&id=301cc407\"\nimport script from \"./Load.vue?vue&type=script&lang=js\"\nexport * from \"./Load.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\UNREAL\\\\Downloads\\\\3d\\\\Original\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <button @click=\"showExportModal\">Export for Blender</button>\n</template>\n\n<script>\nexport default {\n  name: \"Export\",\n  props: {},\n  data() {\n    return {};\n  },\n  methods: {\n    showExportModal: function () {\n      this.$emit(\"modal\", { display: true, mode: \"blender\" });\n    },\n  },\n  watch: {},\n  mounted() {},\n};\n</script>\n\n<style scoped>\n</style>","import { render } from \"./ExportForBlender.vue?vue&type=template&id=359f140a\"\nimport script from \"./ExportForBlender.vue?vue&type=script&lang=js\"\nexport * from \"./ExportForBlender.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\UNREAL\\\\Downloads\\\\3d\\\\Original\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <button @click=\"showExportModal\">Export for Procreate</button>\n</template>\n\n<script>\nexport default {\n  name: \"Export\",\n  props: {},\n  data() {\n    return {};\n  },\n  methods: {\n    showExportModal: function () {\n      this.$emit(\"modal\", { display: true, mode: \"procreate\" });\n    },\n  },\n  watch: {},\n  mounted() {},\n};\n</script>\n\n<style scoped>\n</style>","import { render } from \"./ExportForProcreate.vue?vue&type=template&id=a5e737f4\"\nimport script from \"./ExportForProcreate.vue?vue&type=script&lang=js\"\nexport * from \"./ExportForProcreate.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\UNREAL\\\\Downloads\\\\3d\\\\Original\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <button @click=\"startPreview\">Make video</button>\n</template>\n\n<script>\nexport default {\n  name: \"StartPreview\",\n  props: {},\n  data() {\n    return {};\n  },\n  methods: {\n    startPreview: function () {\n      this.$emit(\"preview\", true);\n    },\n  },\n  watch: {},\n  mounted() {},\n};\n</script>\n\n<style scoped>\n</style>","import { render } from \"./StartPreview.vue?vue&type=template&id=b3643c28\"\nimport script from \"./StartPreview.vue?vue&type=script&lang=js\"\nexport * from \"./StartPreview.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\UNREAL\\\\Downloads\\\\3d\\\\Original\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <button\n    v-bind:class=\"[mode === 'default' || mode === 'exporting' ? '' : 'hidden']\"\n    @click=\"mode === 'default' ? exportForAr() : ''\"\n  >\n    {{ mode === \"default\" ? \"Export for AR\" : \"Exporting...\" }}\n  </button>\n  <a v-bind:class=\"[mode === 'view' ? 'ar' : 'ar hidden']\" id=\"ar\" rel=\"ar\">\n    <img src=\"@/assets/icons/View_in_AR.svg\" />\n  </a>\n  <a\n    id=\"download\"\n    v-bind:class=\"[mode === 'view' ? 'ar' : 'ar hidden']\"\n    download=\"sketch.usdz\"\n    target=\"_blank\"\n  >\n    Download USDZ\n  </a>\n</template>\n\n<script>\nimport * as THREE from \"three\";\nimport { USDZExporter } from \"three/examples/jsm/exporters/USDZExporter.js\";\nimport { scene } from \"../../App.vue\";\nimport {\n  convertMeshlineToGeometry,\n  convertMeshlineFillToGeometry,\n} from \"../convertMeshlineToGeometry.js\";\nlet sceneUSDZ;\n\nexport default {\n  name: \"ExportUSDZ\",\n  props: {},\n  data() {\n    return {\n      lightbox: false,\n      text: \"Export for AR\",\n      mode: \"default\", //default || exporting || view\n      url: undefined,\n    };\n  },\n  methods: {\n    exportForAr: function () {\n      this.mode = \"exporting\";\n      //there are better ways but this is good enough. The export floods the processor so vue doesn't update even with nextTick\n      setTimeout(() => {\n        this.viewInAr();\n      }, 500);\n    },\n    viewInAr: async function () {\n      sceneUSDZ = new THREE.Scene();\n\n      scene.children.forEach((obj) => {\n        if (\n          obj != undefined &&\n          obj.geometry &&\n          obj.geometry.type == \"MeshLine\" &&\n          obj.layers.mask == 2 &&\n          obj.geometry.attributes.position.array.length > 6\n        ) {\n          // The stroke\n          if (obj.userData.stroke.show_stroke === true) {\n            sceneUSDZ.add(convertMeshlineToGeometry(obj, \"standard\"));\n          }\n\n          // The fill\n          if (obj.userData.fill.show_fill === true) {\n            convertMeshlineFillToGeometry(obj, \"standard\", false, true).forEach(\n              (mesh) => {\n                sceneUSDZ.add(mesh);\n              }\n            );\n          }\n        }\n      });\n\n      // for (let o = 0; o <= scene.children.length; o++) {\n      //   let obj = scene.children[o];\n\n      //   if (\n      //     obj != undefined &&\n      //     obj.geometry &&\n      //     obj.geometry.type == \"MeshLine\" &&\n      //     obj.layers.mask == 2 &&\n      //     obj.geometry.attributes.position.array.length > 0\n      //   ) {\n      //     // The stroke\n      //     if (obj.userData.stroke.show_stroke === true) {\n      //       let geometry = obj.geometry.clone();\n      //       geometry.applyMatrix4(obj.matrix);\n      //       let vertices = [];\n      //       let points = Array.from(geometry.attributes.position.array);\n\n      //       for (let i = 0; i <= points.length; i = i + 6) {\n      //         let v3 = new THREE.Vector3(\n      //           points[i],\n      //           points[i + 1],\n      //           points[i + 2]\n      //         );\n      //         //why do I have 0,0,0 points in my positions? :thinking:\n      //         if (v3.x != 0 && v3.y != 0 && v3.z != 0) {\n      //           vertices.push(v3);\n      //         }\n      //       }\n\n      //       //if the line is too short, we skip this iteration\n      //       if (vertices.length < 2) continue;\n\n      //       let force = [0];\n      //       for (let i = 0; i < obj.userData.stroke.force.length; i++) {\n      //         let length = obj.userData.stroke.force.length;\n      //         let minWidth = 0;\n      //         let baseWidth = obj.userData.stroke.lineWidth;\n\n      //         //https://github.com/spite/THREE.MeshLine/blob/master/src/THREE.MeshLine.js#L424\n      //         //in the shader it seems like it's base witdth * width\n      //         let width = obj.userData.stroke.force[i] / (baseWidth * 10000);\n      //         let tailLength = 3;\n\n      //         //Beginning of the line\n      //         if (i < tailLength) {\n      //           let n = map(\n      //             i,\n      //             minWidth,\n      //             tailLength,\n      //             minWidth,\n      //             baseWidth + width\n      //           );\n\n      //           force.push(n);\n      //         }\n      //         //End of the line\n      //         else if (i > length - tailLength) {\n      //           let n = map(\n      //             i,\n      //             length - tailLength,\n      //             length - 1,\n      //             baseWidth + width,\n      //             minWidth\n      //           );\n\n      //           force.push(n);\n      //         }\n      //         //bulk of the line\n      //         else {\n      //           force.push(baseWidth + width);\n      //         }\n      //       }\n\n      //       var pathBase = new THREE.CatmullRomCurve3(vertices);\n      //       const tubeGeometry = new TubeBufferGeometry(\n      //         pathBase,\n      //         vertices.length,\n      //         force,\n      //         8,\n      //         !true\n      //       );\n\n      //       const material = new THREE.MeshStandardMaterial({\n      //         color: obj.userData.stroke.color,\n      //         flatShading: true,\n      //         roughness: 1,\n      //         shininess: 0,\n      //         metalness: 1,\n      //       });\n      //       const mesh = new THREE.Mesh(tubeGeometry, material);\n      //       if (mesh.geometry.attributes.uv != undefined) {\n      //         group.attach(mesh);\n      //         sceneUSDZ.add(mesh);\n      //       } else {\n      //         continue;\n      //       }\n      //     }\n\n      //     // The fill\n      //     if (obj.userData.fill.show_fill === true) {\n      //       let fill = obj.children[0].clone();\n      //       let fillGeometry = obj.children[0].geometry.clone();\n\n      //       // let flippedFaces = obj.children[0].geometry.clone();\n      //       // let flippedArray = flippedFaces.index.array.reverse();\n      //       // flippedFaces.index.array = flippedArray;\n      //       // const mergedFaces = new Uint16Array(\n      //       //   fillGeometry.index.array.length + flippedFaces.index.array.length\n      //       // );\n      //       // for (var f = 0; f < fillGeometry.index.array.length; f++)\n      //       //   mergedFaces[f] = fillGeometry.index.array[f];\n      //       // for (var e = 0; e < flippedFaces.index.array.length; e++)\n      //       //   mergedFaces[fillGeometry.index.array.lenght + e] =\n      //       //     flippedFaces.index.array[e];\n      //       // fillGeometry.index.array = mergedFaces;\n      //       // fillGeometry.index.count = mergedFaces.length;\n\n      //       fill.geometry = fillGeometry;\n      //       fill.geometry.applyMatrix4(obj.matrix);\n      //       fill.position.set(0, 0, 0);\n      //       fill.rotation.set(0, 0, 0);\n      //       fill.scale.set(1, 1, 1);\n\n      //       fill.material = new THREE.MeshStandardMaterial({\n      //         color: obj.userData.fill.color,\n      //         side: THREE.DoubleSide,\n      //       });\n\n      //       let texture;\n      //       if (obj.children[0].material.map) {\n      //         texture = obj.children[0].material.map.clone();\n      //         fill.material.map = texture;\n      //       }\n\n      //       sceneUSDZ.add(fill);\n\n      //       let fillFlipped = fill.clone();\n      //       let fillFlippedGeometry = fill.geometry.clone();\n      //       fillFlippedGeometry.index.array =\n      //         fillFlippedGeometry.index.array.reverse();\n      //       fillFlipped.geometry = fillFlippedGeometry;\n      //       fillFlipped.material = new THREE.MeshStandardMaterial({\n      //         color: obj.userData.fill.color,\n      //         side: THREE.DoubleSide,\n      //       });\n      //       sceneUSDZ.add(fillFlipped);\n      //     }\n      //   }\n      // }\n\n      sceneUSDZ.scale.set(0.1, 0.1, 0.1);\n      sceneUSDZ.updateMatrixWorld(true);\n\n      const exporter = new USDZExporter();\n      const arraybuffer = await exporter.parse(sceneUSDZ);\n      //.parse ( input : Object3D, onCompleted : Function)\n      const blob = new Blob([arraybuffer], {\n        type: \"application/octet-stream\",\n      });\n      // var el = document.createElement(\"a\");\n      var el = document.getElementById(\"ar\");\n      el.setAttribute(\"href\", URL.createObjectURL(blob));\n      el.setAttribute(\"download\", \"sketch.usdz\");\n      document\n        .getElementById(\"download\")\n        .setAttribute(\"href\", URL.createObjectURL(blob));\n      this.mode = \"view\";\n    },\n  },\n  watch: {},\n  mounted() {},\n};\n</script>\n\n<style scoped>\nbutton {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  font-weight: 900;\n  font-size: 0.8em;\n  border-bottom: 1px solid #ffe8b3;\n}\n\n.ar {\n  width: 100%;\n  align-content: center;\n  align-items: center;\n  background-color: rgba(0, 0, 0, 0);\n  border: none;\n  height: 44px;\n  padding-top: 6px;\n  padding-left: 12px;\n  padding-right: 12px;\n  border-bottom: 1px solid #ffe8b3;\n  box-sizing: border-box;\n}\n\na.ar {\n  color: #1c1c1e;\n  font-weight: 900;\n  line-height: 30px;\n  text-align: center;\n  font-size: 0.8em;\n}\n\n.ar > img {\n  width: auto;\n}\n</style>","//http://web.archive.org/web/20170106063058/http://www.lab4games.net/zz85/blog/2012/04/24/spline-extrusions-tubes-and-knots-of-sorts/\n//https://mattdesl.svbtle.com/shaping-curves-with-parametric-equations\n//https://github.com/mattdesl/parametric-curves/blob/45f321fd43af3a0786aa2dd4016931cc39325944/lib/shaders/tube.vert#L66-L162\n//https://stackoverflow.com/questions/31660099/threejs-tubegeometry-applying-custom-curve-causes-unexpected-twisting\n\n//https://avikdas.com/2020/09/08/rendering-curves-in-3d.html\n//https://avikdas.com/assets/js/curve-optimization/curve-geometry.mjs\n\nimport { BufferGeometry } from 'three';\nimport { Float32BufferAttribute } from 'three';\nimport { Vector2 } from 'three';\nimport { Vector3 } from 'three';\n\n// TubeBufferGeometry\n\nclass TubeBufferGeometry extends BufferGeometry {\n\n    constructor(path, tubularSegments = 10, radius = [1, 1, 1, 1, 1, 1, 1, 1, 1, 1], radialSegments = 8, closed = false) {\n\n        super();\n        this.type = 'TubeBufferGeometry';\n\n        this.parameters = {\n            path: path,\n            tubularSegments: tubularSegments,\n            radius: radius,\n            radialSegments: radialSegments,\n            closed: closed\n        };\n\n        tubularSegments = tubularSegments || 64;\n        radius = radius || 1;\n        radialSegments = radialSegments || 8;\n        closed = closed || false;\n\n        var frames = path.computeFrenetFrames(tubularSegments, closed);\n\n        // expose internals\n\n        this.tangents = frames.tangents;\n        this.normals = frames.normals;\n        this.binormals = frames.binormals;\n\n        // helper variables\n\n        var vertex = new Vector3();\n        var normal = new Vector3();\n        var uv = new Vector2();\n        var P = new Vector3();\n\n        var i, j;\n\n        // buffer\n\n        var vertices = [];\n        var normals = [];\n        var uvs = [];\n        var indices = [];\n\n        // create buffer data\n\n        generateBufferData();\n\n        // build geometry\n\n        this.setIndex(indices);\n        this.setAttribute('position', new Float32BufferAttribute(vertices, 3));\n        // Commenting out normals and UVs. For exporting to USDZ the result is better if the object has none of them\n        this.setAttribute('normal', new Float32BufferAttribute(normals, 3));\n        this.setAttribute('uv', new Float32BufferAttribute(uvs, 2));\n\n        // functions\n\n        function generateBufferData() {\n\n            for (i = 0; i < tubularSegments; i++) {\n\n                generateSegment(i);\n\n            }\n\n            // if the geometry is not closed, generate the last row of vertices and normals\n            // at the regular position on the given path\n            //\n            // if the geometry is closed, duplicate the first row of vertices and normals (uvs will differ)\n\n            generateSegment((closed === false) ? tubularSegments : 0);\n\n            // uvs are generated in a separate function.\n            // this makes it easy compute correct values for closed geometries\n            generateUVs();\n\n            // finally create faces\n\n            generateIndices();\n\n        }\n\n        function generateSegment(i) {\n\n            // we use getPointAt to sample evenly distributed points from the given path\n\n            P = path.getPointAt(i / tubularSegments, P);\n\n            // If you avoid rotations completely, the model looks flatter but works\n            // var N = frames.normals[0];\n            // var B = frames.binormals[0];\n\n            // retrieve corresponding normal and binormal\n            var N = frames.normals[i];\n            var B = frames.binormals[i];\n\n            // generate normals and vertices for the current segment\n\n            for (j = 0; j <= radialSegments; j++) {\n\n                var v = j / radialSegments * Math.PI * 2;\n\n                var sin = Math.sin(v);\n                var cos = - Math.cos(v);\n\n                normal\n                normal.x = (cos * N.x + sin * B.x);\n                normal.y = (cos * N.y + sin * B.y);\n                normal.z = (cos * N.z + sin * B.z);\n                normal.normalize();\n\n                normals.push(normal.x, normal.y, normal.z);\n\n                // vertex\n                const r = (typeof radius === 'function') ? radius(i / tubularSegments) : radius[i];\n                // const r = (typeof radius === 'function') ? radius(i / tubularSegments) : radius;\n\n                vertex.x = P.x + r * normal.x;\n                vertex.y = P.y + r * normal.y;\n                vertex.z = P.z + r * normal.z;\n\n                vertices.push(vertex.x, vertex.y, vertex.z);\n\n            }\n\n        }\n\n        function generateIndices() {\n\n            for (j = 1; j <= tubularSegments; j++) {\n\n                for (i = 1; i <= radialSegments; i++) {\n\n                    var a = (radialSegments + 1) * (j - 1) + (i - 1);\n                    var b = (radialSegments + 1) * j + (i - 1);\n                    var c = (radialSegments + 1) * j + i;\n                    var d = (radialSegments + 1) * (j - 1) + i;\n\n                    // faces\n\n                    indices.push(a, b, d);\n                    indices.push(b, c, d);\n\n                }\n\n            }\n\n        }\n\n        function generateUVs() {\n\n            for (i = 0; i <= tubularSegments; i++) {\n\n                for (j = 0; j <= radialSegments; j++) {\n\n                    uv.x = i / tubularSegments;\n                    uv.y = j / radialSegments;\n\n                    uvs.push(uv.x, uv.y);\n\n                }\n\n            }\n\n        }\n\n    }\n}\n\n// TubeBufferGeometry.prototype = Object.create(THREE.BufferGeometry.prototype);\n// TubeBufferGeometry.prototype.constructor = TubeBufferGeometry;\n\nexport { TubeBufferGeometry };","import * as THREE from \"three\";\nimport { TubeBufferGeometry } from \"./TubeGeometryWithVariableWidth.js\";\n\nexport function map(n, start1, stop1, start2, stop2) {\n    return ((n - start1) / (stop1 - start1)) * (stop2 - start2) + start2;\n}\n\nexport function convertMeshlineToGeometry(line, material) {\n    let obj = line;\n    let geometry = obj.geometry.clone();\n    geometry.applyMatrix4(obj.matrix);\n    let vertices = [];\n    let points = Array.from(geometry.attributes.position.array);\n\n\n    for (let i = 0; i <= points.length; i = i + 6) {\n        let v3 = new THREE.Vector3(\n            points[i],\n            points[i + 1],\n            points[i + 2]\n        );\n        //why do I have 0,0,0 points in my positions? :thinking:\n        if (v3.x != 0 && v3.y != 0 && v3.z != 0) {\n            vertices.push(v3);\n        }\n    }\n\n\n    let force = [0];\n    for (let i = 0; i < obj.userData.stroke.force.length; i++) {\n        let length = obj.userData.stroke.force.length;\n        let minWidth = 0;\n        let baseWidth = obj.userData.stroke.lineWidth * 2.5;\n\n        //https://github.com/spite/THREE.MeshLine/blob/master/src/THREE.MeshLine.js#L424\n        //in the shader it seems like it's base witdth * width\n        let width = obj.userData.stroke.force[i] / 15;\n        let tailLength = 3;\n\n        //Beginning of the line\n        if (i < tailLength) {\n            let n = map(\n                i,\n                minWidth,\n                tailLength,\n                minWidth,\n                baseWidth + width\n            );\n\n            force.push(n);\n        }\n        //End of the line\n        else if (i > length - tailLength) {\n            let n = map(\n                i,\n                length - tailLength,\n                length - 1,\n                baseWidth + width,\n                minWidth\n            );\n\n            force.push(n);\n        }\n        //bulk of the line\n        else {\n            force.push(baseWidth + width);\n        }\n    }\n\n    var pathBase = new THREE.CatmullRomCurve3(vertices);\n    const tubeGeometry = new TubeBufferGeometry(\n        pathBase,\n        vertices.length,\n        force,\n        8,\n        !true\n    );\n\n    let tubeMaterial\n\n    if (material === \"basic\") {\n        tubeMaterial = new THREE.MeshBasicMaterial({\n            color: obj.userData.stroke.color,\n            flatShading: true,\n        });\n    } else {\n        tubeMaterial = new THREE.MeshStandardMaterial({\n            color: obj.userData.stroke.color,\n            flatShading: true,\n            roughness: 1,\n            shininess: 0,\n            metalness: 1,\n        });\n    }\n    const mesh = new THREE.Mesh(tubeGeometry, tubeMaterial);\n    return mesh;\n}\n\n\nexport function convertMeshlineFillToGeometry(mesh, material, edges, duplicate) {\n    let obj = mesh;\n    let fill = obj.children[0].clone();\n    let fillGeometry = obj.children[0].geometry.clone();\n    fill.geometry = fillGeometry;\n    fill.geometry.applyMatrix4(obj.matrix);\n    fill.position.set(0, 0, 0);\n    fill.rotation.set(0, 0, 0);\n    fill.scale.set(1, 1, 1);\n\n    let fillMaterial;\n\n    if (material === \"basic\") {\n        fillMaterial = new THREE.MeshBasicMaterial({\n            color: obj.userData.fill.color,\n            side: THREE.FrontSide,\n            wireframe: false\n        });\n    }\n    else {\n        fillMaterial = new THREE.MeshStandardMaterial({\n            color: obj.userData.fill.color,\n            side: THREE.DoubleSide,\n        });\n    }\n\n    let fillMesh = new THREE.Mesh(fillGeometry, fillMaterial);\n    let fillMeshFlipped;\n\n    if (duplicate === true) {\n        let fillFlippedGeometry = fillGeometry.clone();\n        fillFlippedGeometry.index.array =\n            fillFlippedGeometry.index.array.reverse();\n        let fillMeshMaterial = new THREE.MeshStandardMaterial({\n            color: obj.userData.fill.color,\n            side: THREE.DoubleSide,\n        });\n        fillMeshFlipped = new THREE.Mesh(fillFlippedGeometry, fillMeshMaterial)\n    }\n\n    if (edges === true) {\n        const edges = new THREE.EdgesGeometry(fillGeometry);\n        const line = new THREE.LineSegments(\n            edges,\n            new THREE.LineBasicMaterial({\n                color: obj.userData.fill.color,\n            })\n        );\n\n        fillMesh.attach(line);\n    }\n\n\n    if (duplicate === true) {\n        let arr = [fillMesh, fillMeshFlipped]\n        return arr\n    } else {\n        return fillMesh;\n    }\n}\n","import { render } from \"./ExportUSDZ.vue?vue&type=template&id=206058b5&scoped=true\"\nimport script from \"./ExportUSDZ.vue?vue&type=script&lang=js\"\nexport * from \"./ExportUSDZ.vue?vue&type=script&lang=js\"\n\nimport \"./ExportUSDZ.vue?vue&type=style&index=0&id=206058b5&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\UNREAL\\\\Downloads\\\\3d\\\\Original\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-206058b5\"]])\n\nexport default __exports__","<template>\n  <button @click=\"exportToGltf()\">Export to GLB</button>\n</template>\n\n<script>\nimport * as THREE from \"three\";\nimport { GLTFExporter } from \"three/examples/jsm/exporters/GLTFExporter.js\";\nimport { scene } from \"../../App.vue\";\nimport {\n  convertMeshlineToGeometry,\n  convertMeshlineFillToGeometry,\n} from \"../convertMeshlineToGeometry.js\";\nlet sceneGLTF;\n\nexport default {\n  name: \"ExportGLTF\",\n  props: {},\n  data() {\n    return {};\n  },\n  methods: {\n    exportToGltf: async function () {\n      this.text = \"Exporting...\";\n      sceneGLTF = new THREE.Scene();\n\n      const group = new THREE.Group();\n\n      scene.children.forEach((obj) => {\n        if (\n          obj != undefined &&\n          obj.geometry &&\n          obj.geometry.type == \"MeshLine\" &&\n          obj.layers.mask == 2 &&\n          obj.geometry.attributes.position.array.length > 6\n        ) {\n          // The stroke\n          if (obj.userData.stroke.show_stroke === true) {\n            group.attach(convertMeshlineToGeometry(obj));\n          }\n\n          // The fill\n          if (obj.userData.fill.show_fill === true) {\n            sceneGLTF.add(convertMeshlineFillToGeometry(obj));\n          }\n        }\n      });\n\n      sceneGLTF.add(group);\n      sceneGLTF.scale.set(0.1, 0.1, 0.1);\n      sceneGLTF.updateMatrixWorld(true);\n      console.log(sceneGLTF);\n\n      const exporter = new GLTFExporter();\n      exporter.parse(\n        sceneGLTF,\n        function (result) {\n          if (result instanceof ArrayBuffer) {\n            saveArrayBuffer(result, \"scene.glb\");\n          } else {\n            const output = JSON.stringify(result, null, 2);\n            saveString(output, \"scene.gltf\");\n          }\n        },\n        { binary: true }\n      );\n      const link = document.createElement(\"a\");\n      link.style.display = \"none\";\n      document.body.appendChild(link);\n\n      function save(blob, filename) {\n        link.href = URL.createObjectURL(blob);\n        link.download = filename;\n        link.click();\n\n        // URL.revokeObjectURL( url ); breaks Firefox...\n      }\n\n      function saveString(text, filename) {\n        save(new Blob([text], { type: \"text/plain\" }), filename);\n      }\n\n      function saveArrayBuffer(buffer, filename) {\n        save(\n          new Blob([buffer], { type: \"application/octet-stream\" }),\n          filename\n        );\n      }\n    },\n  },\n  watch: {},\n  mounted() {},\n};\n</script>\n\n<style scoped>\nbutton {\n  border-bottom: 1px solid #ffe8b3;\n}\n\n.ar {\n  width: 100%;\n  align-content: center;\n  align-items: center;\n  background-color: rgba(0, 0, 0, 0);\n  border: none;\n  height: 44px;\n  padding-top: 6px;\n  padding-left: 12px;\n  padding-right: 12px;\n  border-bottom: 1px solid #ffe8b3;\n  box-sizing: border-box;\n}\n\n.ar > img {\n  width: auto;\n}\n</style>","import { render } from \"./ExportGLB.vue?vue&type=template&id=e1688084&scoped=true\"\nimport script from \"./ExportGLB.vue?vue&type=script&lang=js\"\nexport * from \"./ExportGLB.vue?vue&type=script&lang=js\"\n\nimport \"./ExportGLB.vue?vue&type=style&index=0&id=e1688084&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\UNREAL\\\\Downloads\\\\3d\\\\Original\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-e1688084\"]])\n\nexport default __exports__","<template>\r\n  <button @click=\"showModal\">Export to HTML</button>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"ExportHTML\",\r\n  methods: {\r\n    showModal: function () {\r\n      this.$emit(\"modal\", { display: true, mode: \"export-html\" });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\nbutton {\r\n  border-bottom: 1px solid #ffe8b3;\r\n}\r\n</style>\r\n","import { render } from \"./ExportHTML.vue?vue&type=template&id=302ae2fb&scoped=true\"\nimport script from \"./ExportHTML.vue?vue&type=script&lang=js\"\nexport * from \"./ExportHTML.vue?vue&type=script&lang=js\"\n\nimport \"./ExportHTML.vue?vue&type=style&index=0&id=302ae2fb&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\UNREAL\\\\Downloads\\\\3d\\\\Original\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-302ae2fb\"]])\n\nexport default __exports__","import { render } from \"./Share.vue?vue&type=template&id=24c8d122&scoped=true\"\nimport script from \"./Share.vue?vue&type=script&lang=js\"\nexport * from \"./Share.vue?vue&type=script&lang=js\"\n\nimport \"./Share.vue?vue&type=style&index=0&id=24c8d122&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\UNREAL\\\\Downloads\\\\3d\\\\Original\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-24c8d122\"]])\n\nexport default __exports__","<template>\r\n  <draggable-window\r\n    title=\"Shapes\"\r\n    :initialX=\"12\"\r\n    :initialY=\"140\"\r\n    :visible=\"selectedTool == 'draw'\"\r\n    :reopenTrigger=\"reopenTrigger\"\r\n    :start-open=\"startOpen\"\r\n    :is-open=\"isOpen\"\r\n    @close=\"$emit('close')\"\r\n  >\r\n    <div class=\"shapes-container\">\r\n      <button\r\n        v-for=\"shapeOption in shapes\"\r\n        :key=\"shapeOption.value\"\r\n        class=\"shape-btn\"\r\n        :class=\"{ active: shape === shapeOption.value }\"\r\n        @click=\"selectShape(shapeOption.value)\"\r\n        :title=\"shapeOption.name\"\r\n      >\r\n        <img :src=\"shapeOption.icon\" :alt=\"shapeOption.name\" />\r\n        <span class=\"tooltip\">{{ shapeOption.name }}</span>\r\n      </button>\r\n      <input\r\n        type=\"file\"\r\n        ref=\"fileInput\"\r\n        class=\"hidden\"\r\n        accept=\".glb,.gltf\"\r\n        @change=\"onFileChange\"\r\n      />\r\n      <!-- Custom models list -->\r\n      <div class=\"custom-models\">\r\n        <button\r\n          v-for=\"model in customModels\"\r\n          :key=\"model.id\"\r\n          class=\"shape-btn\"\r\n          :class=\"{ active: shape === model.id }\"\r\n          @click=\"selectCustomModel(model.id)\"\r\n          :title=\"model.name\"\r\n        >\r\n          <img src=\"@/assets/icons/Canvas-Custom.svg\" alt=\"Custom Model\" />\r\n          <span class=\"tooltip\">{{ model.name }}</span>\r\n        </button>\r\n      </div>\r\n      <div class=\"separator\"></div>\r\n    </div>\r\n  </draggable-window>\r\n</template>\r\n\r\n<script>\r\nimport DraggableWindow from \"./DraggableWindow.vue\";\r\n\r\nexport default {\r\n  name: \"ShapeSelector\",\r\n  components: { DraggableWindow },\r\n  props: {\r\n    selectedTool: String,\r\n    selectedShape: String,\r\n    reopenTrigger: Number,\r\n    startOpen: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    isOpen: Boolean,\r\n  },\r\n  emits: [\"selected-canvas-shape\", \"close\", \"load-custom-model\", \"set-material\"],\r\n  data() {\r\n    return {\r\n      window: window,\r\n      shape: \"plane\",\r\n      shapes: [\r\n        { value: \"plane\", name: \"Plane\", icon: require(\"@/assets/icons/Canvas-Plane.svg\") },\r\n        { value: \"cube\", name: \"Cube\", icon: require(\"@/assets/icons/Canvas-Cube.svg\") },\r\n        { value: \"cylinder\", name: \"Cylinder\", icon: require(\"@/assets/icons/Canvas-Cylinder.svg\") },\r\n        { value: \"sphere\", name: \"Sphere\", icon: require(\"@/assets/icons/Canvas-Sphere.svg\") },\r\n        { value: \"head\", name: \"Head\", icon: require(\"@/assets/icons/Canvas-Head.svg\") },\r\n        { value: \"custom\", name: \"Custom\", icon: require(\"@/assets/icons/Canvas-Custom.svg\") },\r\n      ],\r\n      customModels: [],\r\n    };\r\n  },\r\n  methods: {\r\n    selectShape(value) {\r\n      if (value === \"custom\") {\r\n        this.$refs.fileInput.click();\r\n      } else {\r\n        this.shape = value;\r\n        this.$emit(\"selected-canvas-shape\", value);\r\n      }\r\n    },\r\n    onFileChange(e) {\r\n      const file = e.target.files[0];\r\n      if (file) {\r\n        const url = URL.createObjectURL(file);\r\n        const modelId = Date.now().toString();\r\n        this.customModels.push({ id: modelId, name: file.name, url });\r\n        this.$emit(\"load-custom-model\", { url, id: modelId });\r\n        e.target.value = \"\";\r\n      }\r\n    },\r\n    selectCustomModel(id) {\r\n      this.shape = id; // track active custom model\r\n      this.$emit(\"selected-canvas-shape\", { customId: id });\r\n    },\r\n  },\r\n  watch: {\r\n    selectedShape(val) {\r\n      if (val) {\r\n        this.shape = val;\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    if (this.selectedShape) {\r\n      this.shape = this.selectedShape;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.shapes-container {\r\n  display: flex;\r\n  gap: 4px;\r\n}\r\n.separator {\r\n  width: 1px;\r\n  background: rgba(255,255,255,0.1);\r\n  margin: 0 4px;\r\n}\r\n.materials-container {\r\n    display: flex;\r\n    gap: 4px;\r\n}\r\n.matcap-preview {\r\n    width: 24px;\r\n    height: 24px;\r\n    border-radius: 50%;\r\n    border: 1px solid rgba(0,0,0,0.2);\r\n}\r\n\r\n.shape-btn {\r\n  position: relative;\r\n  width: 40px;\r\n  height: 40px;\r\n  background: transparent;\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: all 0.2s;\r\n  padding: 0;\r\n}\r\n.shape-btn:hover {\r\n  background: rgba(255, 255, 255, 0.1);\r\n  border-color: rgba(255, 255, 255, 0.2);\r\n}\r\n.shape-btn.active {\r\n  background: rgba(255, 255, 255, 0.2);\r\n  border-color: rgba(255, 255, 255, 0.3);\r\n  box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.1);\r\n}\r\n.shape-btn img {\r\n  width: 24px;\r\n  height: 24px;\r\n  filter: brightness(0) invert(1);\r\n}\r\n.tooltip {\r\n  position: absolute;\r\n  bottom: -32px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  background: rgba(0, 0, 0, 0.9);\r\n  color: white;\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n  font-size: 11px;\r\n  white-space: nowrap;\r\n  pointer-events: none;\r\n  opacity: 0;\r\n  transition: opacity 0.2s;\r\n  z-index: 1000;\r\n}\r\n.shape-btn:hover .tooltip {\r\n  opacity: 1;\r\n}\r\n.tooltip::before {\r\n  content: '';\r\n  position: absolute;\r\n  top: -4px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  width: 0;\r\n  height: 0;\r\n  border-left: 4px solid transparent;\r\n  border-right: 4px solid transparent;\r\n  border-bottom: 4px solid rgba(0, 0, 0, 0.9);\r\n}\r\n</style>\r\n","import { render } from \"./ShapeSelector.vue?vue&type=template&id=6f729269&scoped=true\"\nimport script from \"./ShapeSelector.vue?vue&type=script&lang=js\"\nexport * from \"./ShapeSelector.vue?vue&type=script&lang=js\"\n\nimport \"./ShapeSelector.vue?vue&type=style&index=0&id=6f729269&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\UNREAL\\\\Downloads\\\\3d\\\\Original\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6f729269\"]])\n\nexport default __exports__","\n<template>\n  <div v-if=\"modalProp.display\" class=\"fade\" @click.self=\"hideModal\">\n    <div class=\"modal\">\n      <div class=\"component-container\">\n        <Welcome v-if=\"modalProp.mode === 'about'\" />\n        <Feedback v-if=\"modalProp.mode === 'feedback'\" />\n        <export-for-blender v-if=\"modalProp.mode === 'blender'\" />\n        <export-for-procreate v-if=\"modalProp.mode === 'procreate'\" />\n        <Tutorial v-if=\"modalProp.mode === 'tutorial'\" />\n        <Survey v-if=\"modalProp.mode === 'survey'\" />\n        <brush-library v-if=\"modalProp.mode === 'brush-library'\" @set-preset=\"handleSetPreset\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Welcome from \"./ModalContent/Welcome.vue\";\nimport Feedback from \"./ModalContent/Feedback.vue\";\nimport ExportForBlender from \"./ModalContent/ExportForBlender.vue\";\nimport ExportForProcreate from \"./ModalContent/ExportForProcreate.vue\";\nimport Tutorial from \"./ModalContent/Tutorial.vue\";\nimport Survey from \"./ModalContent/Survey.vue\";\nimport BrushLibrary from \"./ModalContent/BrushLibrary.vue\";\n\nexport default {\n  name: \"VideoExportPreview\",\n  components: {\n    Welcome,\n    Feedback,\n    ExportForBlender,\n    ExportForProcreate,\n    Tutorial,\n    Survey,\n    BrushLibrary,\n  },\n  data() {\n    return {};\n  },\n  props: {\n    modalProp: Object,\n  },\n  methods: {\n    hideModal: function () {\n      this.$emit(\"modal-set\", { show: false, mode: \"about\" });\n    },\n    handleSetPreset: function (settings) {\n      this.$emit(\"set-preset\", settings);\n      this.hideModal();\n    },\n  },\n  watch: {\n    modalProp: function (val) {\n      console.log(val);\n    },\n  },\n};\n</script>\n\n<style scoped>\n.fade {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  background-color: rgba(0, 0, 0, 0.8);\n  z-index: 10;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.modal {\n  width: fit-content;\n  min-width: 50%;\n  max-width: 75%;\n  max-width: 800px;\n  height: fit-content;\n  min-height: 50%;\n  max-height: 70%;\n  overflow-y: scroll;\n  background-color: white;\n  filter: drop-shadow(0px 0px 24px rgba(0, 0, 0, 0.08));\n  border-radius: 8px;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: text;\n  touch-action: none;\n  padding: 32px;\n}\n\n.component-container {\n  height: 100%;\n  overflow-y: scroll;\n  -webkit-overflow-scrolling: touch;\n}\n</style>","\n<template>\n  <div>\n    <h1>Penzil</h1>\n    <h2>Ver 0.2</h2>\n\n    <h2>\n      Penzil is a 3d sketching app designed and developed by\n      <a href=\"http://twitter.com/jacopocolo\" target=\"_blank\">Jacopo Col</a>\n    </h2>\n    <p>\n      Penzil is built on top of the work of many people: the whole community\n      behind\n      <a href=\"https://github.com/vuejs/vue\" target=\"_blank\">vue.js</a>, the\n      whole community behind\n      <a href=\"https://github.com/mrdoob/three.js/\" target=\"_blank\">three.js</a\n      >,\n      <a href=\"https://github.com/spite/THREE.MeshLine\" target=\"_blank\"\n        >THREE.Meshline</a\n      >\n      by spite,\n      <a href=\"https://github.com/yomotsu/camera-controls\" target=\"_blank\"\n        >camera controls</a\n      >\n      by yomotsu,\n      <a\n        href=\"https://github.com/Fyrestar/THREE.InfiniteGridHelper\"\n        target=\"_blank\"\n        >InfiniteGridHelper</a\n      >\n      by Fyrestar,\n      <a\n        href=\"https://github.com/ArthurClemens/Javascript-Undo-Manager\"\n        target=\"_blank\"\n        >Undo-Manager</a\n      >\n      by ArthurClemens,\n      <a\n        href=\"https://github.com/TrevorSundberg/h264-mp4-encoder\"\n        target=\"_blank\"\n        >h264-mp4-encoder</a\n      >\n      by TrevorSundberg. This project would have been impossible without the\n      work of these people.\n    </p>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Welcome\",\n  data() {\n    return {};\n  },\n};\n</script>\n\n<style scoped>\ndiv {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n\nh1 {\n  font-size: 2em;\n}\n\nh2 {\n  font-size: 18px;\n  line-height: 120%;\n}\n\np {\n  font-size: 16px;\n  font-weight: 500;\n  line-height: 1.5em;\n}\n</style>","import { render } from \"./Welcome.vue?vue&type=template&id=4d550b7e&scoped=true\"\nimport script from \"./Welcome.vue?vue&type=script&lang=js\"\nexport * from \"./Welcome.vue?vue&type=script&lang=js\"\n\nimport \"./Welcome.vue?vue&type=style&index=0&id=4d550b7e&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\UNREAL\\\\Downloads\\\\3d\\\\Original\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4d550b7e\"]])\n\nexport default __exports__","\n<template>\n  <div>\n    <h1>Feedback</h1>\n    <p>Thanks for trying out Penzil.</p>\n    <p>\n      There are two ways to send feedback: first of all, you can reach out\n      <a href=\"http://twitter.com/jacopocolo\" target=\"_blank\"\n        >directly to me on Twitter</a\n      >. Otherwise, you can join the\n      <a href=\"https://discord.gg/jvzjNpZGCk\" target=\"_blank\">Penzil Discord</a>\n      server and post there. If you found something that you think it's a bug,\n      you can also\n      <a href=\"https://github.com/jacopocolo/Penzil/issues\" target=\"_blank\"\n        >open a new issue on Github</a\n      >.\n    </p>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Feedback\",\n  data() {\n    return {};\n  },\n};\n</script>\n\n<style scoped>\ndiv {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n\nh1 {\n  font-size: 2em;\n  display: inline;\n}\n\nh1 > h2 {\n  display: inline;\n}\n\nh2 {\n  font-size: 18px;\n  line-height: 120%;\n}\n\np {\n  font-size: 16px;\n  font-weight: 500;\n  line-height: 1.5em;\n}\n</style>","import { render } from \"./Feedback.vue?vue&type=template&id=1af5b4e9&scoped=true\"\nimport script from \"./Feedback.vue?vue&type=script&lang=js\"\nexport * from \"./Feedback.vue?vue&type=script&lang=js\"\n\nimport \"./Feedback.vue?vue&type=style&index=0&id=1af5b4e9&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\UNREAL\\\\Downloads\\\\3d\\\\Original\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1af5b4e9\"]])\n\nexport default __exports__","\n<template>\n  <div>\n    <h1>Export for Blender</h1>\n\n    <p>\n      You can export your sketch for Blender with the button below but there\n      isn't a proper improter yet, just a script. Hop in\n      <a href=\"https://discord.gg/jvzjNpZGCk\" target=\"_blank\">Penzil Discord</a>\n      server and I'll guide you along.\n    </p>\n    <button @click=\"exportToGp\">Export for Blender</button>\n  </div>\n</template>\n\n<script>\nimport * as THREE from \"three\";\nimport { scene } from \"../../App.vue\";\n\nexport default {\n  name: \"Export\",\n  data() {\n    return {};\n  },\n  methods: {\n    exportToGp: function () {\n      const json = [];\n      scene.children.forEach((obj) => {\n        //check if it's a line, if it's in the right layer and that we don't already have its original\n        if (\n          obj.geometry &&\n          obj.geometry.type == \"MeshLine\" &&\n          obj.layers.mask == 2\n        ) {\n          let line = {};\n\n          let geometry = obj.geometry.clone();\n          geometry.applyMatrix(obj.matrix);\n\n          line.vertices = Array.from(geometry.attributes.position.array);\n          line.stroke = obj.userData.stroke;\n          line.fill = obj.userData.fill;\n          line.mirrorOn = false;\n          line.position = new THREE.Vector3(0, 0, 0);\n          line.quaternion = new THREE.Quaternion(0, 0, 0, 1);\n          line.scale = new THREE.Vector3(1, 1, 1);\n          line.matrix = obj.matrix;\n          json.push(line);\n        }\n      });\n      console.log(json);\n\n      var dataStr =\n        \"data:text/json;charset=utf-8,\" +\n        encodeURIComponent(JSON.stringify(json));\n\n      var filename = prompt(\"Enter a name for your file\", \"gp_\");\n\n      if (filename != null) {\n        var el = document.createElement(\"a\");\n        el.setAttribute(\"href\", dataStr);\n        el.setAttribute(\"download\", filename + \".json\");\n        el.click();\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\ndiv {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n\nh1 {\n  font-size: 2em;\n  display: inline;\n}\n\nh1 > h2 {\n  display: inline;\n}\n\nh2 {\n  font-size: 18px;\n  line-height: 120%;\n}\n\np {\n  font-size: 16px;\n  font-weight: 500;\n  line-height: 1.5em;\n}\n\nbutton {\n  align-content: center;\n  background-color: rgba(0, 0, 0, 0);\n  border: none;\n  height: 44px;\n  width: 50%;\n  padding-left: 16px;\n  padding-right: 16px;\n  border: 1px solid #ffb000;\n  border-radius: 8px;\n}\n</style>","import { render } from \"./ExportForBlender.vue?vue&type=template&id=96b7a698&scoped=true\"\nimport script from \"./ExportForBlender.vue?vue&type=script&lang=js\"\nexport * from \"./ExportForBlender.vue?vue&type=script&lang=js\"\n\nimport \"./ExportForBlender.vue?vue&type=style&index=0&id=96b7a698&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\UNREAL\\\\Downloads\\\\3d\\\\Original\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-96b7a698\"]])\n\nexport default __exports__","\n<template>\n  <div>\n    <h1>Export for Procreate</h1>\n    <div class=\"row\">\n      <div id=\"scene-usdz-canvas\" class=\"column\">\n        <canvas id=\"usdz-canvas\"></canvas>\n        <span class=\"canvas-instructions\"\n          >Tap or click on a fill (visible face or edge) to flip it</span\n        >\n      </div>\n      <div id=\"usdz-options\" class=\"column\">\n        <p>\n          <input type=\"checkbox\" name=\"strokes\" v-model=\"mergeLines\" />\n          <label for=\"strokes\"\n            >Merge strokes (reccomended)\n            <p>\n              All strokes will appear as a single layer in Procreate. You will\n              lose individual stroke colors but you'll be able to repaint them\n              in Procreate. This settings allows you to import bigger Penzil\n              sketches before your artwork exceeds the device capabilities for\n              import.\n            </p></label\n          >\n          <br />\n          <input type=\"checkbox\" name=\"fills\" v-model=\"checkFills\" />\n          <label for=\"fills\"\n            >Manually check your fills. Tap or click on a visible face or edge\n            to flip it\n            <p>\n              Procrete only support single face meshes and you can only paint\n              their front side. Check that your fills are facing the direction\n              you want. If you just see an outline you are looking at the back\n              of a fill. Tap on its edge or turn it around and tap on it to flip\n              it.\n            </p>\n          </label>\n        </p>\n        <button @click=\"exportToUSDZ\">Export</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport * as THREE from \"three\";\nimport { scene } from \"../../App.vue\";\nimport { mergeBufferGeometries } from \"three/examples/jsm/utils/BufferGeometryUtils.js\";\nimport { USDZExporter } from \"three/examples/jsm/exporters/USDZExporter.js\";\nimport {\n  convertMeshlineToGeometry,\n  convertMeshlineFillToGeometry,\n} from \"../convertMeshlineToGeometry.js\";\nimport CameraControls from \"camera-controls\";\nCameraControls.install({ THREE: THREE });\n\nlet raycaster = new THREE.Raycaster();\nraycaster.params.Line.threshold = 0.1;\n// let texture = new THREE.TextureLoader().load(\"/watercolor.jpg\");\n// texture.wrapS = THREE.RepeatWrapping;\n// texture.wrapT = THREE.RepeatWrapping;\n// texture.repeat.set(1, 1);\nlet sceneUSDZ = new THREE.Scene();\nlet sceneExport = new THREE.Scene();\nlet rendererUSDZ = new THREE.WebGLRenderer({\n  antialias: true,\n  alpha: true,\n});\nlet cameraUSDZ = new THREE.PerspectiveCamera(\n  100,\n  window.innerWidth / window.innerHeight,\n  1,\n  1000\n);\nlet clock, cameraControls;\n\nexport default {\n  name: \"Export\",\n  data() {\n    return {\n      mergeLines: true,\n      checkFills: false,\n    };\n  },\n  methods: {\n    previewUSDZ: function () {\n      sceneUSDZ.background = new THREE.Color(0xf0f0f0);\n\n      rendererUSDZ = new THREE.WebGLRenderer({\n        antialias: true,\n        alpha: false,\n        canvas: document.getElementById(\"usdz-canvas\"),\n      });\n\n      rendererUSDZ.setPixelRatio(window.devicePixelRatio);\n\n      cameraUSDZ.zoom = 3;\n      cameraUSDZ.position.set(5, 5, 10);\n      cameraUSDZ.updateProjectionMatrix();\n\n      clock = new THREE.Clock();\n\n      cameraControls = new CameraControls(cameraUSDZ, rendererUSDZ.domElement);\n      cameraControls.dampingFactor = 20;\n      cameraControls.draggingDampingFactor = 200;\n      cameraControls.mouseButtons.left = CameraControls.ACTION.ROTATE;\n      cameraControls.mouseButtons.wheel = CameraControls.ACTION.ROTATE;\n      document.addEventListener(\"keydown\", (event) => {\n        if (event.code === \"Space\") {\n          cameraControls.mouseButtons.left = CameraControls.ACTION.TRUCK;\n          this.toolEnabled = false;\n        }\n      });\n      document.addEventListener(\"keyup\", (event) => {\n        if (event.code === \"Space\") {\n          cameraControls.mouseButtons.left = CameraControls.ACTION.ROTATE;\n          this.toolEnabled = true;\n        }\n      });\n      document.addEventListener(\"keydown\", (event) => {\n        if (event.code === \"AltLeft\") {\n          cameraControls.mouseButtons.left = CameraControls.ACTION.ROTATE;\n          this.toolEnabled = false;\n        }\n      });\n      document.addEventListener(\"keyup\", (event) => {\n        if (event.code === \"AltLeft\") {\n          cameraControls.mouseButtons.left = CameraControls.ACTION.ROTATE;\n          this.toolEnabled = true;\n        }\n      });\n      cameraControls.mouseButtons.middle = CameraControls.ACTION.DOLLY;\n      cameraControls.mouseButtons.right = CameraControls.ACTION.ZOOM;\n      cameraControls.touches.one = CameraControls.ACTION.TOUCH_ROTATE;\n      cameraControls.touches.two = CameraControls.ACTION.TOUCH_ZOOM_ROTATE;\n      cameraControls.touches.three = CameraControls.ACTION.TOUCH_DOLLY_TRUCK;\n      cameraControls.enabled = true;\n      cameraControls.maxZoom = 4000;\n      cameraControls.minZoom = 1.5;\n\n      // const group = new THREE.Group();\n\n      scene.children.forEach((obj) => {\n        if (\n          obj != undefined &&\n          obj.geometry &&\n          obj.geometry.type == \"MeshLine\" &&\n          obj.layers.mask == 2 &&\n          obj.geometry.attributes.position.array.length > 6\n        ) {\n          // The stroke\n          if (obj.userData.stroke.show_stroke === true) {\n            sceneUSDZ.add(convertMeshlineToGeometry(obj, \"basic\"));\n          }\n\n          // The fill\n          if (obj.userData.fill.show_fill === true) {\n            sceneUSDZ.add(convertMeshlineFillToGeometry(obj, \"basic\", true));\n          }\n        }\n      });\n\n      // sceneUSDZ.add(group);\n      sceneUSDZ.updateMatrixWorld(true);\n\n      rendererUSDZ.render(sceneUSDZ, cameraUSDZ);\n\n      rendererUSDZ.domElement.addEventListener(\"pointerup\", this.flipFace);\n      window.addEventListener(\"resize\", this.onWindowResize);\n      window.addEventListener(\"orientationchange\", this.onWindowResize);\n      this.onWindowResize();\n    },\n    onWindowResize: function () {\n      const canvas = rendererUSDZ.domElement;\n      cameraUSDZ.aspect = canvas.clientWidth / canvas.clientHeight;\n      cameraUSDZ.updateProjectionMatrix();\n      rendererUSDZ.setSize(canvas.clientWidth, canvas.clientHeight);\n      // renderer.setViewport(0, 0, window.innerWidth, window.innerHeight);\n      rendererUSDZ.render(sceneUSDZ, cameraUSDZ);\n    },\n    flipFace: function (event) {\n      let canvasBounds = rendererUSDZ.context.canvas.getBoundingClientRect();\n      let x =\n        ((event.clientX - canvasBounds.left) /\n          (canvasBounds.right - canvasBounds.left)) *\n          2 -\n        1;\n      let y =\n        -(\n          (event.clientY - canvasBounds.top) /\n          (canvasBounds.bottom - canvasBounds.top)\n        ) *\n          2 +\n        1;\n      raycaster.setFromCamera(new THREE.Vector2(x, y), cameraUSDZ);\n      var intersectedObject = raycaster.intersectObjects(sceneUSDZ.children)[0];\n      if (intersectedObject != undefined) {\n        if (intersectedObject.object.type === \"LineSegments\") {\n          let renderOrder = intersectedObject.object.parent.renderOrder;\n          let lineRenderOrder = intersectedObject.object.renderOrder;\n          intersectedObject.object.parent.geometry.index.array =\n            intersectedObject.object.parent.geometry.index.array.reverse();\n          intersectedObject.object.parent.geometry.index.needsUpdate = true;\n          intersectedObject.object.renderOrder = lineRenderOrder;\n          intersectedObject.object.parent.renderOrder = renderOrder;\n        } else {\n          let renderOrder = intersectedObject.object.renderOrder;\n          intersectedObject.object.geometry.index.array =\n            intersectedObject.object.geometry.index.array.reverse();\n          intersectedObject.object.geometry.index.needsUpdate = true;\n          intersectedObject.object.renderOrder = renderOrder;\n        }\n      }\n      rendererUSDZ.render(sceneUSDZ, cameraUSDZ);\n    },\n    animtateSceneUSDZ: function () {\n      const delta = clock.getDelta();\n      let hasCameraControlsUpdated = cameraControls.update(delta);\n\n      requestAnimationFrame(this.animtateSceneUSDZ);\n      if (hasCameraControlsUpdated) {\n        rendererUSDZ.render(sceneUSDZ, cameraUSDZ);\n      }\n    },\n    exportToUSDZ: async function () {\n      sceneExport = new THREE.Scene();\n      const group = new THREE.Group();\n      let geometries = [];\n      let uvs = [];\n\n      //potentially UVs could be kept by scaling and ofsetting\n      //https://stackoverflow.com/questions/23530449/rotate-scale-and-translate-2d-coordinates\n\n      for (let o = 0; o < sceneUSDZ.children.length; o++) {\n        const obj = sceneUSDZ.children[o];\n        if (obj.material?.type === \"MeshBasicMaterial\") {\n          let newObj = obj.clone();\n          newObj.material = new THREE.MeshStandardMaterial({\n            color: obj.material.color,\n          });\n          if (\n            this.mergeLines === true &&\n            obj.geometry?.type === \"TubeBufferGeometry\"\n          ) {\n            //these are strokes\n            let geometry = obj.geometry;\n            geometries.push(geometry);\n\n            let uv = Array.from(obj.geometry.attributes.uv.array);\n            uvs.push(uv);\n          } else {\n            //these are fills\n            sceneExport.add(newObj);\n          }\n        }\n      }\n\n      if (geometries.length > 0) {\n        const material = new THREE.MeshStandardMaterial({\n          color: 0x1c1c1e,\n          flatShading: true,\n        });\n        const mergedGeometry = mergeBufferGeometries(geometries, false);\n\n        const cells = Math.ceil(Math.sqrt(uvs.length));\n        const offset = 1 / cells;\n        let count = 0;\n\n        console.log({ uvs_length: uvs.length, cells: cells, offset: offset });\n\n        for (let y = 0; y < cells; y++) {\n          for (let x = 0; x < cells; x++) {\n            let i = count;\n            if (i > uvs.length - 1) {\n              continue;\n            } else {\n              for (let z = 0; z < uvs[i].length; z = z + 2) {\n                uvs[i][z] = uvs[i][z] + (x / offset) * offset;\n                uvs[i][z + 1] = uvs[i][z + 1] + (y / offset) * offset;\n              }\n              count++;\n            }\n          }\n        }\n\n        let mergedUvs = [].concat.apply([], uvs);\n        for (let a = 0; a < mergedUvs.length; a++) {\n          mergedUvs[a] = mergedUvs[a] * offset;\n        }\n        mergedGeometry.setAttribute(\n          \"uv\",\n          new THREE.Float32BufferAttribute(mergedUvs, 2)\n        );\n        mergedGeometry.attributes.uv.needsUpdate = true;\n\n        const mesh = new THREE.Mesh(mergedGeometry, material);\n\n        sceneExport.add(mesh);\n        group.add(mesh);\n        sceneExport.add(group);\n      }\n\n      const exporter = new USDZExporter();\n      const arraybuffer = await exporter.parse(sceneExport);\n      const blob = new Blob([arraybuffer], {\n        type: \"application/octet-stream\",\n      });\n      var el = document.createElement(\"a\");\n      el.setAttribute(\"href\", URL.createObjectURL(blob));\n      el.setAttribute(\"download\", \"sketch.usdz\");\n      el.click();\n    },\n    clear: function (obj) {\n      while (obj.children.length > 0) {\n        this.clear(obj.children[0]);\n        obj.remove(obj.children[0]);\n      }\n      if (obj.geometry) obj.geometry.dispose();\n\n      if (obj.material) {\n        Object.keys(obj.material).forEach((prop) => {\n          if (!obj.material[prop]) return;\n          if (\n            obj.material[prop] !== null &&\n            typeof obj.material[prop].dispose === \"function\"\n          )\n            obj.material[prop].dispose();\n        });\n        obj.material.dispose();\n      }\n    },\n  },\n  mounted() {\n    this.previewUSDZ();\n    this.animtateSceneUSDZ();\n    const canvas = rendererUSDZ.domElement;\n    rendererUSDZ.setSize(canvas.clientWidth, canvas.clientHeight);\n  },\n  unmounted() {\n    this.clear(sceneUSDZ);\n    this.clear(sceneExport);\n  },\n};\n</script>\n\n<style scoped>\n.row {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  width: 100%;\n  padding-top: 1em;\n  padding-bottom: 1em;\n}\n\n@media (orientation: portrait) {\n  .row {\n    flex-direction: column;\n  }\n\n  #usdz-options {\n    padding-left: 0px;\n  }\n}\n\n@media (orientation: landscape) {\n  #usdz-options {\n    padding-left: 16px;\n  }\n}\n\n.column {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  /* flex-basis: 100%; */\n}\n\n#usdz-canvas {\n  position: relative;\n  top: 0;\n  width: 95%;\n  height: 100%;\n}\n\n.canvas-instructions {\n  position: relative;\n  top: 0.5em;\n  text-align: center;\n  width: 90%;\n  margin-bottom: 1em;\n}\n\ninput > label {\n  text-indent: 1.25em;\n}\n\nlabel {\n  margin-left: 0.25em;\n  font-weight: 900;\n}\n\nlabel > p {\n  margin-left: 1em;\n  margin-top: 0.5em;\n  font-size: 1em;\n}\n\nh1 {\n  font-size: 2em;\n  display: inline;\n}\n\nh1 > h2 {\n  display: inline;\n}\n\nh2 {\n  font-size: 18px;\n  line-height: 120%;\n}\n\np {\n  font-size: 16px;\n  font-weight: 500;\n  line-height: 1.5em;\n  margin-top: 1em;\n}\n\nbutton {\n  align-content: center;\n  background-color: rgba(0, 0, 0, 0);\n  border: none;\n  height: 44px;\n  width: 50%;\n  padding-left: 16px;\n  padding-right: 16px;\n  border: 1px solid #ffb000;\n  border-radius: 8px;\n  margin-top: 1.5em;\n}\n</style>","import { render } from \"./ExportForProcreate.vue?vue&type=template&id=d410ddd2&scoped=true\"\nimport script from \"./ExportForProcreate.vue?vue&type=script&lang=js\"\nexport * from \"./ExportForProcreate.vue?vue&type=script&lang=js\"\n\nimport \"./ExportForProcreate.vue?vue&type=style&index=0&id=d410ddd2&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\UNREAL\\\\Downloads\\\\3d\\\\Original\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-d410ddd2\"]])\n\nexport default __exports__","\n<template>\n  <div>\n    <p class=\"self-destruct\">\n      This tutorial will self-destruct\n      {{ 4 - count === 0 ? \"the next\" : \"in \" + countDown + \"\" }}\n      {{ 4 - count > 1 ? \"sessions\" : \"session\" }}.\n    </p>\n    <h1>A quick intro to Penzil v 0.2</h1>\n\n    <p>\n      Penzil is a web application for sketching in 3d. It is primarily designed\n      for touch screens but it works on desktop as well (although, if you are on\n      desktop, I recommend you look into\n      <a href=\"https://www.youtube.com/watch?v=c57qq2nE3B0\" target=\"_blank\"\n        >Blender's Grease Pencil</a\n      >).\n    </p>\n    <p>\n      In Penzil, you draw on a \"3d canvas\". The \"3d canvas\" is the white surface\n      at the center of the screen. You can only draw on the canvas. By moving\n      and rotating the canvas around, you can sketch in 3d.\n    </p>\n    <h2>Drawing and erasing</h2>\n    <p>\n      You can draw and erase with the left mouse button, finger or pen on top of\n      the \"3d canvas\".\n    </p>\n    <p>\n      Switch between drawing and erasing using the bar at the top of the screen.\n    </p>\n\n    <div class=\"container\">\n      <iframe\n        src=\"https://www.youtube.com/embed/yeyGktOCNfk\"\n        title=\"YouTube video player\"\n        frameborder=\"0\"\n        allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n        class=\"video\"\n      ></iframe>\n    </div>\n\n    <h2>Rotate or move the 3d canvas</h2>\n    <p>\n      You can move the \"3d canvas\" by grabbing the arrow heads at the center of\n      the \"3d canvas\". You can rotate the \"3d canvas\" by grabbing the arcs. You\n      grab arrow heads and arcs simply by tapping on them or clicking with the\n      left mouse and dragging.\n    </p>\n\n    <div class=\"container\">\n      <iframe\n        src=\"https://www.youtube.com/embed/sPfi9Alqugk\"\n        title=\"YouTube video player\"\n        frameborder=\"0\"\n        allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n        class=\"video\"\n      ></iframe>\n    </div>\n\n    <h2>Look around and pan</h2>\n    <p>\n      You can look around using two fingers, using a trackpad, a trackball or by\n      pressing the Option key (\"Alt\") and using the left mouse button. You can\n      pan by swiping with three fingers or by pressing the spacebar and clicking\n      with the left button.<br />You can also use the cube in the top right\n      corner to look around. To position the camera precisely, tap on any of the\n      faces of the cube.\n    </p>\n\n    <div class=\"container\">\n      <iframe\n        src=\"https://www.youtube.com/embed/ON1rNnmjKbQ\"\n        title=\"YouTube video player\"\n        frameborder=\"0\"\n        allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n        class=\"video\"\n      ></iframe>\n    </div>\n\n    <h2>\"3d canvas\" shapes</h2>\n    <p>\n      Penzil comes with several \"3d canvas\" shapes. The default one is a flat\n      plane but you can also pick: a cube, a cylinder, a sphere and a simplified\n      head model. They all behave the same: draw on them and your lines will\n      stick to the surface of the \"3d canvas\".\n    </p>\n\n    <div class=\"container\">\n      <iframe\n        src=\"https://www.youtube.com/embed/iwI_lWCxttE\"\n        title=\"YouTube video player\"\n        frameborder=\"0\"\n        allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n        class=\"video\"\n      ></iframe>\n    </div>\n\n    <h2>\"3d canvas\" settings</h2>\n    <p>\n      There are several settings available for the \"3d canvas\". Most are\n      self-explanatory: you can lock and unlock the movement of the \"3d canvas\"\n      and you can show or hide it. But you can also switch the transformation\n      tools between Move and Scale.<br />The Scale tool allows you to resize the\n      \"3d canvas\". Note that depth transformations are not availalbe for flat\n      surfaceses like the plane.<br />The snap toggle allows you to turn on or\n      off snapping. The snapping allows you to move and rotate the \"3d canvas\"\n      in fixed increments.<br />Finally the reset button resets all the\n      transformations applies to the \"3d canvas\".\n    </p>\n\n    <div class=\"container\">\n      <iframe\n        src=\"https://www.youtube.com/embed/cXAbjI5YEM0\"\n        title=\"YouTube video player\"\n        frameborder=\"0\"\n        allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n        class=\"video\"\n      ></iframe>\n    </div>\n\n    <h2>Stroke and fill settings</h2>\n    <p>\n      The round icon next to the draw tool at the top allows you to change the\n      size and the color of the stroke, and the color of fill. Stroke and fill\n      can also be toggled on independently.\n      <br />When using fill, note that results may vary when drawing on surfaces\n      that are not flat. To improve quality of the fill, try to draw the same\n      shape but slower.\n    </p>\n\n    <div class=\"container\">\n      <iframe\n        src=\"https://www.youtube.com/embed/8A0j1mu0i_Y\"\n        title=\"YouTube video player\"\n        frameborder=\"0\"\n        allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n        class=\"video\"\n      ></iframe>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Tutorial\",\n  data() {\n    return {\n      count: 0,\n      countDown: 0,\n    };\n  },\n  mounted() {\n    if (localStorage.getItem(\"tut01\") === null) {\n      this.count = 0;\n    } else {\n      this.count = parseInt(window.localStorage.tut02);\n    }\n    this.countDown = -(this.count - 4);\n  },\n};\n</script>\n\n<style scoped>\ndiv {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  max-width: 95%;\n  height: calc(100% + 1px);\n}\n\nh1 {\n  font-size: 2em;\n}\n\nh2 {\n  font-size: 18px;\n  line-height: 120%;\n}\n\np {\n  font-size: 16px;\n  font-weight: 500;\n  line-height: 1.6em;\n}\n\n.self-destruct {\n  font-size: 16px;\n  background-color: #ffe8b3;\n  width: 100%;\n  padding-left: 8px;\n}\n\n.container {\n  position: relative;\n  width: 100%;\n  height: 0;\n  padding-bottom: 56.25%;\n}\n\n.video {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n</style>","import { render } from \"./Tutorial.vue?vue&type=template&id=6ea82b80&scoped=true\"\nimport script from \"./Tutorial.vue?vue&type=script&lang=js\"\nexport * from \"./Tutorial.vue?vue&type=script&lang=js\"\n\nimport \"./Tutorial.vue?vue&type=style&index=0&id=6ea82b80&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\UNREAL\\\\Downloads\\\\3d\\\\Original\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6ea82b80\"]])\n\nexport default __exports__","<template>\n  <div>\n    <iframe\n      src=\"https://docs.google.com/forms/d/e/1FAIpQLSccJWlem-HLrgscUJLXLqKpFXOC3LnDkUUJOoF7Saxrq3gNKQ/viewform?embedded=true\"\n      width=\"100%\"\n      height=\"2478\"\n      frameborder=\"0\"\n      marginheight=\"0\"\n      marginwidth=\"0\"\n      >Loading</iframe\n    >\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Survey\",\n  data() {\n    return {};\n  },\n  mounted() {},\n};\n</script>\n\n<style scoped>\ndiv {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  max-width: 95%;\n  height: calc(100% + 1px);\n}\n\nh1 {\n  font-size: 40px;\n}\n\nh2 {\n  font-size: 18px;\n  line-height: 120%;\n}\n\np {\n  font-size: 16px;\n  font-weight: 500;\n  line-height: 1.6em;\n}\n\n.self-destruct {\n  font-size: 16px;\n  background-color: #ffe8b3;\n  width: 100%;\n  padding-left: 8px;\n}\n\n.container {\n  position: relative;\n  width: 100%;\n  height: 0;\n  padding-bottom: 56.25%;\n}\n\n.video {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n</style>\n","import { render } from \"./Survey.vue?vue&type=template&id=57022cc6&scoped=true\"\nimport script from \"./Survey.vue?vue&type=script&lang=js\"\nexport * from \"./Survey.vue?vue&type=script&lang=js\"\n\nimport \"./Survey.vue?vue&type=style&index=0&id=57022cc6&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\UNREAL\\\\Downloads\\\\3d\\\\Original\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-57022cc6\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"brush-library\">\r\n    <h2>Brush Library</h2>\r\n    <div class=\"presets\">\r\n      <div class=\"preset\" @click=\"selectPreset('pencil')\">\r\n        <div class=\"icon\"></div>\r\n        <div class=\"info\">\r\n          <h3>Pencil</h3>\r\n          <p>Fine lines for sketching.</p>\r\n        </div>\r\n      </div>\r\n      <div class=\"preset\" @click=\"selectPreset('pen')\">\r\n        <div class=\"icon\"></div>\r\n        <div class=\"info\">\r\n          <h3>Pen</h3>\r\n          <p>Clean lines for inking.</p>\r\n        </div>\r\n      </div>\r\n      <div class=\"preset\" @click=\"selectPreset('marker')\">\r\n        <div class=\"icon\"></div>\r\n        <div class=\"info\">\r\n          <h3>Marker</h3>\r\n          <p>Thick lines for coloring.</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"BrushLibrary\",\r\n  emits: [\"set-preset\"],\r\n  methods: {\r\n    selectPreset(type) {\r\n      let settings = {};\r\n      switch (type) {\r\n        case \"pencil\":\r\n          settings = {\r\n            strokeWidth: 2,\r\n            strokeColor: { r: 50, g: 50, b: 50 },\r\n            stroke: true,\r\n            fill: false\r\n          };\r\n          break;\r\n        case \"pen\":\r\n          settings = {\r\n            strokeWidth: 5,\r\n            strokeColor: { r: 0, g: 0, b: 0 },\r\n            stroke: true,\r\n            fill: false\r\n          };\r\n          break;\r\n        case \"marker\":\r\n          settings = {\r\n            strokeWidth: 20,\r\n            strokeColor: { r: 255, g: 0, b: 0 }, // Red marker by default? Or maybe blue?\r\n            stroke: true,\r\n            fill: false\r\n          };\r\n          break;\r\n      }\r\n      this.$emit(\"set-preset\", settings);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.brush-library {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16px;\r\n  width: 100%;\r\n}\r\n\r\n.presets {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n}\r\n\r\n.preset {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16px;\r\n  padding: 12px;\r\n  background-color: #f5f5f5;\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\n.preset:hover {\r\n  background-color: #ffe8b3;\r\n}\r\n\r\n.icon {\r\n  font-size: 2em;\r\n}\r\n\r\n.info h3 {\r\n  margin: 0 0 4px 0;\r\n  font-size: 1.1em;\r\n}\r\n\r\n.info p {\r\n  margin: 0;\r\n  color: #666;\r\n  font-size: 0.9em;\r\n  font-weight: normal;\r\n}\r\n</style>\r\n","import { render } from \"./BrushLibrary.vue?vue&type=template&id=5811f743&scoped=true\"\nimport script from \"./BrushLibrary.vue?vue&type=script&lang=js\"\nexport * from \"./BrushLibrary.vue?vue&type=script&lang=js\"\n\nimport \"./BrushLibrary.vue?vue&type=style&index=0&id=5811f743&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\UNREAL\\\\Downloads\\\\3d\\\\Original\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5811f743\"]])\n\nexport default __exports__","import { render } from \"./Modal.vue?vue&type=template&id=320b9c99&scoped=true\"\nimport script from \"./Modal.vue?vue&type=script&lang=js\"\nexport * from \"./Modal.vue?vue&type=script&lang=js\"\n\nimport \"./Modal.vue?vue&type=style&index=0&id=320b9c99&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\UNREAL\\\\Downloads\\\\3d\\\\Original\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-320b9c99\"]])\n\nexport default __exports__","\n<template>\n  <div v-if=\"previewing\" class=\"fade\">\n    <div class=\"fade-controls\">\n      <button @click=\"cancel()\">Cancel</button>\n      <span class=\"rightAlign\">\n        <input\n          type=\"radio\"\n          name=\"360\"\n          value=\"360\"\n          id=\"360\"\n          v-model=\"loop\"\n          :disabled=\"recording\"\n        />\n        <label for=\"360\">360</label>\n        <input\n          type=\"radio\"\n          name=\"bf\"\n          value=\"bf\"\n          id=\"bf\"\n          v-model=\"loop\"\n          :disabled=\"recording\"\n        />\n        <label for=\"bf\">Back and forth</label>\n        <button @click=\"startRecording()\" :disabled=\"recording\" style=\"pointer-events: auto; background: rgba(0,0,0,0.1); border: 1px solid #ccc;\">\n          {{ !recording ? \"Start recording\" : \"Recording...\" }}\n        </button>\n      </span>\n      <span v-if=\"recording\"\n        >Recording frame {{ currentLength }} of {{ length }}</span\n      >\n    </div>\n  </div>\n</template>\n\n<script>\nimport * as THREE from \"three\";\nimport { renderer, camera, scene, cameraControls } from \"../App.vue\";\nimport * as HME from \"h264-mp4-encoder\";\n\nexport default {\n  name: \"VideoExport\",\n  components: {},\n  data() {\n    return {\n      previewing: false,\n      recording: false,\n      loop: \"360\",\n      length: 240, //in frames\n      currentLength: 0, //current frame\n      startAzimuthAngle: undefined,\n      polarAngle: undefined,\n      pos: [],\n    };\n  },\n  emits: [\"stop-previewing\"],\n  props: {\n    show: Boolean,\n  },\n  methods: {\n    easeInOutQuad(t, b, c, d) {\n      t /= d / 2;\n      if (t < 1) return (c / 2) * t * t + b;\n      t--;\n      return (-c / 2) * (t * (t - 2) - 1) + b;\n    },\n    easeInOutQuadYoyo(t, b, c, d) {\n      if (t <= d / 2) {\n        this.pos.push(this.easeInOutQuad(t, b, c, d / 2));\n        let v = this.pos[this.pos.length - 1];\n        return v;\n      } else {\n        let v = this.pos.pop();\n        return v;\n      }\n    },\n    easing(loop) {\n      //easing function: http://gizma.com/easing/\n      if (loop == \"360\") {\n        return this.easeInOutQuad(\n          this.currentLength,\n          this.startAzimuthAngle,\n          360 * THREE.MathUtils.DEG2RAD,\n          this.length\n        );\n      } else if (loop == \"bf\") {\n        return this.easeInOutQuadYoyo(\n          this.currentLength,\n          this.startAzimuthAngle,\n          Math.PI / 20,\n          this.length\n        );\n      }\n    },\n    animate(ctx, encoder) {\n      if (!this.previewing) {\n        return;\n      }\n      \n      // If we are recording but no encoder is passed, this is the old preview loop. Kill it.\n      if (this.recording && !encoder) {\n          return;\n      }\n\n      renderer.render(scene, camera);\n      let f = this.easing(this.loop);\n      cameraControls.rotateTo(f, this.polarAngle, false);\n      if (!this.recording) {\n        //animate in loop\n        if (this.currentLength < this.length) {\n          requestAnimationFrame(() => this.animate(ctx, encoder));\n          this.currentLength++;\n        } else {\n          this.currentLength = 0;\n          requestAnimationFrame(() => this.animate(ctx, encoder));\n          //cameraControls.enabled = true;\n        }\n      } else {\n        //record and exit\n        //only record after the fist frame, it's needed to let the camera riposition properly\n        if (this.currentLength > 0) {\n          var buf = new Uint8Array(\n            ctx.drawingBufferWidth * ctx.drawingBufferHeight * 4\n          );\n          ctx.readPixels(\n            0,\n            0,\n            ctx.drawingBufferWidth,\n            ctx.drawingBufferHeight,\n            ctx.RGBA,\n            ctx.UNSIGNED_BYTE,\n            buf\n          );\n          var halfHeight = (ctx.drawingBufferHeight / 2) | 0; // the | 0 keeps the result an int\n          var bytesPerRow = ctx.drawingBufferWidth * 4;\n          // make a temp buffer to hold one row\n          var temp = new Uint8Array(ctx.drawingBufferWidth * 4);\n          for (var y = 0; y < halfHeight; ++y) {\n            var topOffset = y * bytesPerRow;\n            var bottomOffset = (ctx.drawingBufferHeight - y - 1) * bytesPerRow;\n            // make copy of a row on the top half\n            temp.set(buf.subarray(topOffset, topOffset + bytesPerRow));\n            // copy a row from the bottom half to the top\n            buf.copyWithin(topOffset, bottomOffset, bottomOffset + bytesPerRow);\n            // copy the copy of the top half row to the bottom half\n            buf.set(temp, bottomOffset);\n          }\n          encoder.addFrameRgba(buf);\n        }\n\n        if (this.currentLength < this.length) {\n          requestAnimationFrame(() => {\n            this.animate(ctx, encoder);\n          });\n          this.currentLength++;\n        } else {\n          encoder.finalize();\n          const uint8Array = encoder.FS.readFile(encoder.outputFilename);\n          this.download(\n            URL.createObjectURL(new Blob([uint8Array], { type: \"video/mp4\" }))\n          );\n          encoder.delete();\n          this.cancel();\n        }\n      }\n    },\n    startRecording() {\n      // Force 1x pixel ratio and even dimensions for recording safety\n      renderer.setPixelRatio(1);\n      const width = window.innerWidth % 2 === 0 ? window.innerWidth : window.innerWidth - 1;\n      const height = window.innerHeight % 2 === 0 ? window.innerHeight : window.innerHeight - 1;\n      renderer.setSize(width, height);\n\n      cameraControls.normalizeRotations();\n      HME.createH264MP4Encoder().then((encoder) => {\n        let ctx = renderer.getContext();\n        encoder.width = ctx.drawingBufferWidth;\n        encoder.height = ctx.drawingBufferHeight;\n        encoder.initialize();\n        this.recording = true;\n        this.currentLength = 0;\n        this.animate(ctx, encoder);\n      });\n    },\n    startPreview() {\n      cameraControls.normalizeRotations();\n      this.startAzimuthAngle = cameraControls.azimuthAngle;\n      this.polarAngle = cameraControls.polarAngle;\n      this.previewing = true;\n      cameraControls.dampingFactor = 0.5;\n      this.animate();\n    },\n    download(url, filename) {\n      const anchor = document.createElement(\"a\");\n      anchor.href = url;\n      anchor.download = filename || \"download\";\n      anchor.click();\n    },\n    cancel: function () {\n      this.previewing = false;\n      this.recording = false;\n      \n      // Restore renderer settings\n      renderer.setPixelRatio(window.devicePixelRatio);\n      window.dispatchEvent(new Event('resize'));\n\n      this.currentLength = 0;\n      this.pos = [];\n      camera.layers.enable(0);\n      this.loop = \"360\";\n      cameraControls.dampingFactor = 0.5;\n      cameraControls.rotateTo(this.startAzimuthAngle, this.polarAngle, true);\n      this.startAzimuthAngle = undefined;\n      this.polarAngle = undefined;\n      // cameraControls.enabled = true;\n      setTimeout(() => {\n        cameraControls.dampingFactor = 20;\n        cameraControls.normalizeRotations();\n      }, 100);\n      renderer.render(scene, camera);\n      this.$emit(\"stop-previewing\", false);\n    },\n  },\n  watch: {\n    show: function (val) {\n      if (val === true) {\n        this.startPreview();\n      }\n    },\n    loop: function () {\n      this.currentLength = 0;\n    },\n  },\n  mounted() {},\n};\n</script>\n\n<style>\n.fade {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  background-color: rgba(0, 0, 0, 0.2);\n  z-index: 10;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.fade-controls {\n  background-color: white;\n  color: black;\n  margin: 0 auto;\n  position: absolute;\n  bottom: 0px;\n  padding: 10px;\n  width: 100vw;\n  z-index: 5;\n}\n\n.rightAlign > label {\n  width: 200px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\nbutton {\n  align-content: center;\n  background-color: rgba(0, 0, 0, 0);\n  border: none;\n  height: 44px;\n  padding-left: 16px;\n  padding-right: 16px;\n  margin-right: 2px;\n  cursor: pointer;\n  z-index: 100;\n  position: relative;\n}\n\n.rightAlign {\n  float: right;\n  display: flex;\n}\n</style>","import { render } from \"./VideoExportPreview.vue?vue&type=template&id=5584fdcf\"\nimport script from \"./VideoExportPreview.vue?vue&type=script&lang=js\"\nexport * from \"./VideoExportPreview.vue?vue&type=script&lang=js\"\n\nimport \"./VideoExportPreview.vue?vue&type=style&index=0&id=5584fdcf&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\UNREAL\\\\Downloads\\\\3d\\\\Original\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <draggable-window \r\n    title=\"Scene Setup\" \r\n    :initialX=\"window.innerWidth - 240\" \r\n    :initialY=\"400\"\r\n    :visible=\"visible\"\r\n    :reopenTrigger=\"reopenTrigger\"\r\n    :start-open=\"startOpen\"\r\n    :is-open=\"isOpen\"\r\n    @close=\"$emit('close')\"\r\n  >\r\n    <div class=\"scene-settings\">\r\n      <!-- Background Settings -->\r\n      <div class=\"group-title\">Background</div>\r\n      <div class=\"setting-row\">\r\n        <span>Color</span>\r\n        <input type=\"color\" v-model=\"backgroundColor\" @input=\"updateBackground\">\r\n      </div>\r\n       <div class=\"setting-row\">\r\n          <span>Fog</span>\r\n          <div class=\"toggle\" @click=\"toggleFog\">\r\n            <img :src=\"fogVisible ? require('@/assets/icons/checkbox-checked.svg') : require('@/assets/icons/checkbox.svg')\" />\r\n          </div>\r\n      </div>\r\n\r\n      <div class=\"separator\"></div>\r\n\r\n      <!-- Environment Settings -->\r\n      <div class=\"group-title\">Environment (HDRI)</div>\r\n      <div class=\"setting-row\">\r\n        <span>Image (.hdr, .jpg)</span>\r\n        <label class=\"custom-file-upload\">\r\n            <input type=\"file\" @change=\"handleFileChange\" accept=\".hdr,.jpg,.png,.jpeg\" />\r\n            Upload\r\n        </label>\r\n      </div>\r\n      <div class=\"setting-row\">\r\n        <span>Active (Lighting)</span>\r\n        <div class=\"toggle\" @click=\"toggleHdriActive\">\r\n          <img :src=\"hdriActive ? require('@/assets/icons/checkbox-checked.svg') : require('@/assets/icons/checkbox.svg')\" />\r\n        </div>\r\n      </div>\r\n       <div class=\"setting-row\" v-if=\"hdriActive\">\r\n        <span>Visible Background</span>\r\n        <div class=\"toggle\" @click=\"toggleHdriBackground\">\r\n          <img :src=\"hdriBackgroundVisible ? require('@/assets/icons/checkbox-checked.svg') : require('@/assets/icons/checkbox.svg')\" />\r\n        </div>\r\n      </div>\r\n\r\n       <div class=\"separator\"></div>\r\n\r\n\r\n\r\n\r\n      <div class=\"separator\"></div>\r\n\r\n      <!-- Grid Settings -->\r\n      <div class=\"group-title\">Grid</div>\r\n      <div class=\"setting-row\">\r\n        <span>Visible</span>\r\n        <div class=\"toggle\" @click=\"toggleGrid\">\r\n          <img :src=\"gridVisible ? require('@/assets/icons/checkbox-checked.svg') : require('@/assets/icons/checkbox.svg')\" />\r\n        </div>\r\n      </div>\r\n       <div class=\"setting-row\" v-if=\"gridVisible\">\r\n        <span>Color</span>\r\n        <input type=\"color\" v-model=\"gridColor\" @input=\"updateGrid\">\r\n      </div>\r\n      <div class=\"setting-row\" v-if=\"gridVisible\">\r\n        <span>Size</span>\r\n        <input type=\"range\" min=\"1\" max=\"100\" v-model.number=\"gridSize\" @input=\"updateGrid\">\r\n      </div>\r\n      <div class=\"setting-row\" v-if=\"gridVisible\">\r\n        <span>Divisions</span>\r\n        <input type=\"range\" min=\"1\" max=\"50\" v-model.number=\"gridDivisions\" @input=\"updateGrid\">\r\n      </div>\r\n      <div class=\"setting-row\" v-if=\"gridVisible\">\r\n        <span>Divisions Color</span>\r\n        <input type=\"color\" v-model=\"divisionsColor\" @input=\"updateGrid\">\r\n      </div>\r\n      <div class=\"setting-row\">\r\n        <span>Fade Dist</span>\r\n        <input type=\"range\" min=\"10\" max=\"2000\" v-model.number=\"fadeDistance\" @input=\"updateGrid\">\r\n      </div>\r\n      <div class=\"setting-row\">\r\n        <span>Fade Near</span>\r\n        <input type=\"range\" min=\"0\" max=\"1000\" v-model.number=\"fadeDistanceNear\" @input=\"updateGrid\">\r\n      </div>\r\n\r\n      <div class=\"setting-row\">\r\n          <span>Infinite</span>\r\n          <div class=\"toggle\" @click=\"toggleInfiniteGrid\">\r\n            <img :src=\"infiniteGrid ? require('@/assets/icons/checkbox-checked.svg') : require('@/assets/icons/checkbox.svg')\" />\r\n          </div>\r\n      </div>\r\n\r\n    </div>\r\n  </draggable-window>\r\n</template>\r\n\r\n<script>\r\nimport DraggableWindow from \"./DraggableWindow.vue\";\r\nimport * as THREE from \"three\";\r\nimport { RGBELoader } from \"three/examples/jsm/loaders/RGBELoader.js\";\r\nimport { scene, renderer, camera } from \"../App.vue\";\r\n// import { canvas } from \"./Canvas.vue\";\r\nimport InfiniteGridHelper from \"./InfiniteGridHelper.js\";\r\n\r\nexport default {\r\n  name: \"SceneSettings\",\r\n  components: { DraggableWindow },\r\n  props: {\r\n    visible: Boolean,\r\n    reopenTrigger: Number,\r\n    startOpen: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    isOpen: Boolean,\r\n  },\r\n  emits: [\"close\"],\r\n  data() {\r\n    return {\r\n      window: window,\r\n      backgroundColor: \"#dddddd\",\r\n      gridVisible: true,\r\n      gridColor: \"#0000ff\",\r\n      gridSize: 10,\r\n      gridDivisions: 10,\r\n      infiniteGrid: true,\r\n      fadeDistance: 400,\r\n      fadeDistanceNear: 0,\r\n      divisionsColor: \"#ff0000\",\r\n      fogVisible: true,\r\n      hdriActive: false,\r\n      hdriBackgroundVisible: false,\r\n      sceneEnvironment: null,\r\n    };\r\n  },\r\n  created() {\r\n    this.gridHelper = null;\r\n    this.infiniteGridHelper = null;\r\n  },\r\n  methods: {\r\n    updateBackground() {\r\n      if (scene) {\r\n        if (this.hdriActive && this.hdriBackgroundVisible && this.sceneEnvironment) {\r\n             scene.background = this.sceneEnvironment;\r\n        } else {\r\n             scene.background = new THREE.Color(this.backgroundColor);\r\n        }\r\n        this.updateFog();\r\n        renderer.render(scene, camera);\r\n      }\r\n    },\r\n    updateFog() {\r\n        if (!scene) return;\r\n        if (this.fogVisible) {\r\n            scene.fog = new THREE.Fog(this.backgroundColor, this.fadeDistanceNear + 10, this.fadeDistance);\r\n        } else {\r\n            scene.fog = null;\r\n        }\r\n    },\r\n    toggleGrid() {\r\n        this.gridVisible = !this.gridVisible;\r\n        this.updateGrid();\r\n    },\r\n    toggleInfiniteGrid() {\r\n        this.infiniteGrid = !this.infiniteGrid;\r\n        this.updateGrid();\r\n    },\r\n    toggleFog() {\r\n        this.fogVisible = !this.fogVisible;\r\n        this.updateFog();\r\n        renderer.render(scene, camera);\r\n    },\r\n    updateGrid() {\r\n        if (!scene) return;\r\n\r\n        this.updateFog(); // Update fog when grid settings (like fade distance) change\r\n\r\n        // Remove existing grids\r\n        if (this.gridHelper) {\r\n            scene.remove(this.gridHelper);\r\n            this.gridHelper = null;\r\n        }\r\n        if (this.infiniteGridHelper) {\r\n            scene.remove(this.infiniteGridHelper);\r\n            this.infiniteGridHelper = null;\r\n        }\r\n\r\n        if (!this.gridVisible) {\r\n          renderer.render(scene, camera);\r\n          return;\r\n        }\r\n\r\n        if (this.infiniteGrid) {\r\n             // Pass divisionsColor as the second color (for large grid)\r\n             this.infiniteGridHelper = new InfiniteGridHelper(\r\n                 this.gridSize/10, \r\n                 this.gridDivisions, \r\n                 new THREE.Color(this.gridColor), \r\n                 this.fadeDistance,\r\n                 'xzy',\r\n                 new THREE.Color(this.divisionsColor),\r\n                 this.fadeDistanceNear\r\n             );\r\n             scene.add(this.infiniteGridHelper);\r\n        } else {\r\n             this.gridHelper = new THREE.GridHelper(\r\n                 this.gridSize * 10, \r\n                 this.gridDivisions * 10, \r\n                 new THREE.Color(this.divisionsColor), \r\n                 new THREE.Color(this.gridColor)\r\n             );\r\n             scene.add(this.gridHelper);\r\n        }\r\n        renderer.render(scene, camera);\r\n    },\r\n\r\n\r\n    handleFileChange(event) {\r\n      const file = event.target.files[0];\r\n      if (!file) return;\r\n\r\n      const url = URL.createObjectURL(file);\r\n      const isHDR = file.name.toLowerCase().endsWith('.hdr');\r\n\r\n      if (isHDR) {\r\n        new RGBELoader()\r\n            .setDataType( THREE.UnsignedByteType ) // Depending on three version, might not be needed or might be FloatType\r\n            .load(url, (texture) => {\r\n                const pmremGenerator = new THREE.PMREMGenerator(renderer);\r\n                pmremGenerator.compileEquirectangularShader();\r\n                const envMap = pmremGenerator.fromEquirectangular(texture).texture;\r\n                \r\n                this.sceneEnvironment = envMap;\r\n                this.hdriActive = true; \r\n                this.updateEnvironment();\r\n                \r\n                texture.dispose();\r\n                pmremGenerator.dispose();\r\n            });\r\n      } else {\r\n          new THREE.TextureLoader().load(url, (texture) => {\r\n                texture.mapping = THREE.EquirectangularReflectionMapping;\r\n                this.sceneEnvironment = texture;\r\n                this.hdriActive = true;\r\n                this.updateEnvironment();\r\n          });\r\n      }\r\n    },\r\n    toggleHdriActive() {\r\n        this.hdriActive = !this.hdriActive;\r\n        this.updateEnvironment();\r\n    },\r\n    toggleHdriBackground() {\r\n        this.hdriBackgroundVisible = !this.hdriBackgroundVisible;\r\n        this.updateBackground();\r\n    },\r\n    updateEnvironment() {\r\n        if (!scene) return;\r\n\r\n        if (this.hdriActive && this.sceneEnvironment) {\r\n            scene.environment = this.sceneEnvironment;\r\n        } else {\r\n            scene.environment = null;\r\n        }\r\n        this.updateBackground();\r\n    }\r\n  },\r\n  mounted() {\r\n      // Initialize with existing scene state if possible, or defaults\r\n      this.updateGrid();\r\n  },\r\n  beforeUnmount() {\r\n      if (this.gridHelper) scene.remove(this.gridHelper);\r\n      if (this.infiniteGridHelper) scene.remove(this.infiniteGridHelper);\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.scene-settings {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n  color: white;\r\n  min-width: 200px;\r\n}\r\n\r\n.group-title {\r\n  font-size: 10px;\r\n  text-transform: uppercase;\r\n  opacity: 0.6;\r\n  font-weight: bold;\r\n  letter-spacing: 1px;\r\n}\r\n\r\n.setting-row {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  font-size: 13px;\r\n}\r\n\r\n.setting-row input[type=\"color\"] {\r\n  border: none;\r\n  width: 24px;\r\n  height: 24px;\r\n  padding: 0;\r\n  background: none;\r\n  cursor: pointer;\r\n}\r\n\r\n.setting-row input[type=\"range\"] {\r\n  width: 100px;\r\n  height: 4px;\r\n  -webkit-appearance: none;\r\n  background: rgba(255, 255, 255, 0.2);\r\n  border-radius: 2px;\r\n  outline: none;\r\n}\r\n\r\n.setting-row input[type=\"range\"]::-webkit-slider-thumb {\r\n  -webkit-appearance: none;\r\n  width: 12px;\r\n  height: 12px;\r\n  border-radius: 50%;\r\n  background: white;\r\n  cursor: pointer;\r\n}\r\n\r\n.toggle {\r\n    cursor: pointer;\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n\r\n.toggle img {\r\n    width: 20px;\r\n    height: 20px;\r\n    filter: brightness(0) invert(1);\r\n}\r\n\r\n.separator {\r\n  height: 1px;\r\n  background: rgba(255, 255, 255, 0.1);\r\n  width: 100%;\r\n}\r\n\r\n.custom-file-upload {\r\n    border: 1px solid rgba(255, 255, 255, 0.2);\r\n    display: inline-block;\r\n    padding: 2px 6px;\r\n    cursor: pointer;\r\n    border-radius: 4px;\r\n    font-size: 11px;\r\n    background: rgba(255, 255, 255, 0.05);\r\n}\r\n\r\n.custom-file-upload:hover {\r\n    background: rgba(255, 255, 255, 0.15);\r\n}\r\n\r\n.custom-file-upload input[type=\"file\"] {\r\n    display: none;\r\n}\r\n</style>\r\n","import { render } from \"./SceneSettings.vue?vue&type=template&id=5736386b&scoped=true\"\nimport script from \"./SceneSettings.vue?vue&type=script&lang=js\"\nexport * from \"./SceneSettings.vue?vue&type=script&lang=js\"\n\nimport \"./SceneSettings.vue?vue&type=style&index=0&id=5736386b&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\UNREAL\\\\Downloads\\\\3d\\\\Original\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5736386b\"]])\n\nexport default __exports__","<template>\r\n  <draggable-window \r\n    title=\"Colores\" \r\n    :initialX=\"window.innerWidth - 550\" \r\n    :initialY=\"160\"\r\n    :visible=\"visible\"\r\n    :reopenTrigger=\"reopenTrigger\"\r\n    :start-open=\"startOpen\"\r\n    :is-open=\"isOpen\"\r\n    @close=\"$emit('close')\"\r\n  >\r\n    <div class=\"color-palette\">\r\n      <div v-for=\"(group, index) in colorGroups\" :key=\"index\" class=\"color-group\">\r\n        <div class=\"group-title\">{{ group.name }}</div>\r\n        <div class=\"colors-grid\">\r\n          <div \r\n            v-for=\"color in group.colors\" \r\n            :key=\"color.name\"\r\n            class=\"color-item\"\r\n            :style=\"{ backgroundColor: color.hex }\"\r\n            @click=\"selectColor(color)\"\r\n            :title=\"color.name\"\r\n          ></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </draggable-window>\r\n</template>\r\n\r\n<script>\r\nimport DraggableWindow from \"./DraggableWindow.vue\";\r\n\r\nexport default {\r\n  name: \"ColorPalette\",\r\n  components: { DraggableWindow },\r\n  props: {\r\n    visible: Boolean,\r\n    reopenTrigger: Number,\r\n    startOpen: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    isOpen: Boolean,\r\n  },\r\n  emits: [\"set-color\", \"close\"],\r\n  data() {\r\n    return {\r\n      window: window,\r\n      colorGroups: [\r\n        {\r\n          name: \"GRIS CLARO  Volmenes iniciales\",\r\n          colors: [\r\n            { name: \"Gris Muy Claro\", hex: \"#F5F5F5\" },\r\n            { name: \"Gris Claro\", hex: \"#E6E6E6\" },\r\n            { name: \"Gris Clido Claro\", hex: \"#E8E2DC\" },\r\n            { name: \"Gris Neutro Suave\", hex: \"#E1E1E1\" },\r\n          ]\r\n        },\r\n        {\r\n          name: \"GRIS MEDIO  Sombras principales\",\r\n          colors: [\r\n            { name: \"Gris Medio\", hex: \"#C8C8C8\" },\r\n            { name: \"Gris Medio Clido\", hex: \"#CEC6BC\" },\r\n            { name: \"Gris 3040%\", hex: \"#B4B4B4\" },\r\n          ]\r\n        },\r\n        {\r\n          name: \"GRIS OSCURO  Contraste\",\r\n          colors: [\r\n            { name: \"Gris Oscuro\", hex: \"#828282\" },\r\n            { name: \"Gris Muy Oscuro\", hex: \"#5A5A5A\" },\r\n            { name: \"Gris Oscuro Clido\", hex: \"#6E665F\" },\r\n            { name: \"Gris 70%\", hex: \"#646464\" },\r\n          ]\r\n        },\r\n        {\r\n          name: \"NEGRO  Detalles finales\",\r\n          colors: [\r\n            { name: \"Negro trazado\", hex: \"#000000\" },\r\n            { name: \"Negro suave\", hex: \"#141414\" },\r\n          ]\r\n        },\r\n        {\r\n          name: \"ACENTOS DE COLOR\",\r\n          colors: [\r\n            { name: \"Azul Tcnico Claro\", hex: \"#ADD8E6\" },\r\n            { name: \"Azul Tcnico Medio\", hex: \"#6495ED\" },\r\n            { name: \"Azul Conceptual\", hex: \"#4682B4\" },\r\n            { name: \"Rojo Claro\", hex: \"#FF6347\" },\r\n            { name: \"Rojo Industrial\", hex: \"#DC143C\" },\r\n            { name: \"Naranja Industrial\", hex: \"#FF8C00\" },\r\n          ]\r\n        },\r\n        {\r\n          name: \"BLANCO  Highlights\",\r\n          colors: [\r\n            { name: \"Blanco puro\", hex: \"#FFFFFF\" },\r\n            { name: \"Blanco suave\", hex: \"#FAFAFA\" },\r\n          ]\r\n        }\r\n      ]\r\n    };\r\n  },\r\n  methods: {\r\n    selectColor(color) {\r\n      // Convert hex to rgb object for the app\r\n      const rgb = this.hexToRgb(color.hex);\r\n      this.$emit(\"set-color\", rgb);\r\n    },\r\n    hexToRgb(hex) {\r\n      var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n      return result ? {\r\n        r: parseInt(result[1], 16),\r\n        g: parseInt(result[2], 16),\r\n        b: parseInt(result[3], 16)\r\n      } : null;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.color-palette {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n  color: white;\r\n  min-width: 280px;\r\n}\r\n\r\n.group-title {\r\n  font-size: 10px;\r\n  text-transform: uppercase;\r\n  opacity: 0.6;\r\n  font-weight: bold;\r\n  letter-spacing: 1px;\r\n  margin-bottom: 6px;\r\n}\r\n\r\n.colors-grid {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 8px;\r\n}\r\n\r\n.color-item {\r\n  width: 32px;\r\n  height: 32px;\r\n  border-radius: 50%;\r\n  cursor: pointer;\r\n  border: 1px solid rgba(255, 255, 255, 0.2);\r\n  transition: transform 0.1s, border-color 0.1s;\r\n}\r\n\r\n.color-item:hover {\r\n  transform: scale(1.1);\r\n  border-color: white;\r\n  z-index: 1;\r\n}\r\n\r\n.color-item:active {\r\n  transform: scale(0.95);\r\n}\r\n</style>\r\n","import { render } from \"./ColorPalette.vue?vue&type=template&id=1576e0cc&scoped=true\"\nimport script from \"./ColorPalette.vue?vue&type=script&lang=js\"\nexport * from \"./ColorPalette.vue?vue&type=script&lang=js\"\n\nimport \"./ColorPalette.vue?vue&type=style&index=0&id=1576e0cc&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\UNREAL\\\\Downloads\\\\3d\\\\Original\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1576e0cc\"]])\n\nexport default __exports__","<template>\r\n  <draggable-window \r\n    title=\"Symmetry\" \r\n    :initialX=\"12\" \r\n    :initialY=\"680\"\r\n    :visible=\"visible\"\r\n    :reopenTrigger=\"reopenTrigger\"\r\n    :is-open=\"isOpen\"\r\n    @close=\"$emit('close')\"\r\n  >\r\n    <div class=\"symmetry-controls\">\r\n      <div class=\"symmetry-options\">\r\n        <button \r\n          class=\"symmetry-btn\"\r\n          :class=\"{ active: isAxisActive('x') }\"\r\n          @click=\"toggleAxis('x')\"\r\n        >\r\n          <span>X</span>\r\n        </button>\r\n        <button \r\n          class=\"symmetry-btn\"\r\n          :class=\"{ active: isAxisActive('y') }\"\r\n          @click=\"toggleAxis('y')\"\r\n        >\r\n          <span>Y</span>\r\n        </button>\r\n        <button \r\n          class=\"symmetry-btn\"\r\n          :class=\"{ active: isAxisActive('z') }\"\r\n          @click=\"toggleAxis('z')\"\r\n        >\r\n          <span>Z</span>\r\n        </button>\r\n      </div>\r\n      \r\n      <div class=\"symmetry-row\" v-if=\"(typeof mirror === 'string' && mirror.length > 0) || radial\">\r\n        <label class=\"toggle-control\">\r\n            <input type=\"checkbox\" :checked=\"localSymmetry\" @change=\"toggleLocal\">\r\n            Local Symmetry\r\n            <span class=\"info-icon\" title=\"Symmetry relative to the Canvas instead of World Origin\">?</span>\r\n        </label>\r\n      </div>\r\n      \r\n      <div class=\"radial-section\">\r\n        <label class=\"radial-toggle\">\r\n            <input type=\"checkbox\" :checked=\"radial\" @change=\"toggleRadial\">\r\n            Radial\r\n        </label>\r\n        \r\n        <div class=\"symmetry-options\" v-if=\"radial\">\r\n            <button \r\n              class=\"symmetry-btn small\"\r\n              :class=\"{ active: radialAxis === 'x' }\"\r\n              @click=\"setRadialAxis('x')\"\r\n            >\r\n              <span>X</span>\r\n            </button>\r\n            <button \r\n              class=\"symmetry-btn small\"\r\n              :class=\"{ active: radialAxis === 'y' }\"\r\n              @click=\"setRadialAxis('y')\"\r\n            >\r\n              <span>Y</span>\r\n            </button>\r\n            <button \r\n              class=\"symmetry-btn small\"\r\n              :class=\"{ active: radialAxis === 'z' }\"\r\n              @click=\"setRadialAxis('z')\"\r\n            >\r\n              <span>Z</span>\r\n            </button>\r\n        </div>\r\n\r\n        <div class=\"sectors-control\" v-if=\"radial\">\r\n            <span>{{ sectors }}</span>\r\n            <input \r\n                type=\"range\" \r\n                min=\"2\" \r\n                max=\"36\" \r\n                step=\"1\" \r\n                :value=\"sectors\" \r\n                @input=\"updateSectors\"\r\n            >\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </draggable-window>\r\n</template>\r\n\r\n<script>\r\nimport DraggableWindow from \"./DraggableWindow.vue\";\r\n\r\nexport default {\r\n  name: \"SymmetrySettings\",\r\n  components: { DraggableWindow },\r\n  props: {\r\n    visible: Boolean,\r\n    reopenTrigger: Number,\r\n    isOpen: Boolean,\r\n    mirror: [Boolean, String],\r\n    radial: Boolean,\r\n    sectors: Number,\r\n    radialAxis: {\r\n        type: String,\r\n        default: 'y'\r\n    },\r\n    localSymmetry: Boolean\r\n  },\r\n  emits: [\"set-mirror\", \"set-radial\", \"set-sectors\", \"set-radial-axis\", \"set-local-symmetry\", \"close\"],\r\n  methods: {\r\n    toggleAxis(axis) {\r\n      let current = typeof this.mirror === 'string' ? this.mirror : \"\";\r\n      if (current.includes(axis)) {\r\n          current = current.replace(axis, \"\");\r\n      } else {\r\n          current += axis;\r\n      }\r\n      this.$emit(\"set-mirror\", current);\r\n    },\r\n    isAxisActive(axis) {\r\n      return typeof this.mirror === 'string' && this.mirror.includes(axis);\r\n    },\r\n    toggleLocal(e) {\r\n      this.$emit(\"set-local-symmetry\", e.target.checked);\r\n    },\r\n    toggleRadial(e) {\r\n      this.$emit(\"set-radial\", e.target.checked);\r\n    },\r\n    updateSectors(e) {\r\n      this.$emit(\"set-sectors\", parseInt(e.target.value));\r\n    },\r\n    setRadialAxis(val) {\r\n      this.$emit(\"set-radial-axis\", val);\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.symmetry-controls {\r\n  padding: 8px;\r\n  background: rgba(30, 30, 30, 0.8);\r\n  border-radius: 8px;\r\n}\r\n\r\n.symmetry-options {\r\n  display: flex;\r\n  gap: 8px;\r\n}\r\n\r\n.symmetry-btn {\r\n  width: 40px;\r\n  height: 40px;\r\n  background: rgba(255, 255, 255, 0.05);\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  border-radius: 8px;\r\n  color: white;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.symmetry-btn:hover {\r\n  background: rgba(255, 255, 255, 0.15);\r\n}\r\n\r\n.symmetry-btn.active {\r\n  background: var(--accent-color, #ffb000);\r\n  border-color: var(--accent-color, #ffb000);\r\n  color: black;\r\n}\r\n\r\n.radial-section {\r\n    margin-top: 12px;\r\n    border-top: 1px solid rgba(255,255,255,0.1);\r\n    padding-top: 12px;\r\n    color: white;\r\n    font-size: 12px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 8px;\r\n}\r\n\r\n.radial-toggle, .toggle-control {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n    cursor: pointer;\r\n}\r\n\r\n.symmetry-row {\r\n    margin-top: 12px;\r\n    padding-top: 8px;\r\n    border-top: 1px solid rgba(255,255,255,0.05);\r\n    color: white;\r\n    font-size: 11px;\r\n}\r\n\r\n.info-icon {\r\n    width: 14px;\r\n    height: 14px;\r\n    background: rgba(255,255,255,0.2);\r\n    border-radius: 50%;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    font-size: 9px;\r\n    margin-left: 4px;\r\n}\r\n\r\n.sectors-control {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n}\r\n\r\n.sectors-control input {\r\n    flex: 1;\r\n}\r\n\r\n.symmetry-btn.small {\r\n    width: 30px;\r\n    height: 30px;\r\n    font-size: 10px;\r\n}\r\n</style>\r\n","import { render } from \"./SymmetrySettings.vue?vue&type=template&id=04aa6b76&scoped=true\"\nimport script from \"./SymmetrySettings.vue?vue&type=script&lang=js\"\nexport * from \"./SymmetrySettings.vue?vue&type=script&lang=js\"\n\nimport \"./SymmetrySettings.vue?vue&type=style&index=0&id=04aa6b76&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\UNREAL\\\\Downloads\\\\3d\\\\Original\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-04aa6b76\"]])\n\nexport default __exports__","<template>\r\n  <draggable-window \r\n    title=\"Layers\" \r\n    :initialX=\"12\" \r\n    :initialY=\"520\"\r\n    :visible=\"visible\"\r\n    :reopenTrigger=\"reopenTrigger\"\r\n    :is-open=\"isOpen\"\r\n    @close=\"$emit('close')\"\r\n  >\r\n    <div class=\"layers-container\">\r\n      <div class=\"layers-header\">\r\n        <button class=\"layer-btn\" @click=\"addLayer\" title=\"Add Layer\">\r\n          <span>+</span>\r\n        </button>\r\n        <button class=\"layer-btn\" @click=\"deleteLayer\" title=\"Delete Layer\" :disabled=\"layers.length <= 1\">\r\n          <span></span>\r\n        </button>\r\n        <button class=\"layer-btn\" @click=\"duplicateLayer\" title=\"Duplicate Layer\">\r\n          <span></span>\r\n        </button>\r\n      </div>\r\n      \r\n      <div class=\"layers-list\">\r\n        <div \r\n          v-for=\"layer in layers\" \r\n          :key=\"layer.id\"\r\n          class=\"layer-item\"\r\n          :class=\"{ active: layer.id === activeLayerId }\"\r\n          @click=\"selectLayer(layer.id)\"\r\n        >\r\n          <div class=\"layer-visibility\">\r\n            <button \r\n              class=\"visibility-btn\" \r\n              @click.stop=\"toggleVisibility(layer.id)\"\r\n              :class=\"{ hidden: !layer.visible }\"\r\n            >\r\n              {{ layer.visible ? '' : '' }}\r\n            </button>\r\n          </div>\r\n          \r\n          <div class=\"layer-info\">\r\n            <input \r\n              v-if=\"editingLayerId === layer.id\"\r\n              v-model=\"layer.name\"\r\n              @blur=\"stopEditing\"\r\n              @keyup.enter=\"stopEditing\"\r\n              @click.stop\r\n              class=\"layer-name-input\"\r\n              ref=\"nameInput\"\r\n            />\r\n            <span \r\n              v-else\r\n              class=\"layer-name\"\r\n              @dblclick.stop=\"startEditing(layer.id)\"\r\n            >\r\n              {{ layer.name }}\r\n            </span>\r\n          </div>\r\n          \r\n          <div class=\"layer-opacity\">\r\n            <input \r\n              type=\"range\" \r\n              min=\"0\" \r\n              max=\"100\" \r\n              v-model=\"layer.opacity\"\r\n              @input=\"updateLayerOpacity(layer.id, $event.target.value)\"\r\n              @click.stop\r\n              class=\"opacity-slider\"\r\n            />\r\n            <span class=\"opacity-value\">{{ layer.opacity }}%</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n\r\n    </div>\r\n  </draggable-window>\r\n</template>\r\n\r\n<script>\r\nimport DraggableWindow from \"./DraggableWindow.vue\";\r\n\r\nexport default {\r\n  name: \"Layers\",\r\n  components: { DraggableWindow },\r\n  props: {\r\n    visible: Boolean,\r\n    reopenTrigger: Number,\r\n    isOpen: Boolean,\r\n  },\r\n  emits: [\"close\", \"layer-change\", \"layer-add\", \"layer-delete\", \"layer-select\"],\r\n  data() {\r\n    return {\r\n      layers: [\r\n        { id: 1, name: \"Layer 1\", visible: true, opacity: 100, locked: false }\r\n      ],\r\n      activeLayerId: 1,\r\n      nextLayerId: 2,\r\n      editingLayerId: null,\r\n      lockLayers: false,\r\n      mergeOnExport: false,\r\n    };\r\n  },\r\n  methods: {\r\n    addLayer() {\r\n      const newLayer = {\r\n        id: this.nextLayerId++,\r\n        name: `Layer ${this.nextLayerId - 1}`,\r\n        visible: true,\r\n        opacity: 100,\r\n        locked: false\r\n      };\r\n      this.layers.unshift(newLayer);\r\n      this.selectLayer(newLayer.id);\r\n      this.$emit(\"layer-add\", newLayer);\r\n    },\r\n    \r\n    deleteLayer() {\r\n      if (this.layers.length <= 1) return;\r\n      \r\n      const index = this.layers.findIndex(l => l.id === this.activeLayerId);\r\n      if (index !== -1) {\r\n        const deletedLayer = this.layers[index];\r\n        this.layers.splice(index, 1);\r\n        \r\n        // Select the layer below or above\r\n        if (this.layers.length > 0) {\r\n          const newIndex = Math.min(index, this.layers.length - 1);\r\n          this.selectLayer(this.layers[newIndex].id);\r\n        }\r\n        \r\n        this.$emit(\"layer-delete\", deletedLayer);\r\n      }\r\n    },\r\n    \r\n    duplicateLayer() {\r\n      const layer = this.layers.find(l => l.id === this.activeLayerId);\r\n      if (layer) {\r\n        const newLayer = {\r\n          id: this.nextLayerId++,\r\n          name: `${layer.name} Copy`,\r\n          visible: layer.visible,\r\n          opacity: layer.opacity,\r\n          locked: layer.locked\r\n        };\r\n        const index = this.layers.findIndex(l => l.id === this.activeLayerId);\r\n        this.layers.splice(index, 0, newLayer);\r\n        this.selectLayer(newLayer.id);\r\n        this.$emit(\"layer-duplicate\", { newLayer, originalLayerId: layer.id });\r\n        this.$emit(\"layer-add\", newLayer);\r\n      }\r\n    },\r\n    \r\n    selectLayer(layerId) {\r\n      this.activeLayerId = layerId;\r\n      const layer = this.layers.find(l => l.id === layerId);\r\n      this.$emit(\"layer-select\", layer);\r\n    },\r\n    \r\n    toggleVisibility(layerId) {\r\n      const index = this.layers.findIndex(l => l.id === layerId);\r\n      if (index !== -1) {\r\n        const layer = this.layers[index];\r\n        // Toggle between opacity 0 (hidden) and 100 (visible)\r\n        const newOpacity = layer.opacity === 0 ? 100 : 0;\r\n        this.layers[index].opacity = newOpacity;\r\n        // Also update visible for UI feedback\r\n        this.layers[index].visible = newOpacity > 0;\r\n        \r\n        console.log(`Layer ${layerId} opacity toggled to:`, newOpacity);\r\n        console.log('Emitting layer-change event with:', this.layers[index]);\r\n        this.$emit(\"layer-change\", this.layers[index]);\r\n        console.log('layer-change event emitted');\r\n      }\r\n    },\r\n    \r\n    updateLayerOpacity(layerId, opacity) {\r\n      const layer = this.layers.find(l => l.id === layerId);\r\n      if (layer) {\r\n        layer.opacity = parseInt(opacity);\r\n        this.$emit(\"layer-change\", layer);\r\n      }\r\n    },\r\n    \r\n    startEditing(layerId) {\r\n      this.editingLayerId = layerId;\r\n      this.$nextTick(() => {\r\n        if (this.$refs.nameInput && this.$refs.nameInput[0]) {\r\n          this.$refs.nameInput[0].focus();\r\n          this.$refs.nameInput[0].select();\r\n        }\r\n      });\r\n    },\r\n    \r\n    stopEditing() {\r\n      this.editingLayerId = null;\r\n    },\r\n    \r\n    toggleLockLayers() {\r\n      this.layers.forEach(layer => {\r\n        layer.locked = this.lockLayers;\r\n      });\r\n      this.$emit(\"layer-change\", { lockAll: this.lockLayers });\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.layers-container {\r\n  background: rgba(30, 30, 30, 0.95);\r\n  border-radius: 8px;\r\n  padding: 6px;\r\n  min-width: 220px;\r\n  max-width: 260px;\r\n}\r\n\r\n.layers-header {\r\n  display: flex;\r\n  gap: 6px;\r\n  margin-bottom: 8px;\r\n  padding-bottom: 8px;\r\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\r\n}\r\n\r\n.layer-btn {\r\n  flex: 1;\r\n  height: 28px;\r\n  background: rgba(255, 255, 255, 0.05);\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  border-radius: 6px;\r\n  color: white;\r\n  font-weight: 600;\r\n  font-size: 18px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.layer-btn:hover:not(:disabled) {\r\n  background: rgba(255, 255, 255, 0.15);\r\n}\r\n\r\n.layer-btn:disabled {\r\n  opacity: 0.3;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.layers-list {\r\n  max-height: 300px;\r\n  overflow-y: auto;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.layer-item {\r\n  background: rgba(255, 255, 255, 0.05);\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  border-radius: 6px;\r\n  padding: 6px;\r\n  margin-bottom: 4px;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.layer-item:hover {\r\n  background: rgba(255, 255, 255, 0.1);\r\n}\r\n\r\n.layer-item.active {\r\n  background: var(--accent-color, #ffb000);\r\n  border-color: var(--accent-color, #ffb000);\r\n}\r\n\r\n.layer-item.active .layer-name,\r\n.layer-item.active .opacity-value {\r\n  color: black;\r\n  font-weight: 700;\r\n}\r\n\r\n.layer-visibility {\r\n  display: flex;\r\n  align-items: center;\r\n  z-index: 10;\r\n  position: relative;\r\n}\r\n\r\n.visibility-btn {\r\n  background: transparent;\r\n  border: none;\r\n  cursor: pointer;\r\n  font-size: 16px;\r\n  padding: 4px;\r\n  transition: all 0.2s;\r\n  pointer-events: auto;\r\n  z-index: 11;\r\n  position: relative;\r\n  min-width: 20px;\r\n  min-height: 20px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.visibility-btn:hover {\r\n  transform: scale(1.1);\r\n  background: rgba(255, 255, 255, 0.1);\r\n  border-radius: 4px;\r\n}\r\n\r\n.visibility-btn.hidden {\r\n  opacity: 0.4;\r\n}\r\n\r\n.layer-info {\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.layer-name {\r\n  color: white;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  user-select: none;\r\n}\r\n\r\n.layer-name-input {\r\n  background: rgba(0, 0, 0, 0.3);\r\n  border: 1px solid rgba(255, 255, 255, 0.3);\r\n  border-radius: 4px;\r\n  color: white;\r\n  padding: 4px 8px;\r\n  font-size: 14px;\r\n  width: 100%;\r\n}\r\n\r\n.layer-opacity {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.opacity-slider {\r\n  width: 60px;\r\n  flex: none;\r\n  height: 4px;\r\n  border-radius: 2px;\r\n  background: rgba(255, 255, 255, 0.2);\r\n  outline: none;\r\n  -webkit-appearance: none;\r\n}\r\n\r\n.opacity-slider::-webkit-slider-thumb {\r\n  -webkit-appearance: none;\r\n  appearance: none;\r\n  width: 10px;\r\n  height: 10px;\r\n  border-radius: 50%;\r\n  background: white;\r\n  cursor: pointer;\r\n}\r\n\r\n.opacity-slider::-moz-range-thumb {\r\n  width: 10px;\r\n  height: 10px;\r\n  border-radius: 50%;\r\n  background: white;\r\n  cursor: pointer;\r\n  border: none;\r\n}\r\n\r\n.opacity-value {\r\n  color: white;\r\n  font-size: 11px;\r\n  min-width: 35px;\r\n  text-align: right;\r\n}\r\n\r\n.layer-item.active .opacity-value {\r\n  color: black;\r\n}\r\n\r\n\r\n\r\n/* Scrollbar styling */\r\n.layers-list::-webkit-scrollbar {\r\n  width: 6px;\r\n}\r\n\r\n.layers-list::-webkit-scrollbar-track {\r\n  background: rgba(255, 255, 255, 0.05);\r\n  border-radius: 3px;\r\n}\r\n\r\n.layers-list::-webkit-scrollbar-thumb {\r\n  background: rgba(255, 255, 255, 0.2);\r\n  border-radius: 3px;\r\n}\r\n\r\n.layers-list::-webkit-scrollbar-thumb:hover {\r\n  background: rgba(255, 255, 255, 0.3);\r\n}\r\n</style>\r\n","import { render } from \"./Layers.vue?vue&type=template&id=b061a208&scoped=true\"\nimport script from \"./Layers.vue?vue&type=script&lang=js\"\nexport * from \"./Layers.vue?vue&type=script&lang=js\"\n\nimport \"./Layers.vue?vue&type=style&index=0&id=b061a208&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\UNREAL\\\\Downloads\\\\3d\\\\Original\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-b061a208\"]])\n\nexport default __exports__","<template>\r\n  <draggable-window \r\n    title=\"Scene Objects\" \r\n    :initialX=\"12\" \r\n    :initialY=\"300\"\r\n    :visible=\"visible\"\r\n    :reopenTrigger=\"reopenTrigger\"\r\n    :is-open=\"isOpen\"\r\n    @close=\"$emit('close')\"\r\n  >\r\n    <div class=\"manager-container\">\r\n      <!-- Object List -->\r\n      <div class=\"section-title\">Add Shape</div>\r\n      <div class=\"shapes-row\">\r\n        <button class=\"shape-add-btn\" @click=\"addShape('plane')\" title=\"Plane\"></button>\r\n        <button class=\"shape-add-btn\" @click=\"addShape('cube')\" title=\"Cube\"></button>\r\n        <button class=\"shape-add-btn\" @click=\"addShape('sphere')\" title=\"Sphere\"></button>\r\n        <button class=\"shape-add-btn\" @click=\"addShape('cylinder')\" title=\"Cylinder\"></button>\r\n      </div>\r\n\r\n      <div class=\"separator\"></div>\r\n\r\n      <div class=\"section-title\">Scene Objects</div>\r\n      <div class=\"object-list\">\r\n        <div v-if=\"shapes.length === 0\" class=\"empty-state\">No objects</div>\r\n        <div \r\n          v-for=\"(obj, index) in shapes\" \r\n          :key=\"obj.uuid\"\r\n          class=\"object-item\"\r\n          :class=\"{ active: isSelected(obj) }\"\r\n          @click=\"selectShape(obj)\"\r\n        >\r\n          <span class=\"object-name\">{{ getObjectName(obj, index) }}</span>\r\n          <span class=\"object-type\">{{ getObjectType(obj) }}</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"separator\"></div>\r\n\r\n      <!-- Controls -->\r\n      <div v-if=\"selectedObj\" class=\"controls-section\">\r\n        <div class=\"section-title\">Properties</div>\r\n        \r\n        <div class=\"control-row\">\r\n          <label>Color</label>\r\n          <input type=\"color\" class=\"color-picker\" :value=\"getObjectColor(selectedObj)\" @input=\"updateColor\" />\r\n        </div>\r\n        \r\n        <div class=\"control-row\">\r\n          <label>Transparency</label>\r\n           <input type=\"range\" min=\"0\" max=\"100\" :value=\"getObjectOpacity(selectedObj)\" @input=\"updateOpacity\" />\r\n        </div>\r\n        \r\n        <div class=\"control-row\">\r\n           <button class=\"delete-obj-btn\" @click=\"deleteSelectedObject\">Delete Object</button>\r\n        </div>\r\n\r\n        <div class=\"control-row\">\r\n          <label>Texture</label>\r\n          <label class=\"custom-file-upload\">\r\n            <input type=\"file\" @change=\"handleImageUpload\" accept=\".jpg,.jpeg,.png,.webp\" />\r\n            <span> Load Image</span>\r\n          </label>\r\n        </div>\r\n\r\n        <div class=\"separator\"></div>\r\n\r\n        <!-- History -->\r\n        <div class=\"history-section\">\r\n            <div class=\"history-header\">\r\n                <span class=\"section-title\">Position History</span>\r\n                <button class=\"small-btn\" @click=\"saveState\">+ Save</button>\r\n            </div>\r\n            <div class=\"history-list\">\r\n                <div v-if=\"getHistory(selectedObj).length === 0\" class=\"empty-state\">No saved states</div>\r\n                <div v-for=\"(state, sIndex) in getHistory(selectedObj)\" :key=\"sIndex\" class=\"history-item\">\r\n                    <span>{{ state.name }}</span>\r\n                    <div class=\"actions\">\r\n                        <button class=\"icon-btn\" @click=\"restoreState(state)\" title=\"Restore\"></button>\r\n                        <button class=\"icon-btn delete\" @click=\"deleteState(sIndex)\" title=\"Delete\"></button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n      </div>\r\n      <div v-else class=\"empty-selection\">\r\n        Select an object to edit properties\r\n      </div>\r\n    </div>\r\n  </draggable-window>\r\n</template>\r\n\r\n<script>\r\nimport DraggableWindow from \"./DraggableWindow.vue\";\r\nimport * as THREE from \"three\";\r\nimport { shapes, canvas } from \"./Canvas.vue\"; // shapes is reactive\r\nimport { scene, renderer, camera, vm } from \"../App.vue\";\r\n\r\nexport default {\r\n  name: \"ObjectManager\",\r\n  components: { DraggableWindow },\r\n  props: {\r\n    visible: Boolean,\r\n    reopenTrigger: Number,\r\n    isOpen: Boolean,\r\n  },\r\n  emits: [\"close\"],\r\n  computed: {\r\n    shapes() {\r\n        return shapes;\r\n    },\r\n    selectedObj() {\r\n        // We trigger re-render by using canvas in computed? \r\n        // canvas is an exported let, not reactive. \r\n        // We relied on Canvas.vue to make shapes reactive. \r\n        // For selection state, we might need a way to know 'canvas' changed.\r\n        // But clicking the list updates selection. \r\n        // We can track local selection or poll? \r\n        // Let's rely on user clicking our list to set 'currentSelection' locally for UI.\r\n        return this.currentSelection;\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      currentSelection: null\r\n    };\r\n  },\r\n  mounted() {\r\n      // Try to sync with initial canvas\r\n      this.currentSelection = canvas;\r\n      // Optional: Polling or event listener to sync if selection changes from viewport\r\n      this.timer = setInterval(() => {\r\n          if (canvas !== this.currentSelection) {\r\n              this.currentSelection = canvas;\r\n          }\r\n      }, 500);\r\n  },\r\n  beforeUnmount() {\r\n      clearInterval(this.timer);\r\n  },\r\n  methods: {\r\n    addShape(type) {\r\n        if (vm && vm.$refs.raycastCanvas) {\r\n            vm.$refs.raycastCanvas.addPrimitive(type);\r\n        }\r\n    },\r\n    selectShape(obj) {\r\n        this.currentSelection = obj;\r\n        if (vm && vm.$refs.raycastCanvas) {\r\n            vm.$refs.raycastCanvas.selectObject(obj);\r\n        }\r\n    },\r\n    isSelected(obj) {\r\n        return this.currentSelection === obj; // logic simplified\r\n    },\r\n    getObjectName(obj, index) {\r\n        return obj.name || `Object ${index + 1}`;\r\n    },\r\n    getObjectType(obj) {\r\n        if (obj.isGroup) return \"Group/GLB\";\r\n        if (obj.geometry) return obj.geometry.type.replace(\"Geometry\", \"\").replace(\"Buffer\", \"\");\r\n        return \"Object\";\r\n    },\r\n    getObjectMaterial(obj) {\r\n        // Find first material\r\n        let mat = null;\r\n        if (obj.material) mat = obj.material;\r\n        else {\r\n            obj.traverse(child => {\r\n                if (!mat && child.isMesh && child.material) mat = child.material;\r\n            });\r\n        }\r\n        return mat;\r\n    },\r\n    getObjectColor(obj) {\r\n        const mat = this.getObjectMaterial(obj);\r\n        if (mat && mat.color) {\r\n            return \"#\" + mat.color.getHexString();\r\n        }\r\n        return \"#ffffff\";\r\n    },\r\n    updateColor(event) {\r\n        const color = event.target.value;\r\n        const obj = this.selectedObj;\r\n        if (!obj) return;\r\n        \r\n        const mat = this.getObjectMaterial(obj);\r\n        if (mat) {\r\n             // If array of materials?\r\n            if (Array.isArray(mat)) {\r\n                mat.forEach(m => m.color.set(color));\r\n            } else {\r\n                mat.color.set(color);\r\n            }\r\n            renderer.render(scene, camera);\r\n        } else if (obj.isGroup) {\r\n             // traverse and set all\r\n             obj.traverse(child => {\r\n                 if (child.isMesh && child.material) {\r\n                     child.material.color.set(color);\r\n                 }\r\n             });\r\n             renderer.render(scene, camera);\r\n        }\r\n    },\r\n    getObjectOpacity(obj) {\r\n        const mat = this.getObjectMaterial(obj);\r\n        if (mat) {\r\n             return (mat.opacity !== undefined ? mat.opacity : 1) * 100;\r\n        }\r\n        return 100;\r\n    },\r\n    updateOpacity(event) {\r\n        const opacity = parseFloat(event.target.value) / 100;\r\n        const obj = this.selectedObj;\r\n        if (!obj) return;\r\n        \r\n        const updateMatOpacity = (m) => {\r\n            m.opacity = opacity;\r\n            m.transparent = opacity < 1;\r\n            m.needsUpdate = true;\r\n        };\r\n\r\n        const mat = this.getObjectMaterial(obj);\r\n        if (mat) {\r\n            if (Array.isArray(mat)) {\r\n                mat.forEach(m => updateMatOpacity(m));\r\n            } else {\r\n                updateMatOpacity(mat);\r\n            }\r\n        } else if (obj.isGroup) {\r\n             obj.traverse(child => {\r\n                 if (child.isMesh && child.material) {\r\n                      updateMatOpacity(child.material);\r\n                 }\r\n             });\r\n        }\r\n        renderer.render(scene, camera);\r\n    },\r\n    deleteSelectedObject() {\r\n        const obj = this.selectedObj;\r\n        if (!obj) return;\r\n        \r\n        // Remove from scene\r\n        if (obj.parent) {\r\n            obj.parent.remove(obj);\r\n        }\r\n        \r\n        // Remove from shapes array\r\n        const index = shapes.indexOf(obj);\r\n        if (index > -1) {\r\n            shapes.splice(index, 1);\r\n        }\r\n        \r\n        // Clear selection\r\n        this.currentSelection = null;\r\n        if (vm && vm.$refs.raycastCanvas) {\r\n             vm.$refs.raycastCanvas.selectObject(null);\r\n        }\r\n        \r\n         renderer.render(scene, camera);\r\n    },\r\n    handleImageUpload(event) {\r\n         const file = event.target.files[0];\r\n        if (!file || !this.selectedObj) return;\r\n\r\n        const url = URL.createObjectURL(file);\r\n        new THREE.TextureLoader().load(url, (texture) => {\r\n            const obj = this.selectedObj;\r\n            if (obj.isGroup) {\r\n                 obj.traverse(child => {\r\n                     if (child.isMesh && child.material) {\r\n                         child.material.map = texture;\r\n                         child.material.needsUpdate = true;\r\n                         // Reset color to white so texture shows\r\n                         child.material.color.set(0xffffff);\r\n                     }\r\n                 });\r\n            } else if (obj.material) {\r\n                obj.material.map = texture;\r\n                obj.material.needsUpdate = true;\r\n                obj.material.color.set(0xffffff);\r\n            }\r\n            renderer.render(scene, camera);\r\n        });\r\n    },\r\n    getHistory(obj) {\r\n        if (!obj) return [];\r\n        if (!obj.userData.history) obj.userData.history = [];\r\n        return obj.userData.history;\r\n    },\r\n    saveState() {\r\n        const obj = this.selectedObj;\r\n        if (!obj) return;\r\n        \r\n        const history = this.getHistory(obj);\r\n        const state = {\r\n            name: `State ${history.length + 1}`,\r\n            position: obj.position.clone(),\r\n            quaternion: obj.quaternion.clone(),\r\n            scale: obj.scale.clone()\r\n        };\r\n        history.push(state);\r\n    },\r\n    restoreState(state) {\r\n        const obj = this.selectedObj;\r\n        if (!obj) return;\r\n        \r\n        obj.position.copy(state.position);\r\n        obj.quaternion.copy(state.quaternion);\r\n        obj.scale.copy(state.scale);\r\n        renderer.render(scene, camera);\r\n    },\r\n    deleteState(index) {\r\n        const obj = this.selectedObj;\r\n        if (!obj) return;\r\n        obj.userData.history.splice(index, 1);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.manager-container {\r\n  background: rgba(30, 30, 30, 0.95);\r\n  backdrop-filter: blur(10px);\r\n  border-radius: 8px;\r\n  padding: 10px;\r\n  min-width: 250px;\r\n  color: white;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 10px;\r\n  max-height: 80vh; \r\n  overflow: hidden;\r\n}\r\n\r\n.section-title {\r\n    font-size: 11px;\r\n    text-transform: uppercase;\r\n    opacity: 0.6;\r\n    font-weight: 800;\r\n    letter-spacing: 0.5px;\r\n    margin-bottom: 4px;\r\n}\r\n\r\n\r\n.shapes-row {\r\n    display: flex;\r\n    gap: 8px;\r\n    justify-content: space-around;\r\n}\r\n\r\n.shape-add-btn {\r\n    background: rgba(255,255,255,0.1);\r\n    border: 1px solid rgba(255,255,255,0.2);\r\n    border-radius: 4px;\r\n    width: 32px;\r\n    height: 32px;\r\n    cursor: pointer;\r\n    font-size: 16px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    transition: all 0.2s;\r\n}\r\n\r\n.shape-add-btn:hover {\r\n    background: rgba(255,255,255,0.2);\r\n    transform: scale(1.1);\r\n}\r\n\r\n.object-list {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 4px;\r\n    max-height: 150px;\r\n    overflow-y: auto;\r\n}\r\n\r\n.object-item {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 6px 8px;\r\n    background: rgba(255,255,255,0.05);\r\n    border-radius: 4px;\r\n    cursor: pointer;\r\n    font-size: 13px;\r\n    border: 1px solid transparent;\r\n}\r\n\r\n.object-item:hover {\r\n    background: rgba(255,255,255,0.1);\r\n}\r\n\r\n.object-item.active {\r\n    background: rgba(255, 176, 0, 0.2);\r\n    border-color: rgba(255, 176, 0, 0.5);\r\n    color: #ffb000;\r\n}\r\n\r\n.object-type {\r\n    font-size: 10px;\r\n    opacity: 0.5;\r\n    background: rgba(0,0,0,0.2);\r\n    padding: 2px 4px;\r\n    border-radius: 4px;\r\n}\r\n\r\n.separator {\r\n    height: 1px;\r\n    background: rgba(255,255,255,0.1);\r\n    width: 100%;\r\n}\r\n\r\n.controls-section {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 8px;\r\n}\r\n\r\n.control-row {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    font-size: 13px;\r\n}\r\n\r\n.color-picker {\r\n    width: 40px;\r\n    height: 24px;\r\n    border: none;\r\n    padding: 0;\r\n    background: none;\r\n    cursor: pointer;\r\n}\r\n\r\n.custom-file-upload {\r\n    border: 1px solid rgba(255,255,255,0.2);\r\n    border-radius: 4px;\r\n    padding: 4px 8px;\r\n    font-size: 11px;\r\n    cursor: pointer;\r\n    background: rgba(255,255,255,0.05);\r\n}\r\n\r\n.delete-obj-btn {\r\n    width: 100%;\r\n    padding: 6px;\r\n    background: rgba(255, 50, 50, 0.2);\r\n    border: 1px solid rgba(255, 50, 50, 0.4);\r\n    color: #ffcccc;\r\n    border-radius: 4px;\r\n    cursor: pointer;\r\n    font-size: 12px;\r\n    margin-top: 8px;\r\n    transition: all 0.2s;\r\n}\r\n\r\n.delete-obj-btn:hover {\r\n    background: rgba(255, 50, 50, 0.4);\r\n}\r\n.custom-file-upload input {\r\n    display: none;\r\n}\r\n.custom-file-upload:hover {\r\n    background: rgba(255,255,255,0.1);\r\n}\r\n\r\n.empty-state, .empty-selection {\r\n    text-align: center;\r\n    opacity: 0.5;\r\n    font-size: 12px;\r\n    padding: 10px;\r\n}\r\n\r\n.history-section {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 8px;\r\n}\r\n\r\n.history-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n}\r\n\r\n.small-btn {\r\n    font-size: 10px;\r\n    padding: 2px 6px;\r\n    background: #ffb000;\r\n    color: black;\r\n    border: none;\r\n    border-radius: 4px;\r\n    cursor: pointer;\r\n    font-weight: bold;\r\n}\r\n\r\n.history-list {\r\n    max-height: 120px;\r\n    overflow-y: auto;\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 4px;\r\n}\r\n\r\n.history-item {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 4px 8px;\r\n    background: rgba(0,0,0,0.2);\r\n    border-radius: 4px;\r\n    font-size: 12px;\r\n}\r\n\r\n.actions {\r\n    display: flex;\r\n    gap: 4px;\r\n}\r\n\r\n.icon-btn {\r\n    background: transparent;\r\n    border: 1px solid rgba(255,255,255,0.1);\r\n    color: white;\r\n    width: 20px;\r\n    height: 20px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    border-radius: 3px;\r\n    cursor: pointer;\r\n    font-size: 10px;\r\n}\r\n.icon-btn:hover {\r\n    background: rgba(255,255,255,0.1);\r\n}\r\n.icon-btn.delete:hover {\r\n    background: rgba(255,50,50,0.3);\r\n}\r\n\r\n/* Scrollbars */\r\n.object-list::-webkit-scrollbar, .history-list::-webkit-scrollbar {\r\n    width: 4px;\r\n}\r\n.object-list::-webkit-scrollbar-thumb, .history-list::-webkit-scrollbar-thumb {\r\n    background: rgba(255,255,255,0.2);\r\n    border-radius: 2px;\r\n}\r\n</style>\r\n","import { render } from \"./ObjectManager.vue?vue&type=template&id=9d553bfc&scoped=true\"\nimport script from \"./ObjectManager.vue?vue&type=script&lang=js\"\nexport * from \"./ObjectManager.vue?vue&type=script&lang=js\"\n\nimport \"./ObjectManager.vue?vue&type=style&index=0&id=9d553bfc&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\UNREAL\\\\Downloads\\\\3d\\\\Original\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9d553bfc\"]])\n\nexport default __exports__","<template>\n  <div\n    class=\"transform-toolbar\"\n    v-bind:style=\"[\n      location == 'above'\n        ? {\n            top: 'calc(' + posTop + 'px - 140px)',\n            left: 'calc(' + posLeft + 'px - 110px)',\n          }\n        : {\n            top: 'calc(' + posTop + 'px + 100px',\n            left: 'calc(' + posLeft + 'px - 110px)',\n          },\n    ]\"\n    v-bind:class=\"{ hide: !display }\"\n  >\n    <div class=\"transform-modes\">\n      <span>\n        <input\n          type=\"radio\"\n          id=\"translate\"\n          name=\"transformations\"\n          value=\"translate\"\n          v-model=\"selectedTransformation\"\n          checked\n        /><label for=\"translate\"> Move</label>\n      </span>\n      <span>\n        <input\n          type=\"radio\"\n          id=\"rotate\"\n          name=\"transformations\"\n          value=\"rotate\"\n          v-model=\"selectedTransformation\"\n        /><label for=\"rotate\"> Rotate</label>\n      </span>\n      <span>\n        <input\n          type=\"radio\"\n          id=\"scale\"\n          name=\"transformations\"\n          value=\"scale\"\n          v-model=\"selectedTransformation\"\n        /><label for=\"scale\"> Scale</label>\n      </span>\n    </div>\n\n    <div class=\"duplicate-controls\" v-bind:class=\"{ hide: selectedTool == 'model' }\">\n        <button class=\"dup-btn\" @click=\"duplicate\">Duplicate</button>\n        \n        <div class=\"offset-group\">\n            <div class=\"inputs\">\n                <input v-model.number=\"offset.x\" placeholder=\"X\" type=\"number\" step=\"0.1\" />\n                <input v-model.number=\"offset.y\" placeholder=\"Y\" type=\"number\" step=\"0.1\" />\n                <input v-model.number=\"offset.z\" placeholder=\"Z\" type=\"number\" step=\"0.1\" />\n            </div>\n            <button class=\"dup-btn\" @click=\"duplicateOffset\">Offset Copy</button>\n        </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { select } from \"./select.js\";\nimport { scene, renderer, camera } from \"../App.vue\";\nimport * as THREE from 'three';\n\nexport default {\n  name: \"TransformToolbar\",\n  props: {\n    top: Number,\n    left: Number,\n    location: String,\n    display: Boolean,\n    selectedTool: String,\n  },\n  data() {\n    return {\n      selectedTransformation: \"translate\",\n      posTop: 0,\n      posLeft: 0,\n      offset: { x: 1, y: 0, z: 0 }\n    };\n  },\n  methods: {\n    duplicate: function () {\n      select.s.duplicate();\n    },\n    duplicateOffset: function() {\n        if(select.s) {\n            select.s.duplicate(new THREE.Vector3(this.offset.x, this.offset.y, this.offset.z));\n        }\n    }\n  },\n  watch: {\n    selectedTransformation: function (val) {\n      if (this.selectedTool == \"select\" && select.s && select.s.controls) {\n        select.s.controls.mode = val;\n        //this maintains the selection from the last used transformation\n        this.selectedTransformation = val;\n        select.transformMode = val;\n        select.s.helper.update();\n      }\n      if (this.selectedTool == \"model\") {\n        let controls = scene.getObjectByName(\"canvasTransformControls\");\n        console.log(controls);\n        this.selectedTransformation = val;\n        if(controls) controls.mode = this.selectedTransformation;\n      }\n      renderer.render(scene, camera);\n    },\n    display: function (val) {\n      if (val) {\n        //this maintains the selection from the last used transformation\n        if (this.selectedTool == \"select\" && select.s && select.s.controls) {\n          select.s.controls.mode = this.selectedTransformation;\n        }\n        if (this.selectedTool == \"model\") {\n          let controls = scene.getObjectByName(\"canvasTransformControls\");\n          if(controls) controls.mode = this.selectedTransformation;\n        }\n      }\n    },\n    top: function (val) {\n      //this needs to be improved further\n\n      if (val >= window.innerHeight) {\n        this.posTop = window.innerHeight - 60;\n      } else {\n        this.posTop = val;\n      }\n    },\n    left: function (val) {\n      if (val >= window.innerWidth) {\n        this.posLeft = window.innerWidth;\n      } else {\n        this.posLeft = val;\n      }\n    },\n  },\n  mounted() {},\n};\n</script>\n\n<style scoped>\n.transform-toolbar {\n  padding: 8px;\n  position: absolute;\n  z-index: 999;\n  background-color: rgba(30,30,30,0.9);\n  color: white;\n  width: 240px;\n  border-radius: 8px;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  border: 1px solid rgba(255,255,255,0.1);\n}\n\n.transform-modes {\n    display: flex;\n    justify-content: space-around;\n    padding-bottom: 8px;\n    border-bottom: 1px solid rgba(255,255,255,0.1);\n}\n\n.transform-modes span {\n    display: flex;\n    align-items: center;\n    gap: 4px;\n}\n\n.duplicate-controls {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n}\n\n.offset-group {\n    display: flex;\n    flex-direction: column;\n    gap: 4px;\n}\n\n.inputs {\n    display: flex;\n    gap: 4px;\n}\n\n.inputs input {\n    width: 100%;\n    background: rgba(0,0,0,0.5);\n    border: 1px solid rgba(255,255,255,0.2);\n    color: white;\n    padding: 2px 4px;\n    border-radius: 4px;\n    font-size: 12px;\n}\n\n.dup-btn {\n    background: rgba(255,255,255,0.1);\n    border: none;\n    color: white;\n    padding: 4px 8px;\n    border-radius: 4px;\n    cursor: pointer;\n    font-size: 12px;\n    transition: background 0.2s;\n}\n\n.dup-btn:hover {\n    background: rgba(255,255,255,0.2);\n}\n\n.hide {\n  display: none;\n}\n</style>","import { render } from \"./TransformToolbar.vue?vue&type=template&id=41f6c9c4&scoped=true\"\nimport script from \"./TransformToolbar.vue?vue&type=script&lang=js\"\nexport * from \"./TransformToolbar.vue?vue&type=script&lang=js\"\n\nimport \"./TransformToolbar.vue?vue&type=style&index=0&id=41f6c9c4&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\UNREAL\\\\Downloads\\\\3d\\\\Original\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-41f6c9c4\"]])\n\nexport default __exports__","<template>\r\n  <draggable-window\r\n    title=\"2D Shapes\"\r\n    :initialX=\"100\"\r\n    :initialY=\"140\"\r\n    :visible=\"visible\"\r\n    :reopenTrigger=\"reopenTrigger\"\r\n    :is-open=\"isOpen\"\r\n    @close=\"$emit('close')\"\r\n  >\r\n    <div class=\"shapes-grid\">\r\n      <button class=\"shape-btn\" @click.stop=\"createShape('line')\" @mousedown.stop @mouseup.stop title=\"Line\">\r\n         <span class=\"icon\">/</span>\r\n      </button>\r\n      <button class=\"shape-btn\" @click.stop=\"createShape('triangle')\" @mousedown.stop @mouseup.stop title=\"Triangle\">\r\n         <span class=\"icon\"></span>\r\n      </button>\r\n       <button class=\"shape-btn\" @click.stop=\"createShape('square')\" @mousedown.stop @mouseup.stop title=\"Square\">\r\n         <span class=\"icon\"></span>\r\n      </button>\r\n      <button class=\"shape-btn\" @click.stop=\"createShape('circle')\" @mousedown.stop @mouseup.stop title=\"Circle\">\r\n         <span class=\"icon\"></span>\r\n      </button>\r\n      <button class=\"shape-btn\" @click.stop=\"createShape('ellipse')\" @mousedown.stop @mouseup.stop title=\"Ellipse\">\r\n         <span class=\"icon\"></span>\r\n      </button>\r\n      <button class=\"shape-btn\" @click.stop=\"createShape('hexagon')\" @mousedown.stop @mouseup.stop title=\"Hexagon\">\r\n         <span class=\"icon\"></span>\r\n      </button>\r\n    </div>\r\n  </draggable-window>\r\n</template>\r\n\r\n<script>\r\nimport DraggableWindow from \"./DraggableWindow.vue\";\r\nimport { canvas } from \"./Canvas.vue\";\r\nimport * as THREE from \"three\";\r\nimport { camera } from \"../App.vue\";\r\n\r\nexport default {\r\n  name: \"TwoDShapes\",\r\n  components: { DraggableWindow },\r\n  props: {\r\n    visible: Boolean,\r\n    reopenTrigger: Number,\r\n    isOpen: Boolean,\r\n  },\r\n  emits: [\"close\", \"add-shape\"],\r\n  methods: {\r\n    getCenterPoint() {\r\n        const raycaster = new THREE.Raycaster();\r\n        raycaster.setFromCamera(new THREE.Vector2(0, 0), camera);\r\n        \r\n        let target = canvas;\r\n        // If canvas is not directly available (e.g. not exported properly or not mounted), fallback\r\n        if (!target) {\r\n             const vec = new THREE.Vector3(0, 0, -10);\r\n             vec.applyQuaternion(camera.quaternion);\r\n             vec.add(camera.position);\r\n             return { point: vec, normal: new THREE.Vector3(0, 0, 1) };\r\n        }\r\n\r\n        const intersects = raycaster.intersectObject(target, true); // true for recursive if canvas is group\r\n        \r\n        if (intersects.length > 0) {\r\n            return { point: intersects[0].point, normal: intersects[0].face.normal };\r\n        }\r\n        \r\n        // Fallback if no hit\r\n        const vec = new THREE.Vector3(0, 0, -10);\r\n        vec.applyQuaternion(camera.quaternion);\r\n        vec.add(camera.position);\r\n        return { point: vec, normal: new THREE.Vector3(0, 0, 1) };\r\n    },\r\n    createShape(type) {\r\n      const { point: center, normal } = this.getCenterPoint();\r\n      const size = 1.0; \r\n      \r\n      const shape = new THREE.Shape();\r\n      \r\n      switch (type) {\r\n        case 'line': {\r\n            // Create a thin rectangle for the line\r\n            const thickness = 0.05;\r\n            shape.moveTo(-size, -thickness);\r\n            shape.lineTo(size, -thickness);\r\n            shape.lineTo(size, thickness);\r\n            shape.lineTo(-size, thickness);\r\n            shape.lineTo(-size, -thickness);\r\n            break;\r\n        }\r\n        case 'triangle':\r\n            shape.moveTo(size * Math.cos(-Math.PI/2), size * Math.sin(-Math.PI/2));\r\n            shape.lineTo(size * Math.cos(Math.PI/6), size * Math.sin(Math.PI/6));\r\n            shape.lineTo(size * Math.cos(5*Math.PI/6), size * Math.sin(5*Math.PI/6));\r\n            shape.closePath();\r\n            break;\r\n        case 'square':\r\n             shape.moveTo(-size, -size);\r\n             shape.lineTo(size, -size);\r\n             shape.lineTo(size, size);\r\n             shape.lineTo(-size, size);\r\n             shape.closePath();\r\n            break;\r\n        case 'circle':\r\n             shape.absarc(0, 0, size, 0, Math.PI * 2, false);\r\n            break;\r\n        case 'ellipse':\r\n             shape.ellipse(0, 0, size * 1.5, size * 0.75, 0, Math.PI * 2, false, 0);\r\n            break;\r\n        case 'hexagon':\r\n              for (let i = 0; i < 6; i++) {\r\n                const angle = (i * 2 * Math.PI) / 6;\r\n                const x = size * Math.cos(angle);\r\n                const y = size * Math.sin(angle);\r\n                if (i === 0) shape.moveTo(x, y);\r\n                else shape.lineTo(x, y);\r\n            }\r\n            shape.closePath();\r\n            break;\r\n      }\r\n      \r\n      const geometry = new THREE.ShapeGeometry(shape);\r\n      const mesh = new THREE.Mesh(geometry); // Material will be assigned by Canvas.vue\r\n      \r\n      // Orientation and Position\r\n      mesh.quaternion.copy(camera.quaternion);\r\n      \r\n      // Apply offset to center\r\n      let offset = normal.clone().multiplyScalar(0.05);\r\n      let finalCenter = center.clone().add(offset);\r\n      mesh.position.copy(finalCenter);\r\n      \r\n      mesh.name = type.charAt(0).toUpperCase() + type.slice(1);\r\n      \r\n      this.$emit('add-shape', mesh); // Delegate to App.vue\r\n    },\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.shapes-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(3, 1fr);\r\n  gap: 8px;\r\n  padding: 8px;\r\n}\r\n\r\n.shape-btn {\r\n  width: 40px;\r\n  height: 40px;\r\n  background: rgba(255, 255, 255, 0.1);\r\n  border: 1px solid rgba(255, 255, 255, 0.2);\r\n  border-radius: 4px;\r\n  color: white;\r\n  font-size: 20px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.shape-btn:hover {\r\n  background: rgba(255, 255, 255, 0.2);\r\n}\r\n\r\n.icon {\r\n   line-height: 1;\r\n}\r\n</style>\r\n","import { render } from \"./TwoDShapes.vue?vue&type=template&id=4262662a&scoped=true\"\nimport script from \"./TwoDShapes.vue?vue&type=script&lang=js\"\nexport * from \"./TwoDShapes.vue?vue&type=script&lang=js\"\n\nimport \"./TwoDShapes.vue?vue&type=style&index=0&id=4262662a&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\UNREAL\\\\Downloads\\\\3d\\\\Original\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4262662a\"]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=3a31a961\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=3a31a961&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\UNREAL\\\\Downloads\\\\3d\\\\Original\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","module.exports = __webpack_public_path__ + \"img/Canvas-Cube.b03590d5.svg\";","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"img/snapOn.aa8b12b1.svg\";","import { createApp } from 'vue'\nimport App from './App.vue'\n\ncreateApp(App).mount('#app')\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SceneSettings.vue?vue&type=style&index=0&id=5736386b&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ExportHTML.vue?vue&type=style&index=0&id=302ae2fb&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/draw.5c69c24e.svg\";","module.exports = __webpack_public_path__ + \"img/checkbox.8ab59ebe.svg\";","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAD6CAYAAACI7Fo9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAjHSURBVHgB7dz5cdNaH8dhhbn/AxVA0gBkKIClAZYGgAogNAA0wNIASwMsDbA0wNIAUAFLA/Grn+c142skx/JCuHyfZ0bDJcRWnJuPjqJz5K1RqwH+ZqMjDfDXEzoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDoEEDobd/fu3WZra+tf287OTsPvI3QI8E/D0ra3t5uhjh07Nt7OnTvXnD17dvwnbJrQV/Dly5dmWW/evBn/efLkyebOnTvN1atXG9gUp+6HrA4W165da/b29hrYFKH/IR48eCB2Nkbof5CKfXJKD+sk9DWr0/DRaNS5vX//vnn8+PHcC3A1FQXrJvTf6PTp0+MDwevXr5vbt293fs6HDx8aWDehH5K60t41sn///n2lq/nQReiHqEZ4+B3Mo/+Bam59GdNnApOFOZsw2c8m98F6Cf0QvXjx4pePDVkpV1fo6znevn07jq9O+6fVAaOe7+LFi82lS5eaZU3vZ/YawmSVXz3/Ohf9fPv2rbl161bnv9Xr6rvGQY8RS6tv3+zWXmxb6LHt7+idj3/y5MmBj20v5o3auDof37e1cYw+f/48GuLTp0+D9lP76Pr6u17r9vZ2736/fv06an+t6dzH8ePHB78ORvtCX8HQ0NtRahxpO/J1PvbGjRsH7rPvALHu2NtpwFE7Wi+1n729vQO/5r7Q9/f3R+3ZQW/k7RTliMGEvoquH8aKo4Lq2ubFUfEfpCKdF99k3/P2UyP0QVY5mEwinj6gLBp6RV4Hyq7n3NraEvnyhL6KVWKYDq9G+UXVD/t07PX4Gn3rbGFaPWdf9PP2V6fr877e2nedVtd+u55/NvKyaOh9B5iKvF4jSxP6KlaNvKKpEez58+eD9luxV2SLHCC6fk24efNm5+fWiNp3cKivtb0A9ssB5dmzZz8f0xV5WSR0kW+U0FexjhF9slUsmzg1rTBn91UjcpdHjx4tdCo+q84C6vfqvs85KPR5vyrUv7Eyoa9inaFPtkWuug81O0rX32fVaN51hb1G1FWvcs8L/f79+yLfvH3z6GtWa9nrxpU+Nd9dc9E1L/306dNf/r09rR6/88zQRTOT553Mpf/48ePnf8/Or/ctse26c65ez7ILeOZpf/ia9qDWe2tuLRE2V75GI5bWdIxCi86jl9kLa5NtkSvj9dga8YbOp0+2We/evesczYdeP+jSNaLPmz0wkq/dvrXuh6jWutcIPqtG1tlReKJG48uXLze7u7vjUW9d96/37W8To/m8/bVz5d5WawOEfsj6bmx5+fLlLx+ryM+fP9+5dHZTNrWWvQ4gXQe5Wvp64cIFd/Ctmd/RD9nRo0c7P971g16R9wUwWddef544ceLnxz9+/Dh+55qD9AVd+9vEqF7v7X7v3r3xGcns+vn24l9z5cqV5tWrV26aWROh/0fUhauuyOuMoL1y3XszTIW0SOhdMbe/241vZNnUW1JX7O08fHPmzJnxSD6t3o2nLtTNu7DJ4py6H7IKuMupU6f+9feu0/WKs96tZh0h1sjZFfvDhw97f59eh3pv/Iq9S31vvLXWegj9kIz+P73UNcVWZqOr6bJZFfhBp7Y1Ii+iRteaSptVI23FNhpPMvSr0+1l1evom0qrffd9jxhgxNKanum1WnzSt9UtmO3vnnOnxboWtHTdtnnQNFytWOtb0tqlvra+aa96XfV89Rqm1d/r9dTj+qbFFlkCe9BdazX9x9KsjFtF1w/lvLvXFr3ts2t1XN9dXRXR5CBSJv9dUfbd0z3v+D5vpVq9hvo6aqlsbfW50wesmndf5X70OtDUx7v2XR+v18RShL6KRaIduvWNinUDy7wA6172emz9ucgimj59S2EX3bpiH3I/eo3cfQfE3d3d8cGAwYS+inUGXoEctCKsnV4b/Lw1Anedvs9TMVVUy76Winj6Lreh7zBTd6vNez0MJvRVrCPu2irgRW45rZtL+k5tu7Z63gpuaOgTdVtqfX1DXk8dIGbvwhsaep1V1K20ffuxRHYwoa9iEuqQrX7AK4br16+P2vntX+7vXkT9oNfzTJ5z9sBRF6+mY5j+3Mm2qDq41D3t8/Y3OVi1V8d7v97Z/e/s7Mzdb8Ve36eu7+GRI0d690Wn/fH/8Yb/pFoMUyvfJvPcNdVW8++bWuDStb+aBqy77axg+6ONhA5/v5EFMxBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BBA6BDgn3YbNcDfbPQ/3I70uWlOZmwAAAAASUVORK5CYII=\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./UndoRedo.vue?vue&type=style&index=0&id=0bd31b88&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/redo.13ba164e.svg\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Feedback.vue?vue&type=style&index=0&id=1af5b4e9&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Survey.vue?vue&type=style&index=0&id=57022cc6&scoped=true&lang=css\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=3a31a961&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Welcome.vue?vue&type=style&index=0&id=4d550b7e&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/checkbox-checked.c2c485d4.svg\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Tutorial.vue?vue&type=style&index=0&id=6ea82b80&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./LineSliders.vue?vue&type=style&index=0&id=209b775a&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ToggleWindow.vue?vue&type=style&index=0&id=50198f32&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./BrushLibrary.vue?vue&type=style&index=0&id=5811f743&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/unlockControls.2e514317.svg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ColorPalette.vue?vue&type=style&index=0&id=1576e0cc&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Canvas.vue?vue&type=style&index=0&id=feb6f62c&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/Canvas-Custom.b03590d5.svg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./LineSettings.vue?vue&type=style&index=0&id=3b92b248&lang=css\"","module.exports = __webpack_public_path__ + \"img/scale.618c4c29.svg\";","module.exports = __webpack_public_path__ + \"img/share.69997eee.svg\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ExportForProcreate.vue?vue&type=style&index=0&id=d410ddd2&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/reset.4080ce3d.svg\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ExportGLB.vue?vue&type=style&index=0&id=e1688084&scoped=true&lang=css\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAD7CAYAAABDsImYAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAbCSURBVHgB7d37UdRqHMfhcOYUoBWoFagVeGlAxwa8FOCtAPU0IFQg2oCXBlArUBsQbUC0AXL2lxkdWLLLIiyQfJ9nJn8I7LI489nkffMmu9K27bMGGLWVSehtA4xZ+08DjJ7QIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIcC/DfyFnz9/Nm/fvm2+f/++6+vnzp1rrl692pw/f77h9BA6B7K5udk8fvy4i7zPyspK8/r1a6GfMkJnYRX59evXm2/fvs39uTNnzjScLkJfops3bzZfvnzZ8/UKZmjatl0o8iL000foS/Tr16+FwhiCDx8+LPy3CP30MevOvmpv/urVq97v1cTb+/fvu5/Z2tpqNjY2jM9PIXt0FjI9u14uXLjQRf5b7ckrfE4fobOQz58/7/p3za4/ePBgocfWm8G9e/f2PN7e//gInYXUefNpBxmLT4/vK3SOjzE6++qLnGEROvsS+vAJHQIYo49Y7Yl/741NemUT+ohU1HW+u9ah1yz59CH3pUuXutV6t2/fnht+Pf7du3e7nndanTd/+fJlt5Bmp3rujx8/7pp8m/X4R48e9U7ora6uWnRz1FqWZnJOua3/4untqG1tbbXPnj1rJ3H0/r6+rX5+lvreos+zc5vMpLeT+Gf+3Ys+x+bmZsuR2rZHH7jac167du3AS20nMXeLYF68eNEwfibjBmy/yOvwd94h8Pr6enfJKeMn9AHri7zCfvr0abfufOdWUfeNy2s8PD3OZoRalmaZY/S+cfQk5Lnj2xrL972m+to8X79+nTkeX8TGxoax+MnatkcfoJrFrhnvaTXunjebXnv7N2/e7DmcP8glqAyT0AeoTn9Nh1mB16mt/VTkdYpt2s7TaYyP0Aeo735tffHO0rfX77sTDuPh9NoA9V0bvra21m1/y4TcuNmjD5CLTDgoodPx5jFuDt1HbtEbPNSNLBkvoQ/QxYsX98y637lzp1soA32EPkCXL1/eczqswncpKrMYow/QlStX9nytZs133pF1nvoAiVpw07Ztc5LMCxwfe/QT8Def1HL27Nk/K9rqlsq1zn067LrTat1ZtW7DPMunT5+aW7dudUcAde78yZMn3XMvU9+FNfUmU0cldY08x6BlaQ5zXXazz/XjtU687/rzWu++vr7e/vjxo93e3v6z1b/71sdP3hT2XXN+2LXufY+vrV5/PUe9ttrq59bW1qyBP3rbQl+iZYZeVldX5z5msrfsXkPF38y50cPdu3fn/h2HDb3eaBa9KYaLXZbCRS1D9vDhw+5Cllmn0Op2UvMuWKnH1TDg+fPnzTLV76nXyskR+sDVKbX6PPIalx/kQxF+f9JKjemP4/5s9+/fnzt3wHIJfYkqpqPa5qkLWiaH191toerUW99jfn+tJt4mh+pd4HXTicP+LYuq31u/88aNG/u+Po7eSh3AN4xKHarXYfvOK9Jqr10LbWqW+6TvsDrr9dU6gDp16A6wR64VOoxf69AdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAvw72f5rgDFr/wfUvvTr7Qp/nwAAAABJRU5ErkJggg==\"","module.exports = __webpack_public_path__ + \"img/lockControls.990f22f9.svg\";","module.exports = __webpack_public_path__ + \"img/snapOff.219ff8f1.svg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ToolSelector.vue?vue&type=style&index=0&id=2d3197f1&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./VideoExportPreview.vue?vue&type=style&index=0&id=5584fdcf&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SymmetrySettings.vue?vue&type=style&index=0&id=04aa6b76&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/Canvas-Cylinder.4ab10120.svg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ShapeSelector.vue?vue&type=style&index=0&id=6f729269&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Input.vue?vue&type=style&index=0&id=404cb6ae&lang=css\"","module.exports = __webpack_public_path__ + \"img/showCanvas.a743c18d.svg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./TransformToolbar.vue?vue&type=style&index=0&id=41f6c9c4&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/erase.c0bec69e.svg\";","module.exports = __webpack_public_path__ + \"img/View_in_AR.c0870bd8.svg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./TwoDShapes.vue?vue&type=style&index=0&id=4262662a&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/translate.49804646.svg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ViewportCube.vue?vue&type=style&index=0&id=c6f5d5b0&scoped=true&lang=css\""],"sourceRoot":""}